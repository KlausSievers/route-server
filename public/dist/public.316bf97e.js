parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function pi(a){return a&&a.__esModule?{d:a.default}:{d:a}}var q=this;var ok={};var Ll={};function c(){return function(){throw new Error("Unimplemented abstract method.")}()}var vK=0;function ba(t){return t.ol_uid||(t.ol_uid=String(++vK))}var Qh="6.1.1";var Ig={};var Ji={};var EK=Ji&&Ji.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Xj=function(t){function r(r){var e=this,o="Assertion failed. See https://openlayers.org/en/"+("latest"===Qh?Qh:"v"+Qh.split("-")[0])+"/doc/errors/#"+r+" for details.";return(e=t.call(this,o)||this).code=r,e.name="AssertionError",e.message=o,e}return EK(r,t),r}(Error);Ji.default=Xj;var H={ADD:"add",REMOVE:"remove"};var ff={};var Lc={PROPERTYCHANGE:"propertychange"};var Wg={};function d(e,t,n,$,r){if($&&$!==e&&(n=n.bind($)),r){var i=n;n=function(){e.removeEventListener(t,n),i.apply(this,arguments)}}var s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function ef(e,t,n,$){return d(e,t,n,$,!0)}function p(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Zd(e))}var la="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;++n){var $=arguments[n];if(null!=$)for(var s in $)$.hasOwnProperty(s)&&(t[s]=$[s])}return t};function Zd(e){for(var r in e)delete e[r]}var Pl="function"==typeof Object.values?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function xg(e){var r;for(r in e)return!1;return!r}var ci={};var bf=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function sa(){return!0}function jc(){return!1}function xb(){}function sL($){var r,e,t,o=!1;return function(){var p=Array.prototype.slice.call(arguments);return o&&this===t&&Xd(p,e)||(o=!0,t=this,e=p,r=$.apply(this,arguments)),r}}function qL(r,e,n){for(var t,$,u=n||Zb,o=0,l=r.length,i=!1;o<l;)($=+u(r[t=o+(l-o>>1)],e))<0?o=t+1:(l=t,i=!$);return i?o:~o}function Zb(r,e){return r>e?1:r<e?-1:0}function $e(r,e){return r.indexOf(e)>=0}function cm(r,e,n){var t=r.length;if(r[0]<=e)return 0;if(e<=r[t-1])return t-1;var $=void 0;if(n>0){for($=1;$<t;++$)if(r[$]<e)return $-1}else if(n<0){for($=1;$<t;++$)if(r[$]<=e)return $}else for($=1;$<t;++$){if(r[$]==e)return $;if(r[$]<e)return r[$-1]-e<e-r[$]?$-1:$}return t-1}function kL(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function Ca(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,$=0;$<t;$++)r[r.length]=n[$]}function Xd(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function fL(r,e,n){var t=e||Zb;return r.every(function(e,$){if(0===$)return!0;var u=t(r[$-1],e);return!(u>0||n&&0===u)})}var ga=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();function dL(t){t.stopPropagation()}var bL=ci&&ci.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dd=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_={},i.dispatching_={},i.listeners_={},i}return bL(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_[t];i||(i=[],this.listeners_[t]=i),-1===i.indexOf(e)&&i.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new ga(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var n,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var s=0,o=r.length;s<o;++s)if(!1===r[s].call(this,e)||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var p=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];p--;)this.removeEventListener(i,xb);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){Zd(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(i[n]=xb,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(bf);ci.default=dd;var f={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",WHEEL:"wheel"};var YK=Wg&&Wg.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dl=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return YK(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(f.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=d(this,t[o],e);return n}return d(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=ef(this,t[o],e);return n}return ef(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(dd);function WK(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)p(t[e]);else p(t)}Wg.unByKey=WK,Wg.default=Dl;var Qt=ff&&ff.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function h(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(h.prototype=r.prototype,new h)}}(),Rl=function(e){function t(t,r,h){var n=e.call(this,t)||this;return n.key=r,n.oldValue=h,n}return Qt(t,e),t}(ga);ff.ObjectEvent=Rl;var Ka=function(e){function t(t){var r=e.call(this)||this;return ba(r),r.values_={},void 0!==t&&r.setProperties(t),r}return Qt(t,e),t.prototype.get=function(e){var t;return this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t},t.prototype.getKeys=function(){return Object.keys(this.values_)},t.prototype.getProperties=function(){return la({},this.values_)},t.prototype.notify=function(e,t){var r;r=D(e),this.dispatchEvent(new Rl(r,e,t)),r=Lc.PROPERTYCHANGE,this.dispatchEvent(new Rl(r,e,t))},t.prototype.set=function(e,t,r){if(r)this.values_[e]=t;else{var h=this.values_[e];this.values_[e]=t,h!==t&&this.notify(e,h)}},t.prototype.setProperties=function(e,t){for(var r in e)this.set(r,e[r],t)},t.prototype.unset=function(e,t){if(e in this.values_){var r=this.values_[e];delete this.values_[e],t||this.notify(e,r)}},t}(Dl),dm={};function D(e){return dm.hasOwnProperty(e)?dm[e]:dm[e]="change:"+e}ff.getChangeEventType=D,ff.default=Ka;var Pt=Ig&&Ig.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ot={LENGTH:"length"},We=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.element=r,o.index=n,o}return Pt(e,t),e}(ga);Ig.CollectionEvent=We;var T=function(t){function e(e,r){var n=t.call(this)||this,o=r||{};if(n.unique_=!!o.unique,n.array_=e||[],n.unique_)for(var i=0,a=n.array_.length;i<a;++i)n.assertUnique_(n.array_[i],i);return n.updateLength_(),n}return Pt(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Ot.LENGTH)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new We(H.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new We(H.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new We(H.REMOVE,n,t)),this.dispatchEvent(new We(H.ADD,e,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(Ot.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new Xj(58)},e}(Ka);Ig.default=T;var vi={};var wi={};var SK=wi&&wi.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ve=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.map=r,o.frameState=void 0!==n?n:null,o}return SK(e,t),e}(ga);wi.default=Ve;var NK=vi&&vi.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),fj=function(t){function e(e,o,n,r,i){var p=t.call(this,e,o,i)||this;return p.originalEvent=n,p.pixel_=null,p.coordinate_=null,p.dragging=void 0!==r&&r,p}return NK(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Ve);vi.default=fj;var mj={};var tj,Lt={},e=arguments[0];!function(t,e){"object"==typeof Lt?Lt=e():"function"==typeof tj&&tj.amd?tj(e):t.PointerEventsPolyfill=e()}(Lt,function(){var t=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],e=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function n(n,i){i=i||Object.create(null);var r=document.createEvent("Event");r.initEvent(n,i.bubbles||!1,i.cancelable||!1);for(var o,a=2;a<t.length;a++)r[o=t[a]]=i[o]||e[a];r.buttons=i.buttons||0;var s=0;return s=void 0!==i.pressure&&r.buttons?i.pressure:r.buttons?.5:0,r.x=r.clientX,r.y=r.clientY,r.pointerId=i.pointerId||0,r.width=i.width||1,r.height=i.height||1,r.pressure=s,r.tiltX=i.tiltX||0,r.tiltY=i.tiltY||0,r.twist=i.twist||0,r.tangentialPressure=i.tangentialPressure||0,r.pointerType=i.pointerType||"",r.hwTimestamp=i.hwTimestamp||0,r.isPrimary=i.isPrimary||!1,r.detail=0,r}var i=window.Map&&window.Map.prototype.forEach?Map:r;function r(){this.array=[],this.size=0}r.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(n,i){t.call(e,n,i,this)},this)}};var o=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],a=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],s={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!=typeof SVGElementInstance,c={pointermap:new i,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach(function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))},this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(n){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var i=new n(t,e);return e.preventDefault&&(i.preventDefault=e.preventDefault),i._target=i._target||e.target,i},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),i=0;i<o.length;i++)n[e=o[i]]=t[e]||a[i],!u||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in s?void 0:e:t._target},propagate:function(t,e,n){for(var i=t.target,r=[];null!=i&&i!==document&&!i.contains(t.relatedTarget);)if(r.push(i),!(i=i.parentNode))return;n&&r.reverse(),r.forEach(function(n){t.target=n,e.call(this,t)},this)},setCapture:function(t,e,i){this.captureInfo[t]&&this.releaseCapture(t,i),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,i),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var r=new n("gotpointercapture",{bubbles:!0});r.pointerId=t,r._target=e,i||this.asyncDispatchEvent(r)},releaseCapture:function(t,e){var i=this.captureInfo[t];if(i){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var r=new n("lostpointercapture",{bubbles:!0});r.pointerId=t,r._target=i,e||this.asyncDispatchEvent(r)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};c.boundHandler=c.eventHandler.bind(c);var l={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var i,r,o=t.elementFromPoint(e,n);for(r=this.targetingShadow(o);r;){if(i=r.elementFromPoint(e,n)){var a=this.targetingShadow(i);return this.searchRoot(a,e,n)||i}r=this.olderShadow(r)}return o}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,i=this.owner(t.target);return i.elementFromPoint(e,n)||(i=document),this.searchRoot(i,e,n)}},h=Array.prototype.forEach.call.bind(Array.prototype.forEach),p=Array.prototype.map.call.bind(Array.prototype.map),v=Array.prototype.slice.call.bind(Array.prototype.slice),f=Array.prototype.filter.call.bind(Array.prototype.filter),d=window.MutationObserver||window.WebKitMutationObserver,m={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function b(t,e,n,i){this.addCallback=t.bind(i),this.removeCallback=e.bind(i),this.changedCallback=n.bind(i),d&&(this.observer=new d(this.mutationWatcher.bind(this)))}function E(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}b.prototype={watchSubtree:function(t){this.observer&&l.canTarget(t)&&this.observer.observe(t,m)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){h(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll("[touch-action]"):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(v(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=p(t,this.findElements,this);return e.push(f(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var g=[{selector:"[touch-action=\"none\"]",value:"none"},{selector:"[touch-action=\"auto\"]",value:"auto"},{selector:"[touch-action~=\"pan-x\"]",value:"pan-x"},{selector:"[touch-action~=\"pan-y\"]",value:"pan-y"},{selector:"[touch-action~=\"pan-up\"]",value:"pan-up"},{selector:"[touch-action~=\"pan-down\"]",value:"pan-down"},{selector:"[touch-action~=\"pan-left\"]",value:"pan-left"},{selector:"[touch-action~=\"pan-right\"]",value:"pan-right"}],y="",T=window.PointerEvent||window.MSPointerEvent,w=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;var P=c.pointermap,S=[1,4,2,8,16],O=!1;try{O=1===new MouseEvent("test",{buttons:1}).buttons}catch(U){}var M,I={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,r=t.clientY,o=0,a=n.length;o<a&&(e=n[o]);o++){var s=Math.abs(i-e.x),u=Math.abs(r-e.y);if(s<=25&&u<=25)return!0}},prepareEvent:function(t){var e=c.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,"webkitForce"in t&&(e.pressure=t.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),e},prepareButtonsForMove:function(t,e){var n=P.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=P.get(this.POINTER_ID),n=this.prepareEvent(t);O||(n.buttons=S[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),P.set(this.POINTER_ID,t),e&&0!==e.buttons?c.move(n):c.down(n)}},webkitmouseforcechanged:function(t){this.mousemove(t)},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);O||this.prepareButtonsForMove(e,t),e.button=-1,P.set(this.POINTER_ID,t),c.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=P.get(this.POINTER_ID),n=this.prepareEvent(t);if(!O){var i=S[n.button];n.buttons=e?e.buttons&~i:0,t.buttons=n.buttons}P.set(this.POINTER_ID,t),n.buttons&=~S[n.button],0===n.buttons?c.up(n):c.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);O||this.prepareButtonsForMove(e,t),e.button=-1,P.set(this.POINTER_ID,t),c.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);O||this.prepareButtonsForMove(e,t),e.button=-1,c.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.deactivateMouse()},deactivateMouse:function(){P.delete(this.POINTER_ID)}},N=c.captureInfo,_=l.findTarget.bind(l),R=l.allShadows.bind(l),D=c.pointermap,X={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(t){M.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute("touch-action"),n=this.touchActionToScrollType(e);"number"==typeof n&&(t._scrollType=n,c.listen(t,this.events),R(t).forEach(function(t){t._scrollType=n,c.listen(t,this.events)},this))},elementRemoved:function(t){if(D.size>0){var e=this.events;t.addEventListener("touchend",function(){t._scrollType=void 0,c.unlisten(t,e)})}else t._scrollType=void 0,c.unlisten(t,this.events);R(t).forEach(function(t){t._scrollType=void 0,c.unlisten(t,this.events)},this)},elementChanged:function(t,e){var n=t.getAttribute("touch-action"),i=this.touchActionToScrollType(n),r=this.touchActionToScrollType(e);"number"==typeof i&&"number"==typeof r?(t._scrollType=i,R(t).forEach(function(t){t._scrollType=i},this)):"number"==typeof r?this.elementRemoved(t):"number"==typeof i&&this.elementAdded(t)},scrollTypes:{UP:function(t){return t.includes("pan-y")||t.includes("pan-up")?1:0},DOWN:function(t){return t.includes("pan-y")||t.includes("pan-down")?2:0},LEFT:function(t){return t.includes("pan-x")||t.includes("pan-left")?4:0},RIGHT:function(t){return t.includes("pan-x")||t.includes("pan-right")?8:0}},touchActionToScrollType:function(t){if(t){if("auto"===t)return 15;if("none"===t)return 0;var e=t.split(" "),n=this.scrollTypes;return n.UP(e)|n.DOWN(e)|n.LEFT(e)|n.RIGHT(e)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===D.size||1===D.size&&D.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1)},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t&&"touchforcechange"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=c.cloneEvent(t),i=n.pointerId=t.identifier+2;if(n.target=N[i]||_(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=void 0!==t.force?t.force:void 0!==t.webkitForce?t.webkitForce:void 0,n.isPrimary=this.isPrimaryTouch(t),t.altitudeAngle){var r=Math.tan(t.altitudeAngle),o=180/Math.PI;n.tiltX=Math.atan(Math.cos(t.azimuthAngle)/r)*o,n.tiltY=Math.atan(Math.sin(t.azimuthAngle)/r)*o}else n.tiltX=0,n.tiltY=0;"stylus"===t.touchType?n.pointerType="pen":n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var a=this;return n.preventDefault=function(){a.scrolling=!1,a.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var i,r=0;r<n.length;r++)i=n[r],e.call(this,this.touchToPointer(i))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if(0===n)e=!1;else if(15===n)e=!0;else{var i=t.changedTouches[0],r=i.clientY-this.firstXY.Y,o=Math.abs(r),a=i.clientX-this.firstXY.X,s=Math.abs(a),u=1&n,c=2&n,l=4&n,h=8&n;l&&h?e=s>o:l?e=s>o&&a>0:h&&(e=s>o&&a<0),e||(u&&c?e=s<o:u?e=s<o&&r>0:c&&(e=s<o&&r<0))}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,i=0,r=t.length;i<r&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(D.size>=e.length){var n=[];D.forEach(function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var r=t.out;n.push(r)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||this.processTouches(t,this.overDown)},overDown:function(t){D.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),c.enterOver(t),c.down(t)},touchforcechange:function(t){this.touchmove(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):("touchforcechange"!==t.type&&t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=D.get(e.pointerId);if(n){var i=n.out,r=n.outTarget;c.move(e),i&&r!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=r,i.target=r,e.target?(c.leaveOut(i),c.enterOver(e)):(e.target=r,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(c.up(t),c.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){c.cancel(t),c.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){D.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=I.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};e.push(i);var r=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,i);setTimeout(r,2500)}}};M=new b(X.elementAdded,X.elementRemoved,X.elementChanged,X);var C,Y,F,A=c.pointermap,x=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,L={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return x&&((e=c.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){A.delete(t)},MSPointerDown:function(t){A.set(t.pointerId,t);var e=this.prepareEvent(t);c.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);c.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);c.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);c.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);c.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=c.makeEvent("lostpointercapture",t);c.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=c.makeEvent("gotpointercapture",t);c.dispatchEvent(e)}};function $(t){if(!c.pointermap.has(t)){var e=new Error("NotFoundError");throw e.name="NotFoundError",e}}function k(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function K(t){return 0!==c.pointermap.get(t).buttons}return window.navigator.msPointerEnabled?(C=function(t){$(t),k(this),K(t)&&(c.setCapture(t,this,!0),this.msSetPointerCapture(t))},Y=function(t){$(t),c.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(C=function(t){$(t),k(this),K(t)&&c.setCapture(t,this)},Y=function(t){$(t),c.releaseCapture(t)}),F=function(t){return!!c.captureInfo[t]},function(){if(T){g.forEach(function(t){y+=t.selector+E(t.value)+"\n",w&&(y+="body /shadow-deep/ "+t.selector+E(t.value)+"\n")});var t=document.createElement("style");t.textContent=y,document.head.appendChild(t)}}(),function(){if(!window.PointerEvent){if(window.PointerEvent=n,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),c.registerSource("ms",L)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),c.registerSource("mouse",I),void 0!==window.ontouchstart&&c.registerSource("touch",X);c.register(document)}}(),window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:C},releasePointerCapture:{value:Y},hasPointerCapture:{value:F}}),{dispatcher:c,Installer:b,PointerEvent:n,PointerMap:i,targetFinding:l}});var Vd="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",zK=-1!==Vd.indexOf("firefox");var wL=-1!==Vd.indexOf("safari")&&-1==Vd.indexOf("chrom");var mK=-1!==Vd.indexOf("webkit")&&-1==Vd.indexOf("edge");var hK=-1!==Vd.indexOf("macintosh");var Xf=window.devicePixelRatio||1;var Gt="undefined"!=typeof Image&&Image.prototype.decode;var j={SINGLECLICK:"singleclick",CLICK:f.CLICK,DBLCLICK:f.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Zk={};var YJ=Zk&&Zk.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Hb=function(t){function r(r,e,o,n,$){var p=t.call(this,r,e,o,n,$)||this;return p.pointerEvent=o,p}return YJ(r,t),r}(fj);Zk.default=Hb;var Db={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var XJ=mj&&mj.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),Ct=function(e){function t(t,o){var i=e.call(this,t)||this;i.map_=t,i.clickTimeoutId_,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=o?o*Xf:Xf,i.down_=null;var r=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=r,i.pointerdownListenerKey_=d(r,Db.POINTERDOWN,i.handlePointerDown_,i),i.relayedListenerKey_=d(r,Db.POINTERMOVE,i.relayEvent_,i),i}return XJ(t,e),t.prototype.emulateClick_=function(e){var t=new Hb(j.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Hb(j.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var t=new Hb(j.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},t.prototype.updateActivePointers_=function(e){var t=e;t.type==j.POINTERUP||t.type==j.POINTERCANCEL?delete this.trackedTouches_[t.pointerId]:t.type==j.POINTERDOWN&&(this.trackedTouches_[t.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},t.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new Hb(j.POINTERUP,this.map_,e);this.dispatchEvent(t),t.propagationStopped||this.dragging_||!this.isMouseActionButton_(e)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(p),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(e){return 0===e.button},t.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var t=new Hb(j.POINTERDOWN,this.map_,e);this.dispatchEvent(t),this.down_=e,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(d(document,j.POINTERMOVE,this.handlePointerMove_,this),d(document,j.POINTERUP,this.handlePointerUp_,this),d(this.element_,j.POINTERCANCEL,this.handlePointerUp_,this))},t.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var t=new Hb(j.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}},t.prototype.relayEvent_=function(e){var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Hb(e.type,this.map_,e,t))},t.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(p(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(p(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(p),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(dd);mj.default=Ct;var Td={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};var X={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var kc={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var Rh={};var aa={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};function m(r,$){if(!r)throw new Xj($)}var If=1/0;var OJ=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Zd(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},t.prototype.enqueue=function(t){m(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=If&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],s=i[t],o=t;t<n>>1;){var u=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),p=h<n&&i[h]<i[u]?h:u;e[t]=e[p],i[t]=i[p],t=p}e[t]=r,i[t]=s,this.siftDown_(o,t)},t.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],s=n[e];e>t;){var o=this.getParentIndex_(e);if(!(n[o]>s))break;i[e]=i[o],n[e]=n[o],e=o}i[e]=r,n[e]=s},t.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,s=this.priorities_,o=0,u=r.length;for(e=0;e<u;++e)(i=n(t=r[e]))==If?delete this.queuedElements_[this.keyFunction_(t)]:(s[o]=i,r[o++]=t);r.length=o,s.length=o,this.heapify_()},t}();var MJ=Rh&&Rh.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),At=function(t){function e(e,i){var n=t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()})||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=i,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return MJ(e,t),e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);i&&e[0].addEventListener(f.CHANGE,this.boundHandleTileChange_);return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(e.hifi&&i===aa.LOADED||i===aa.ERROR||i===aa.EMPTY||i===aa.ABORT){e.removeEventListener(f.CHANGE,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,r,o=0,a=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)r=(n=this.dequeue()[0]).getKey(),(i=n.getState())===aa.ABORT?a=!0:i!==aa.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,n.load());0===o&&a&&this.tileChangeCallback_()},e}(OJ);Rh.default=At;var xc={};var KJ=42;var Ui=256;function zt(t,$,e){return function(r,a,c,o){if(r){var n=$?0:c[0]*a,x=$?0:c[1]*a,p=t[0]+n/2,z=t[2]-n/2,R=t[1]+x/2,h=t[3]-x/2;p>z&&(z=p=(z+p)/2),R>h&&(h=R=(h+R)/2);var m=I(r[0],p,z),M=I(r[1],R,h),i=30*a;return o&&e&&(m+=-i*Math.log(1+Math.max(0,p-r[0])/i)+i*Math.log(1+Math.max(0,r[0]-z)/i),M+=-i*Math.log(1+Math.max(0,R-r[1])/i)+i*Math.log(1+Math.max(0,r[1]-h)/i)),[m,M]}}}function IJ(t){return t}function I(r,e,t){return Math.min(Math.max(r,e),t)}var HJ="cosh"in Math?Math.cosh:function(r){var e=Math.exp(r);return(e+1/e)/2};function GJ(r,e,t,$,o,a){var n=o-t,s=a-$;if(0!==n||0!==s){var p=((r-t)*n+(e-$)*s)/(n*n+s*s);p>1?(t=o,$=a):p>0&&(t+=n*p,$+=s*p)}return $c(r,e,t,$)}function $c(r,e,t,$){var o=t-r,a=$-e;return o*o+a*a}function FJ(r){for(var e=r.length,t=0;t<e;t++){for(var $=t,o=Math.abs(r[t][t]),a=t+1;a<e;a++){var n=Math.abs(r[a][t]);n>o&&(o=n,$=a)}if(0===o)return null;var s=r[$];r[$]=r[t],r[t]=s;for(var p=t+1;p<e;p++)for(var x=-r[p][t]/r[t][t],u=t;u<e+1;u++)t==u?r[p][u]=0:r[p][u]+=x*r[t][u]}for(var B=new Array(e),G=e-1;G>=0;G--){B[G]=r[G][e]/r[G][G];for(var i=G-1;i>=0;i--)r[i][e]-=r[i][G]*B[G]}return B}function yt(r){return 180*r/Math.PI}function wb(r){return r*Math.PI/180}function ed(r,e){var t=r%e;return t*e<0?t+e:t}function Sd(r,e,t){return r+t*(e-r)}function Ck(o,t,e){var n=L(t)/e[0],r=db(t)/e[1];return Math.min(o,Math.min(n,r))}function Ek(o,t,e){var n=Math.min(o,t);return n*=Math.log(1+50*Math.max(0,o/t-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/o-1))/50+1),I(n,e/2,2*t)}function _I(o,t,e){return function(n,r,$,a){if(void 0!==n){var l=o[0],i=o[o.length-1],p=e?Ck(l,e,$):l;if(a)return void 0===t||t?Ek(n,p,i):I(n,i,p);var m=Math.min(p,n),u=Math.floor(cm(o,m,r));return o[u]>p&&u<o.length-1?o[u+1]:o[u]}}}function $I(o,t,e,n,r){return function($,a,l,i){if(void 0!==$){var p=r?Ck(t,r,l):t,m=void 0!==e?e:0;if(i)return void 0===n||n?Ek($,p,m):I($,m,p);var u=Math.ceil(Math.log(t/p)/Math.log(o)-1e-9),h=-a*(.5-1e-9)+.5,c=Math.min(p,$),s=Math.floor(Math.log(t/c)/Math.log(o)+h),M=Math.max(u,s),v=t/Math.pow(o,M);return I(v,m,p)}}}function wt(o,t,e,n){return function(r,$,a,l){if(void 0!==r){var i=n?Ck(o,n,a):o;return(void 0===e||e)&&l?Ek(r,i,t):I(r,t,i)}}}function F(r){for(var t=ja(),e=0,$=r.length;e<$;++e)Ld(t,r[e]);return t}function YI(r,t,e){return La(Math.min.apply(null,r),Math.min.apply(null,t),Math.max.apply(null,r),Math.max.apply(null,t),e)}function Tg(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function ut(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function Qd(r,t,e){var $,i;return($=t<r[0]?r[0]-t:r[2]<t?t-r[2]:0)*$+(i=e<r[1]?r[1]-e:r[3]<e?e-r[3]:0)*i}function tt(r,t){return Jh(r,t[0],t[1])}function tb(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function Jh(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function Mh(r,t){var e=r[0],$=r[1],i=r[2],o=r[3],n=t[0],p=t[1],a=P.UNKNOWN;return n<e?a|=P.LEFT:n>i&&(a|=P.RIGHT),p<$?a|=P.BELOW:p>o&&(a|=P.ABOVE),a===P.UNKNOWN&&(a=P.INTERSECTING),a}function ja(){return[1/0,1/0,-1/0,-1/0]}function La(r,t,e,$,i){return i?(i[0]=r,i[1]=t,i[2]=e,i[3]=$,i):[r,t,e,$]}function Je(r){return La(1/0,1/0,-1/0,-1/0,r)}function Mf(r,t){var e=r[0],$=r[1];return La(e,$,e,$,t)}function UI(r,t){return LI(Je(t),r)}function rt(r,t,e,$,i){return pt(Je(i),r,t,e,$)}function Md(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function qt(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function Ld(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function LI(r,t){for(var e=0,$=t.length;e<$;++e)Ld(r,t[e]);return r}function pt(r,t,e,$,i){for(;e<$;e+=i)JI(r,t[e],t[e+1]);return r}function JI(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function ot(r,t){var e;return(e=t(Nb(r)))?e:(e=t(Tc(r)))?e:(e=t(cd(r)))?e:(e=t(ab(r)))||!1}function Ki(r){var t=0;return hk(r)||(t=L(r)*db(r)),t}function Nb(r){return[r[0],r[1]]}function Tc(r){return[r[2],r[1]]}function Ee(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function HI(r,t){var e;return t===Be.BOTTOM_LEFT?e=Nb(r):t===Be.BOTTOM_RIGHT?e=Tc(r):t===Be.TOP_LEFT?e=ab(r):t===Be.TOP_RIGHT?e=cd(r):m(!1,13),e}function nt(r,t,e,$,i){var o=t*$[0]/2,n=t*$[1]/2,p=Math.cos(e),a=Math.sin(e),x=o*p,D=o*a,Q=n*p,s=n*a,c=r[0],u=r[1],d=c-x+s,g=c-x-s,m=c+x-s,f=c+x+s,l=u-D-Q,h=u-D+Q,R=u+D+Q,E=u+D-Q;return La(Math.min(d,g,m,f),Math.min(l,h,R,E),Math.max(d,g,m,f),Math.max(l,h,R,E),i)}function db(r){return r[3]-r[1]}function De(r,t,e){var $=e||ja();return fa(r,t)?(r[0]>t[0]?$[0]=r[0]:$[0]=t[0],r[1]>t[1]?$[1]=r[1]:$[1]=t[1],r[2]<t[2]?$[2]=r[2]:$[2]=t[2],r[3]<t[3]?$[3]=r[3]:$[3]=t[3]):Je($),$}function ab(r){return[r[0],r[3]]}function cd(r){return[r[2],r[3]]}function L(r){return r[2]-r[0]}function fa(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function hk(r){return r[2]<r[0]||r[3]<r[1]}function EI(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function lt(r,t){var e=(r[2]-r[0])/2*(t-1),$=(r[3]-r[1])/2*(t-1);r[0]-=e,r[2]+=e,r[1]-=$,r[3]+=$}function AI(r,t,e){var $=!1,i=Mh(r,t),o=Mh(r,e);if(i===P.INTERSECTING||o===P.INTERSECTING)$=!0;else{var n=r[0],p=r[1],a=r[2],x=r[3],D=t[0],Q=t[1],s=e[0],c=e[1],u=(c-Q)/(s-D),d=void 0,g=void 0;o&P.ABOVE&&!(i&P.ABOVE)&&($=(d=s-(c-x)/u)>=n&&d<=a),$||!(o&P.RIGHT)||i&P.RIGHT||($=(g=c-(s-a)*u)>=p&&g<=x),$||!(o&P.BELOW)||i&P.BELOW||($=(d=s-(c-p)/u)>=n&&d<=a),$||!(o&P.LEFT)||i&P.LEFT||($=(g=c-(s-n)*u)>=p&&g<=x)}return $}function xI(r,t,e){var $=[r[0],r[1],r[0],r[3],r[2],r[1],r[2],r[3]];return t($,$,2),YI([$[0],$[2],$[4],$[6]],[$[1],$[3],$[5],$[7]],e)}var Be={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var P={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Hk(e){return void 0!==e?0:void 0}function jt(e){return void 0!==e?e:void 0}function tI(e){var o=2*Math.PI/e;return function(e,r){return r?e:void 0!==e?e=Math.floor(e/o+.5)*o:void 0}}function pI(e){var o=e||wb(5);return function(e,r){return r?e:void 0!==e?Math.abs(e)<=o?0:e:void 0}}var O={ANIMATING:0,INTERACTING:1};var Ga={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function lI(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function RH(t,e){var r=e.getRadius(),$=e.getCenter(),n=$[0],s=$[1],o=t[0]-n,a=t[1]-s;0===o&&0===a&&(o=1);var p=Math.sqrt(o*o+a*a);return[n+r*o/p,s+r*a/p]}function ng(t,e){var r,$,n=t[0],s=t[1],o=e[0],a=e[1],p=o[0],j=o[1],i=a[0],G=a[1],x=i-p,c=G-j,u=0===x&&0===c?0:(x*(n-p)+c*(s-j))/(x*x+c*c||0);return u<=0?(r=p,$=j):u>=1?(r=i,$=G):(r=p+u*x,$=j+u*c),[r,$]}function $a(t,e){for(var r=!0,$=t.length-1;$>=0;--$)if(t[$]!=e[$]){r=!1;break}return r}function Ul(t,e){var r=Math.cos(e),$=Math.sin(e),n=t[0]*r-t[1]*$,s=t[1]*r+t[0]*$;return t[0]=n,t[1]=s,t}function OH(t,e){return t[0]*=e,t[1]*=e,t}function qa(t,e){var r=t[0]-e[0],$=t[1]-e[1];return r*r+$*$}function yg(t,e){return Math.sqrt(qa(t,e))}function Cg(t,e){return qa(t,ng(t,e))}function ct(e){return Math.pow(e,3)}function vc(e){return 1-ct(1-e)}function KH(e){return 3*e*e-2*e*e*e}function BH(e){return e}var k={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};var zc={};var B={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var mi={};var ye={};var ti={};function Ec(r,t,e,$,o,a){for(var n=a||[],s=0,f=t;f<e;f+=$){var l=r[f],p=r[f+1];n[s++]=o[0]*l+o[2]*p+o[4],n[s++]=o[1]*l+o[3]*p+o[5]}return a&&n.length!=s&&(n.length=s),n}function bt(r,t,e,$,o,a,n){for(var s=n||[],f=Math.cos(o),l=Math.sin(o),p=a[0],w=a[1],x=0,G=t;G<e;G+=$){var L=r[G]-p,v=r[G+1]-w;s[x++]=p+L*f-v*l,s[x++]=w+L*l+v*f;for(var h=G+2;h<G+$;++h)s[x++]=r[h]}return n&&s.length!=x&&(s.length=x),s}function vH(r,t,e,$,o,a,n,s){for(var f=s||[],l=n[0],p=n[1],w=0,x=t;x<e;x+=$){var G=r[x]-l,L=r[x+1]-p;f[w++]=l+o*G,f[w++]=p+a*L;for(var v=x+2;v<x+$;++v)f[w++]=r[v]}return s&&f.length!=w&&(f.length=w),f}function at(r,t,e,$,o,a,n){for(var s=n||[],f=0,l=t;l<e;l+=$){s[f++]=r[l]+o,s[f++]=r[l+1]+a;for(var p=l+2;p<l+$;++p)s[f++]=r[p]}return n&&s.length!=f&&(s.length=f),s}function Ci(t,r,o){var $;if(void 0!==r){for(var e=0,i=t.length;e<i;++e)r[e]=t[e];$=r}else $=t.slice();return $}function _s(t,r,o){if(void 0!==r&&t!==r){for(var $=0,e=t.length;$<e;++$)r[$]=t[$];t=r}return t}function sH(t){HF(t.getCode(),t),qh(t,t,Ci)}function rH(t){t.forEach(sH)}function N(t){return"string"==typeof t?NF(t):t||null}function Ri(t,r,o,$){var e,i=(t=N(t)).getPointResolutionFunc();if(i)e=i(r,o),$&&$!==t.getUnits()&&(n=t.getMetersPerUnit())&&(e=e*n/Ta[$]);else if(t.getUnits()==Y.DEGREES&&!$||$==Y.DEGREES)e=r;else{var n,s=Ed(t,N("EPSG:4326")),a=[o[0]-r/2,o[1],o[0]+r/2,o[1],o[0],o[1]-r/2,o[0],o[1]+r/2];a=s(a,a,2),e=(Jj(a.slice(0,2),a.slice(2,4))+Jj(a.slice(4,6),a.slice(6,8)))/2,void 0!==(n=$?Ta[$]:t.getMetersPerUnit())&&(e/=n)}return e}function $s(t){rH(t),t.forEach(function(r){t.forEach(function(t){r!==t&&qh(r,t,Ci)})})}function pH(t,r,o,$){t.forEach(function(t){r.forEach(function(r){qh(t,r,o),qh(r,t,$)})})}function _i(t,r){return t?"string"==typeof t?N(t):t:N(r)}function cj(t,r){return gg(t,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function Pc(t,r){if(t===r)return!0;var o=t.getUnits()===r.getUnits();return t.getCode()===r.getCode()?o:Ed(t,r)===Ci&&o}function Ed(t,r){var o=t.getCode(),$=r.getCode(),e=RF(o,$);return e||(e=_s),e}function se(t,r){return Ed(N(t),N(r))}function gg(t,r,o){return se(r,o)(t,void 0,t.length)}function Ys(t,r,o){var $=se(r,o);return xI(t,$)}var kg=6371008.8;function Jj(e,t,r){var $=r||kg,a=wb(e[1]),o=wb(t[1]),n=(o-a)/2,E=wb(t[0]-e[0])/2,R=Math.sin(n)*Math.sin(n)+Math.sin(E)*Math.sin(E)*Math.cos(a)*Math.cos(o);return 2*$*Math.atan2(Math.sqrt(R),Math.sqrt(1-R))}function Mj(e,t){for(var r=0,$=0,a=e.length;$<a-1;++$)r+=Jj(e[$],e[$+1],t);return r}function mH(e,t){var r=t||{},$=r.radius||kg,a=r.projection||"EPSG:3857",o=e.getType();o!==k.GEOMETRY_COLLECTION&&(e=e.clone().transform(a,"EPSG:4326"));var n,E,R,p,s,i,q=0;switch(o){case k.POINT:case k.MULTI_POINT:break;case k.LINE_STRING:case k.LINEAR_RING:q=Mj(n=e.getCoordinates(),$);break;case k.MULTI_LINE_STRING:case k.POLYGON:for(R=0,p=(n=e.getCoordinates()).length;R<p;++R)q+=Mj(n[R],$);break;case k.MULTI_POLYGON:for(R=0,p=(n=e.getCoordinates()).length;R<p;++R)for(s=0,i=(E=n[R]).length;s<i;++s)q+=Mj(E[s],$);break;case k.GEOMETRY_COLLECTION:var m=e.getGeometries();for(R=0,p=m.length;R<p;++R)q+=mH(m[R],t);break;default:throw new Error("Unsupported geometry type: "+o);}return q}function rg(e,t){for(var r=0,$=e.length,a=e[$-1][0],o=e[$-1][1],n=0;n<$;n++){var E=e[n][0],R=e[n][1];r+=wb(E-a)*(2+Math.sin(wb(o))+Math.sin(wb(R))),a=E,o=R}return r*t*t/2}function kH(e,t){var r=t||{},$=r.radius||kg,a=r.projection||"EPSG:3857",o=e.getType();o!==k.GEOMETRY_COLLECTION&&(e=e.clone().transform(a,"EPSG:4326"));var n,E,R,p,s,i,q=0;switch(o){case k.POINT:case k.MULTI_POINT:case k.LINE_STRING:case k.MULTI_LINE_STRING:case k.LINEAR_RING:break;case k.POLYGON:for(n=e.getCoordinates(),q=Math.abs(rg(n[0],$)),R=1,p=n.length;R<p;++R)q-=Math.abs(rg(n[R],$));break;case k.MULTI_POLYGON:for(R=0,p=(n=e.getCoordinates()).length;R<p;++R)for(E=n[R],q+=Math.abs(rg(E[0],$)),s=1,i=E.length;s<i;++s)q-=Math.abs(rg(E[s],$));break;case k.GEOMETRY_COLLECTION:var m=e.getGeometries();for(R=0,p=m.length;R<p;++R)q+=kH(m[R],t);break;default:throw new Error("Unsupported geometry type: "+o);}return q}function hH(e,t,r,$){var a=$||kg,o=wb(e[1]),n=wb(e[0]),E=t/a,R=Math.asin(Math.sin(o)*Math.cos(E)+Math.cos(o)*Math.sin(E)*Math.cos(r)),p=n+Math.atan2(Math.sin(r)*Math.sin(E)*Math.cos(o),Math.cos(E)-Math.sin(o)*Math.sin(R));return[yt(p),yt(R)]}var Jb={};var xL=arguments[0];var Y={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Ta={};Ta[Y.DEGREES]=2*Math.PI*6370997/360,Ta[Y.FEET]=.3048,Ta[Y.METERS]=1,Ta[Y.USFEET]=1200/3937;var Os=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ta[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var uG=Jb&&Jb.__extends||function(){var o=function($,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,$){o.__proto__=$}||function(o,$){for(var r in $)$.hasOwnProperty(r)&&(o[r]=$[r])})($,r)};return function($,r){function t(){this.constructor=$}o($,r),$.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),qe=6378137;Jb.RADIUS=qe;var gd=Math.PI*qe;Jb.HALF_SIZE=gd;var Gs=[-gd,-gd,gd,gd];Jb.EXTENT=Gs;var Fs=[-180,-85,180,85];Jb.WORLD_EXTENT=Fs;var hd=function(o){function $($){return o.call(this,{code:$,units:Y.METERS,extent:Gs,global:!0,worldExtent:Fs,getPointResolution:function(o,$){return o/HJ($[1]/qe)}})||this}return uG($,o),$}(Os),Ok=[new hd("EPSG:3857"),new hd("EPSG:102100"),new hd("EPSG:102113"),new hd("EPSG:900913"),new hd("urn:ogc:def:crs:EPSG:6.18:3:3857"),new hd("urn:ogc:def:crs:EPSG::3857"),new hd("http://www.opengis.net/gml/srs/epsg.xml#3857")];function As(o,$,r){var t=o.length,e=r>1?r:2,s=$;void 0===s&&(s=e>2?o.slice():new Array(t));for(var n=gd,l=0;l<t;l+=e){s[l]=n*o[l]/180;var h=qe*Math.log(Math.tan(Math.PI*(+o[l+1]+90)/360));h>n?h=n:h<-n&&(h=-n),s[l+1]=h}return s}function ys(o,$,r){var t=o.length,e=r>1?r:2,s=$;void 0===s&&(s=e>2?o.slice():new Array(t));for(var n=0;n<t;n+=e)s[n]=180*o[n]/gd,s[n+1]=360*Math.atan(Math.exp(o[n+1]/qe))/Math.PI-90;return s}Jb.PROJECTIONS=Ok,Jb.fromEPSG4326=As,Jb.toEPSG4326=ys;var Dd={};var fG=Dd&&Dd.__extends||function(){var n=function(r,$){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var $ in r)r.hasOwnProperty($)&&(n[$]=r[$])})(r,$)};return function(r,$){function e(){this.constructor=r}n(r,$),r.prototype=null===$?Object.create($):(e.prototype=$.prototype,new e)}}(),xs=6378137;Dd.RADIUS=xs;var _k=[-180,-90,180,90];Dd.EXTENT=_k;var ls=Math.PI*xs/180;Dd.METERS_PER_UNIT=ls;var Wb=function(n){function r(r,$){return n.call(this,{code:r,units:Y.DEGREES,extent:_k,axisOrientation:$,global:!0,metersPerUnit:ls,worldExtent:_k})||this}return fG(r,n),r}(Os),Fl=[new Wb("CRS:84"),new Wb("EPSG:4326","neu"),new Wb("urn:ogc:def:crs:EPSG::4326","neu"),new Wb("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Wb("urn:ogc:def:crs:OGC:1.3:CRS84"),new Wb("urn:ogc:def:crs:OGC:2:84"),new Wb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Wb("urn:x-ogc:def:crs:EPSG:4326","neu")];Dd.PROJECTIONS=Fl;var Bd={};function qh($,r,e){var t=$.getCode(),o=r.getCode();t in Bd||(Bd[t]={}),Bd[t][o]=e}function RF($,r){var e;return $ in Bd&&r in Bd[$]&&(e=Bd[$][r]),e}var js={};function NF($){return js[$]||null}function HF($,t){js[$]=t}var Ab=null;function Eh(){return Ab}function ke(t,r){return Ab?gg(t,r,Ab):t}function J(t,r){return Ab?gg(t,Ab,r):t}function ae(t,r){return Ab?Ys(t,r,Ab):t}function Pb(t,r){return Ab?Ys(t,Ab,r):t}function FF(){$s(Ok),$s(Fl),pH(Fl,Ok,As,ys)}FF();var yL=new Array(6);function Ia(){return[1,0,0,1,0,0]}function DF(e,$,t,r,o,p,n){return e[0]=$,e[1]=t,e[2]=r,e[3]=o,e[4]=p,e[5]=n,e}function CF(e,$){return e[0]=$[0],e[1]=$[1],e[2]=$[2],e[3]=$[3],e[4]=$[4],e[5]=$[5],e}function da(e,$){var t=$[0],r=$[1];return $[0]=e[0]*t+e[2]*r+e[4],$[1]=e[1]*t+e[3]*r+e[5],$}function uF(e,$,t){return DF(e,$,0,0,t,0,0)}function lb(e,$,t,r,o,p,n,A){var P=Math.sin(p),x=Math.cos(p);return e[0]=r*x,e[1]=o*P,e[2]=-r*P,e[3]=o*x,e[4]=n*r*x-A*r*P+$,e[5]=n*o*P+A*o*x+t,e}function si(e,$){var t=qF($);m(0!==t,32);var r=$[0],o=$[1],p=$[2],n=$[3],A=$[4],P=$[5];return e[0]=n/t,e[1]=-o/t,e[2]=-p/t,e[3]=r/t,e[4]=(p*P-n*A)/t,e[5]=-(r*P-o*A)/t,e}function qF(e){return e[0]*e[3]-e[1]*e[2]}function _r(e){return"matrix("+e.join(", ")+")"}var ZE=ti&&ti.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Xr=Ia(),Wr=function(t){function r(){var r=t.call(this)||this;return r.extent_=ja(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=sL(function(t,r,e){if(!e)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(e),o.getSimplifiedGeometry(r)}),r}return ZE(r,t),r.prototype.simplifyTransformed=function(t,r){return this.simplifyTransformedInternal(this.getRevision(),t,r)},r.prototype.clone=function(){return c()},r.prototype.closestPointXY=function(t,r,e,o){return c()},r.prototype.containsXY=function(t,r){var e=this.getClosestPoint([t,r]);return e[0]===t&&e[1]===r},r.prototype.getClosestPoint=function(t,r){var e=r||[NaN,NaN];return this.closestPointXY(t[0],t[1],e,1/0),e},r.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},r.prototype.computeExtent=function(t){return c()},r.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),EI(this.extent_,t)},r.prototype.rotate=function(t,r){c()},r.prototype.scale=function(t,r,e){c()},r.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},r.prototype.getSimplifiedGeometry=function(t){return c()},r.prototype.getType=function(){return c()},r.prototype.applyTransform=function(t){c()},r.prototype.intersectsExtent=function(t){return c()},r.prototype.translate=function(t,r){c()},r.prototype.transform=function(t,r){var e=N(t),o=e.getUnits()==Y.TILE_PIXELS?function(t,o,n){var s=e.getExtent(),i=e.getWorldExtent(),$=db(i)/db(s);return lb(Xr,i[0],i[3],$,-$,0,0,0),Ec(t,0,t.length,n,Xr,o),se(e,r)(t,o,n)}:se(e,r);return this.applyTransform(o),this},r}(Ka);ti.default=Wr;var TE=ye&&ye.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),ub=function(t){function r(){var r=t.call(this)||this;return r.layout=B.XY,r.stride=2,r.flatCoordinates=null,r}return TE(r,t),r.prototype.computeExtent=function(t){return rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinates=function(){return c()},r.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},r.prototype.getFlatCoordinates=function(){return this.flatCoordinates},r.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},r.prototype.getLayout=function(){return this.layout},r.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=this.getSimplifiedGeometryInternal(t);return r.getFlatCoordinates().length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},r.prototype.getSimplifiedGeometryInternal=function(t){return this},r.prototype.getStride=function(){return this.stride},r.prototype.setFlatCoordinates=function(t,r){this.stride=Fg(t),this.layout=t,this.flatCoordinates=r},r.prototype.setCoordinates=function(t,r){c()},r.prototype.setLayout=function(t,r,e){var o;if(t)o=Fg(t);else{for(var i=0;i<e;++i){if(0===r.length)return this.layout=B.XY,void(this.stride=2);r=r[0]}t=QE(o=r.length)}this.layout=t,this.stride=o},r.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},r.prototype.rotate=function(t,r){var e=this.getFlatCoordinates();if(e){var o=this.getStride();bt(e,0,e.length,o,t,r,e),this.changed()}},r.prototype.scale=function(t,r,e){var o=r;void 0===o&&(o=t);var i=e;i||(i=Ee(this.getExtent()));var n=this.getFlatCoordinates();if(n){var a=this.getStride();vH(n,0,n.length,a,t,o,i,n),this.changed()}},r.prototype.translate=function(t,r){var e=this.getFlatCoordinates();if(e){var o=this.getStride();at(e,0,e.length,o,t,r,e),this.changed()}},r}(Wr);function QE(t){var r;return 2==t?r=B.XY:3==t?r=B.XYZ:4==t&&(r=B.XYZM),r}function Fg(t){var r;return t==B.XY?r=2:t==B.XYZ||t==B.XYM?r=3:t==B.XYZM&&(r=4),r}function Ur(t,r,e){var o=t.getFlatCoordinates();if(o){var i=t.getStride();return Ec(o,0,o.length,i,r,e)}return null}ye.getStrideForLayout=Fg,ye.transformGeom2D=Ur,ye.default=ub;function Tr(r,n,$,e){for(var i=0,t=r[$-e],a=r[$-e+1];n<$;n+=e){var o=r[n],g=r[n+1];i+=a*o-t*g,t=o,a=g}return i/2}function Sr(r,n,$,e){for(var i=0,t=0,a=$.length;t<a;++t){var o=$[t];i+=Tr(r,n,o,e),n=o}return i}function ME(r,n,$,e){for(var i=0,t=0,a=$.length;t<a;++t){var o=$[t];i+=Sr(r,n,o,e),n=o[o.length-1]}return i}function Qr(r,a,t,e,$,s,o){var n,i=r[a],l=r[a+1],M=r[t]-i,u=r[t+1]-l;if(0===M&&0===u)n=a;else{var x=(($-i)*M+(s-l)*u)/(M*M+u*u);if(x>1)n=t;else{if(x>0){for(var p=0;p<e;++p)o[p]=Sd(r[a+p],r[t+p],x);return void(o.length=e)}n=a}}for(p=0;p<e;++p)o[p]=r[n+p];o.length=e}function Yi(r,a,t,e,$){var s=r[a],o=r[a+1];for(a+=e;a<t;a+=e){var n=r[a],i=r[a+1],l=$c(s,o,n,i);l>$&&($=l),s=n,o=i}return $}function $i(r,a,t,e,$){for(var s=0,o=t.length;s<o;++s){var n=t[s];$=Yi(r,a,n,e,$),a=n}return $}function yE(r,a,t,e,$){for(var s=0,o=t.length;s<o;++s){var n=t[s];$=$i(r,a,n,e,$),a=n[n.length-1]}return $}function aj(r,a,t,e,$,s,o,n,i,l,M){if(a==t)return l;var u,x;if(0===$){if((x=$c(o,n,r[a],r[a+1]))<l){for(u=0;u<e;++u)i[u]=r[a+u];return i.length=e,x}return l}for(var p=M||[NaN,NaN],f=a+e;f<t;)if(Qr(r,f-e,f,e,o,n,p),(x=$c(o,n,p[0],p[1]))<l){for(l=x,u=0;u<e;++u)i[u]=p[u];i.length=e,f+=e}else f+=e*Math.max((Math.sqrt(x)-Math.sqrt(l))/$|0,1);if(s&&(Qr(r,t-e,a,e,o,n,p),(x=$c(o,n,p[0],p[1]))<l)){for(l=x,u=0;u<e;++u)i[u]=p[u];i.length=e}return l}function bj(r,a,t,e,$,s,o,n,i,l,M){for(var u=M||[NaN,NaN],x=0,p=t.length;x<p;++x){var f=t[x];l=aj(r,a,f,e,$,s,o,n,i,l,u),a=f}return l}function xE(r,a,t,e,$,s,o,n,i,l,M){for(var u=M||[NaN,NaN],x=0,p=t.length;x<p;++x){var f=t[x];l=bj(r,a,f,e,$,s,o,n,i,l,u),a=f[f.length-1]}return l}function Pr(e,r,t,o){for(var a=0,$=t.length;a<$;++a)e[r++]=t[a];return r}function Xg(e,r,t,o){for(var a=0,$=t.length;a<$;++a)for(var n=t[a],d=0;d<o;++d)e[r++]=n[d];return r}function nj(e,r,t,o,a){for(var $=a||[],n=0,d=0,l=t.length;d<l;++d){var f=Xg(e,r,t[d],o);$[n++]=f,r=f}return $.length=n,$}function vE(e,r,t,o,a){for(var $=a||[],n=0,d=0,l=t.length;d<l;++d){var f=nj(e,r,t[d],o,$[n]);$[n++]=f,r=f[f.length-1]}return $.length=n,$}function wd(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=n;i<t;i+=e)a[l++]=r.slice(i,i+e);return a.length=l,a}function ih(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=0,$=t.length;i<$;++i){var f=t[i];a[l++]=wd(r,n,f,e,a[l]),n=f}return a.length=l,a}function Or(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=0,$=t.length;i<$;++i){var f=t[i];a[l++]=ih(r,n,f,e,a[l]),n=f[f.length-1]}return a.length=l,a}function Hj(r,t,$,e,p,a,o){var n=($-t)/e;if(n<3){for(;t<$;t+=e)a[o++]=r[t],a[o++]=r[t+1];return o}var u=new Array(n);u[0]=1,u[n-1]=1;for(var i=[t,$-e],s=0;i.length>0;){for(var E=i.pop(),I=i.pop(),x=0,l=r[I],c=r[I+1],f=r[E],g=r[E+1],d=I+e;d<E;d+=e){var v=r[d],y=r[d+1],h=GJ(v,y,l,c,f,g);h>x&&(s=d,x=h)}x>p&&(u[(s-t)/e]=1,I+e<s&&i.push(I,s),s+e<E&&i.push(s,E))}for(d=0;d<n;++d)u[d]&&(a[o++]=r[t+d*e],a[o++]=r[t+d*e+1]);return o}function tE(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u];o=Hj(r,t,s,e,p,a,o),n.push(o),t=s}return o}function Yc(r,t){return t*Math.round(r/t)}function sE(r,t,$,e,p,a,o){if(t==$)return o;var n,u,i=Yc(r[t],p),s=Yc(r[t+1],p);t+=e,a[o++]=i,a[o++]=s;do{if(n=Yc(r[t],p),u=Yc(r[t+1],p),(t+=e)==$)return a[o++]=n,a[o++]=u,o}while(n==i&&u==s);for(;t<$;){var E=Yc(r[t],p),I=Yc(r[t+1],p);if(t+=e,E!=n||I!=u){var x=n-i,l=u-s,c=E-i,f=I-s;x*f==l*c&&(x<0&&c<x||x==c||x>0&&c>x)&&(l<0&&f<l||l==f||l>0&&f>l)?(n=E,u=I):(a[o++]=n,a[o++]=u,i=n,s=u,n=E,u=I)}}return a[o++]=n,a[o++]=u,o}function Nr(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u];o=sE(r,t,s,e,p,a,o),n.push(o),t=s}return o}function qE(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u],E=[];o=Nr(r,t,s,e,p,a,o,E),n.push(E),t=s[s.length-1]}return o}var pE=mi&&mi.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),_j=function(t){function e(e,r){var o=t.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?o.setCoordinates(e,r):o.setFlatCoordinates(r,e),o}return pE(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,o){return o<Qd(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Yi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),aj(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,o))},e.prototype.getArea=function(){return Tr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return wd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Hj(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,B.XY)},e.prototype.getType=function(){return k.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Xg(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ub);mi.default=_j;var ck={};var oE=ck&&ck.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),ob=function(t){function e(e,r){var o=t.call(this)||this;return o.setCoordinates(e,r),o}return oE(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,o){var n=this.flatCoordinates,i=$c(t,e,n[0],n[1]);if(i<o){for(var s=this.stride,a=0;a<s;++a)r[a]=n[a];return r.length=s,i}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Mf(this.flatCoordinates,t)},e.prototype.getType=function(){return k.POINT},e.prototype.intersectsExtent=function(t){return Jh(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ub);ck.default=ob;function mE(n,r,t,i,e){return!ot(e,function(e){return!_c(n,r,t,i,e[0],e[1])})}function _c(n,r,t,i,e,$){for(var o=0,a=n[t-i],d=n[t-i+1];r<t;r+=i){var s=n[r],l=n[r+1];d<=$?l>$&&(s-a)*($-d)-(e-a)*(l-d)>0&&o++:l<=$&&(s-a)*($-d)-(e-a)*(l-d)<0&&o--,a=s,d=l}return 0!==o}function pk(n,r,t,i,e,$){if(0===t.length)return!1;if(!_c(n,r,t[0],i,e,$))return!1;for(var o=1,a=t.length;o<a;++o)if(_c(n,t[o-1],t[o],i,e,$))return!1;return!0}function lE(n,r,t,i,e,$){if(0===t.length)return!1;for(var o=0,a=t.length;o<a;++o){var d=t[o];if(pk(n,r,d,i,e,$))return!0;r=d[d.length-1]}return!1}function Mr(r,t,e,o,n,$,i){for(var a,v,s,N,p,f,u,g=n[$+1],D=[],U=0,l=e.length;U<l;++U){var x=e[U];for(N=r[x-o],f=r[x-o+1],a=t;a<x;a+=o)p=r[a],u=r[a+1],(g<=f&&u<=g||f<=g&&g<=u)&&(s=(g-f)/(u-f)*(p-N)+N,D.push(s)),N=p,f=u}var y=NaN,h=-1/0;for(D.sort(Zb),N=D[0],a=1,v=D.length;a<v;++a){p=D[a];var A=Math.abs(p-N);A>h&&(s=(N+p)/2,pk(r,t,e,o,s,g)&&(y=s,h=A)),N=p}return isNaN(y)&&(y=n[$]),i?(i.push(y,g,h),i):[y,g,h]}function fE(r,t,e,o,n){for(var $=[],i=0,a=e.length;i<a;++i){var v=e[i];$=Mr(r,t,v,o,n,2*i,$),t=v[v.length-1]}return $}function Ef(r,i,t,e,n){var $=pt(ja(),r,i,t,e);return!!fa(n,$)&&(!!tb(n,$)||$[0]>=n[0]&&$[2]<=n[2]||$[1]>=n[1]&&$[3]<=n[3]||Jr(r,i,t,e,function(r,i){return AI(n,r,i)}))}function _D(r,i,t,e,n){for(var $=0,s=t.length;$<s;++$){if(Ef(r,i,t[$],e,n))return!0;i=t[$]}return!1}function WD(r,i,t,e,n){return!!Ef(r,i,t,e,n)||!!_c(r,i,t,e,n[0],n[1])||!!_c(r,i,t,e,n[0],n[3])||!!_c(r,i,t,e,n[2],n[1])||!!_c(r,i,t,e,n[2],n[3])}function Lr(r,i,t,e,n){if(!WD(r,i,t[0],e,n))return!1;if(1===t.length)return!0;for(var $=1,s=t.length;$<s;++$)if(mE(r,t[$-1],t[$],e,n)&&!Ef(r,t[$-1],t[$],e,n))return!1;return!0}function RD(r,i,t,e,n){for(var $=0,s=t.length;$<s;++$){var o=t[$];if(Lr(r,i,o,e,n))return!0;i=o[o.length-1]}return!1}function Jr(r,$,o,t,e){for(var f,i=[r[$],r[$+1]],a=[];$+t<o;$+=t){if(a[0]=r[$+t],a[1]=r[$+t+1],f=e(i,a))return f;i[0]=a[0],i[1]=a[1]}return!1}function Hr(r,e,n,i){for(var $=0,t=r[n-i],o=r[n-i+1];e<n;e+=i){var s=r[e],a=r[e+1];$+=(s-t)*(a+o),t=s,o=a}return $>0}function Gr(r,e,n,i,$){for(var t=void 0!==$&&$,o=0,s=n.length;o<s;++o){var a=n[o],c=Hr(r,e,a,i);if(0===o){if(t&&c||!t&&!c)return!1}else if(t&&!c||!t&&c)return!1;e=a}return!0}function ID(r,e,n,i,$){for(var t=0,o=n.length;t<o;++t){var s=n[t];if(!Gr(r,e,s,i,$))return!1;s.length&&(e=s[s.length-1])}return!0}function Rk(r,e,n,i,$){for(var t=void 0!==$&&$,o=0,s=n.length;o<s;++o){var a=n[o],c=Hr(r,e,a,i);(0===o?t&&c||!t&&!c:t&&!c||!t&&c)&&FD(r,e,a,i),e=a}return e}function Er(r,e,n,i,$){for(var t=0,o=n.length;t<o;++t)e=Rk(r,e,n[t],i,$);return e}function FD(o,r,e,$){for(;r<e-$;){for(var t=0;t<$;++t){var a=o[r+t];o[r+t]=o[e-$+t],o[e-$+t]=a}r+=$,e-=$}}var ED=zc&&zc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),mb=function(t){function e(e,r,i){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&i?(o.setFlatCoordinates(r,e),o.ends_=i):o.setCoordinates(e,r),o}return ED(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Ca(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,i){return i<Qd(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($i(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bj(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,i))},e.prototype.containsXY=function(t,e){return pk(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Sr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Rk(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,ih(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Ee(this.getExtent());this.flatInteriorPoint_=Mr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new ob(this.getFlatInteriorPoint(),B.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new _j(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,i=[],o=0,n=0,s=r.length;n<s;++n){var a=r[n],$=new _j(e.slice(o,a),t);i.push($),o=a}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Gr(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Rk(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=Nr(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,i),new e(r,B.XY,i)},e.prototype.getType=function(){return k.POLYGON},e.prototype.intersectsExtent=function(t){return Lr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=nj(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(ub);function DD(t,e,r,i){for(var o=r||32,n=[],s=0;s<o;++s)Ca(n,hH(t,e,2*Math.PI*s/o,i));return n.push(n[0],n[1]),new mb(n,B.XY,[n.length])}function lc(t){var e=t[0],r=t[1],i=t[2],o=t[3],n=[e,r,e,o,i,o,i,r,e,r];return new mb(n,B.XY,[n.length])}function bl(t,e,r){for(var i=e||32,o=t.getStride(),n=t.getLayout(),s=t.getCenter(),a=o*(i+1),$=new Array(a),w=0;w<a;w+=o){$[w]=0,$[w+1]=0;for(var l=2;l<o;l++)$[w+l]=s[l]}var p=[$.length],h=new mb($,n,p);return il(h,s,t.getRadius(),r),h}function il(t,e,r,i){for(var o=t.getFlatCoordinates(),n=t.getStride(),s=o.length/n-1,a=i||0,$=0;$<=s;++$){var w=$*n,l=a+2*ed($,s)*Math.PI/s;o[w]=e[0]+r*Math.cos(l),o[w+1]=e[1]+r*Math.sin(l)}t.changed()}zc.default=mb,zc.circular=DD,zc.fromExtent=lc,zc.fromCircle=bl,zc.makeRegular=il;var eD=xc&&xc.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xl=0,zl=function(t){function o(o){var e=t.call(this)||this,i=la({},o);return e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=_i(i.projection,"EPSG:3857"),e.targetCenter_=null,e.targetResolution_,e.targetRotation_,i.center&&(i.center=J(i.center,e.projection_)),i.extent&&(i.extent=Pb(i.extent,e.projection_)),e.applyOptions_(i),e}return eD(o,t),o.prototype.applyOptions_=function(t){var o=pr(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=o.minZoom;var e=vr(t),i=o.constraint,n=or(t);this.constraints_={center:e,resolution:i,rotation:n},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.resolveConstraints(0),this.setProperties({}),this.options_=t},o.prototype.getUpdatedOptions_=function(t){var o=la({},this.options_);return void 0!==o.resolution?o.resolution=this.getResolution():o.zoom=this.getZoom(),o.center=this.getCenterInternal(),o.rotation=this.getRotation(),la({},o,t)},o.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var o=new Array(arguments.length),e=0;e<o.length;++e){var i=arguments[e];i.center&&((i=la({},i)).center=J(i.center,this.getProjection())),i.anchor&&((i=la({},i)).anchor=J(i.anchor,this.getProjection())),o[e]=i}this.animateInternal.apply(this,o)},o.prototype.animateInternal=function(t){var o,e=arguments.length;if(e>1&&"function"==typeof arguments[e-1]&&(o=arguments[e-1],--e),!this.isDef()){var i=arguments[e-1];return i.center&&this.setCenterInternal(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(o&&og(o,!0))}for(var n=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_,h=[],$=0;$<e;++$){var p=arguments[$],u={start:n,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||KH,callback:o};if(p.center&&(u.sourceCenter=r,u.targetCenter=p.center.slice(),r=u.targetCenter),void 0!==p.zoom?(u.sourceResolution=s,u.targetResolution=this.getResolutionForZoom(p.zoom),s=u.targetResolution):p.resolution&&(u.sourceResolution=s,u.targetResolution=p.resolution,s=u.targetResolution),void 0!==p.rotation){u.sourceRotation=a;var l=ed(p.rotation-a+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=a+l,a=u.targetRotation}nr(u)?u.complete=!0:n+=u.duration,h.push(u)}this.animations_.push(h),this.setHint(O.ANIMATING,1),this.updateAnimations_()},o.prototype.getAnimating=function(){return this.hints_[O.ANIMATING]>0},o.prototype.getInteracting=function(){return this.hints_[O.INTERACTING]>0},o.prototype.cancelAnimations=function(){this.setHint(O.ANIMATING,-this.hints_[O.ANIMATING]);for(var t=0,o=this.animations_.length;t<o;++t){var e=this.animations_[t];e[0].callback&&og(e[0].callback,!1)}this.animations_.length=0},o.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),o=!1,e=this.animations_.length-1;e>=0;--e){for(var i=this.animations_[e],n=!0,r=0,s=i.length;r<s;++r){var a=i[r];if(!a.complete){var h=t-a.start,$=a.duration>0?h/a.duration:1;$>=1?(a.complete=!0,$=1):n=!1;var p=a.easing($);if(a.sourceCenter){var u=a.sourceCenter[0],l=a.sourceCenter[1],c=u+p*(a.targetCenter[0]-u),m=l+p*(a.targetCenter[1]-l);this.targetCenter_=[c,m]}if(a.sourceResolution&&a.targetResolution){var g=1===p?a.targetResolution:a.sourceResolution+p*(a.targetResolution-a.sourceResolution);if(a.anchor){var E=this.getSizeFromViewport_(this.getRotation()),N=this.constraints_.resolution(g,0,E,!0);this.targetCenter_=this.calculateCenterZoom(N,a.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var q=1===p?ed(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+p*(a.targetRotation-a.sourceRotation);if(a.anchor){var _=this.constraints_.rotation(q,!0);this.targetCenter_=this.calculateCenterRotate(_,a.anchor)}this.targetRotation_=q}if(this.applyTargetState_(!0),o=!0,!a.complete)break}}if(n){this.animations_[e]=null,this.setHint(O.ANIMATING,-1);var R=i[0].callback;R&&og(R,!0)}}this.animations_=this.animations_.filter(Boolean),o&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},o.prototype.calculateCenterRotate=function(t,o){var e,i=this.getCenterInternal();return void 0!==i&&(e=[i[0]-o[0],i[1]-o[1]],Ul(e,t-this.getRotation()),lI(e,o)),e},o.prototype.calculateCenterZoom=function(t,o){var e,i=this.getCenterInternal(),n=this.getResolution();void 0!==i&&void 0!==n&&(e=[o[0]-t*(o[0]-i[0])/n,o[1]-t*(o[1]-i[1])/n]);return e},o.prototype.getSizeFromViewport_=function(t){var o=[100,100],e=".ol-viewport[data-view=\""+ba(this)+"\"]",i=document.querySelector(e);if(i){var n=getComputedStyle(i);o[0]=parseInt(n.width,10),o[1]=parseInt(n.height,10)}if(t){var r=o[0],s=o[1];o[0]=Math.abs(r*Math.cos(t))+Math.abs(s*Math.sin(t)),o[1]=Math.abs(r*Math.sin(t))+Math.abs(s*Math.cos(t))}return o},o.prototype.getCenter=function(){var t=this.getCenterInternal();return t?ke(t,this.getProjection()):t},o.prototype.getCenterInternal=function(){return this.get(Ga.CENTER)},o.prototype.getConstraints=function(){return this.constraints_},o.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},o.prototype.calculateExtent=function(t){var o=this.calculateExtentInternal(t);return ae(o,this.getProjection())},o.prototype.calculateExtentInternal=function(t){var o=t||this.getSizeFromViewport_(),e=this.getCenterInternal();m(e,1);var i=this.getResolution();m(void 0!==i,2);var n=this.getRotation();return m(void 0!==n,3),nt(e,i,n,o)},o.prototype.getMaxResolution=function(){return this.maxResolution_},o.prototype.getMinResolution=function(){return this.minResolution_},o.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},o.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},o.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},o.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},o.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},o.prototype.getProjection=function(){return this.projection_},o.prototype.getResolution=function(){return this.get(Ga.RESOLUTION)},o.prototype.getResolutions=function(){return this.resolutions_},o.prototype.getResolutionForExtent=function(t,o){return this.getResolutionForExtentInternal(Pb(t,this.getProjection()),o)},o.prototype.getResolutionForExtentInternal=function(t,o){var e=o||this.getSizeFromViewport_(),i=L(t)/e[0],n=db(t)/e[1];return Math.max(i,n)},o.prototype.getResolutionForValueFunction=function(t){var o=t||2,e=this.maxResolution_,i=this.minResolution_,n=Math.log(e/i)/Math.log(o);return function(t){return e/Math.pow(o,t*n)}},o.prototype.getRotation=function(){return this.get(Ga.ROTATION)},o.prototype.getValueForResolutionFunction=function(t){var o=t||2,e=this.maxResolution_,i=this.minResolution_,n=Math.log(e/i)/Math.log(o);return function(t){return Math.log(e/t)/Math.log(o)/n}},o.prototype.getState=function(){var t=this.getCenterInternal(),o=this.getProjection(),e=this.getResolution(),i=this.getRotation();return{center:t.slice(0),projection:void 0!==o?o:null,resolution:e,rotation:i,zoom:this.getZoom()}},o.prototype.getZoom=function(){var t,o=this.getResolution();return void 0!==o&&(t=this.getZoomForResolution(o)),t},o.prototype.getZoomForResolution=function(t){var o,e,i=this.minZoom_||0;if(this.resolutions_){var n=cm(this.resolutions_,t,1);i=n,o=this.resolutions_[n],e=n==this.resolutions_.length-1?2:o/this.resolutions_[n+1]}else o=this.maxResolution_,e=this.zoomFactor_;return i+Math.log(o/t)/Math.log(e)},o.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var o=I(Math.floor(t),0,this.resolutions_.length-2),e=this.resolutions_[o]/this.resolutions_[o+1];return this.resolutions_[o]/Math.pow(e,I(t-o,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},o.prototype.fit=function(t,o){var e,i=la({size:this.getSizeFromViewport_()},o||{});if(m(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){m(!hk(t),25);var n=Pb(t,this.getProjection());e=lc(n)}else if(t.getType()===k.CIRCLE){n=Pb(t.getExtent(),this.getProjection());(e=lc(n)).rotate(this.getRotation(),Ee(n))}else{var r=Eh();e=r?e.clone().transform(r,this.getProjection()):t}this.fitInternal(e,i)},o.prototype.fitInternal=function(t,o){var e=o||{},i=e.size;i||(i=this.getSizeFromViewport_());var n,r=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;n=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;for(var a=t.getFlatCoordinates(),h=this.getRotation(),$=Math.cos(-h),p=Math.sin(-h),u=1/0,l=1/0,c=-1/0,m=-1/0,g=t.getStride(),E=0,N=a.length;E<N;E+=g){var q=a[E]*$-a[E+1]*p,_=a[E]*p+a[E+1]*$;u=Math.min(u,q),l=Math.min(l,_),c=Math.max(c,q),m=Math.max(m,_)}var R=this.getResolutionForExtentInternal([u,l,c,m],[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);R=isNaN(R)?n:Math.max(R,n),R=this.getConstrainedResolution(R,s?0:1),p=-p;var d=(u+c)/2,f=(l+m)/2,v=[(d+=(r[1]-r[3])/2*R)*$-(f+=(r[0]-r[2])/2*R)*p,f*$+d*p],y=e.callback?e.callback:xb;void 0!==e.duration?this.animateInternal({resolution:R,center:this.getConstrainedCenter(v,R),duration:e.duration,easing:e.easing},y):(this.targetResolution_=R,this.targetCenter_=v,this.applyTargetState_(!1,!0),og(y,!0))},o.prototype.centerOn=function(t,o,e){this.centerOnInternal(J(t,this.getProjection()),o,e)},o.prototype.centerOnInternal=function(t,o,e){var i=this.getRotation(),n=Math.cos(-i),r=Math.sin(-i),s=t[0]*n-t[1]*r,a=t[1]*n+t[0]*r,h=this.getResolution(),$=(s+=(o[0]/2-e[0])*h)*n-(a+=(e[1]-o[1]/2)*h)*(r=-r),p=a*n+s*r;this.setCenterInternal([$,p])},o.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},o.prototype.adjustCenter=function(t){var o=ke(this.targetCenter_,this.getProjection());this.setCenter([o[0]+t[0],o[1]+t[1]])},o.prototype.adjustCenterInternal=function(t){var o=this.targetCenter_;this.setCenterInternal([o[0]+t[0],o[1]+t[1]])},o.prototype.adjustResolution=function(t,o){var e=o&&J(o,this.getProjection());this.adjustResolutionInternal(t,e)},o.prototype.adjustResolutionInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),i=this.getSizeFromViewport_(this.getRotation()),n=this.constraints_.resolution(this.targetResolution_*t,0,i,e);void 0!==o&&(this.targetCenter_=this.calculateCenterZoom(n,o)),this.targetResolution_*=t,this.applyTargetState_()},o.prototype.adjustZoom=function(t,o){this.adjustResolution(Math.pow(this.zoomFactor_,-t),o)},o.prototype.adjustRotation=function(t,o){o&&(o=J(o,this.getProjection())),this.adjustRotationInternal(t,o)},o.prototype.adjustRotationInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,e);void 0!==o&&(this.targetCenter_=this.calculateCenterRotate(i,o)),this.targetRotation_+=t,this.applyTargetState_()},o.prototype.setCenter=function(t){this.setCenterInternal(J(t,this.getProjection()))},o.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},o.prototype.setHint=function(t,o){return this.hints_[t]+=o,this.changed(),this.hints_[t]},o.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},o.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},o.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},o.prototype.applyTargetState_=function(t,o){var e=this.getAnimating()||this.getInteracting()||o,i=this.constraints_.rotation(this.targetRotation_,e),n=this.getSizeFromViewport_(i),r=this.constraints_.resolution(this.targetResolution_,0,n,e),s=this.constraints_.center(this.targetCenter_,r,n,e);this.get(Ga.ROTATION)!==i&&this.set(Ga.ROTATION,i),this.get(Ga.RESOLUTION)!==r&&this.set(Ga.RESOLUTION,r),this.get(Ga.CENTER)&&$a(this.get(Ga.CENTER),s)||this.set(Ga.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations()},o.prototype.resolveConstraints=function(t,o,e){var i=void 0!==t?t:200,n=o||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getSizeFromViewport_(r),a=this.constraints_.resolution(this.targetResolution_,n,s),h=this.constraints_.center(this.targetCenter_,a,s);if(0===i)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=h,void this.applyTargetState_();this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&$a(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:h,resolution:a,duration:i,easing:vc,anchor:e}))},o.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(O.INTERACTING,1)},o.prototype.endInteraction=function(t,o,e){var i=e&&J(e,this.getProjection());this.endInteractionInternal(t,o,i)},o.prototype.endInteractionInternal=function(t,o,e){this.setHint(O.INTERACTING,-1),this.resolveConstraints(t,o,e)},o.prototype.getConstrainedCenter=function(t,o){var e=this.getSizeFromViewport_(this.getRotation());return this.constraints_.center(t,o||this.getResolution(),e)},o.prototype.getConstrainedZoom=function(t,o){var e=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(e,o))},o.prototype.getConstrainedResolution=function(t,o){var e=o||0,i=this.getSizeFromViewport_(this.getRotation());return this.constraints_.resolution(t,e,i)},o}(Ka);function og(t,o){setTimeout(function(){t(o)},0)}function vr(t){if(void 0!==t.extent){var o=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return zt(t.extent,t.constrainOnlyCenter,o)}var e=_i(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){var i=e.getExtent().slice();return i[0]=-1/0,i[2]=1/0,zt(i,!1,!1)}return IJ}function pr(t){var o,e,i,n=void 0!==t.minZoom?t.minZoom:xl,r=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,a=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,$=_i(t.projection,"EPSG:3857"),p=$.getExtent(),u=t.constrainOnlyCenter,l=t.extent;if(a||l||!$.isGlobal()||(u=!1,l=p),void 0!==t.resolutions){var c=t.resolutions;e=c[n],i=void 0!==c[r]?c[r]:c[c.length-1],o=t.constrainResolution?_I(c,h,!u&&l):wt(e,i,h,!u&&l)}else{var m=(p?Math.max(L(p),db(p)):360*Ta[Y.DEGREES]/$.getMetersPerUnit())/Ui/Math.pow(2,xl),g=m/Math.pow(2,28-xl);void 0!==(e=t.maxResolution)?n=0:e=m/Math.pow(s,n),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?e/Math.pow(s,r):m/Math.pow(s,r):g),r=n+Math.floor(Math.log(e/i)/Math.log(s)),i=e/Math.pow(s,r-n),o=t.constrainResolution?$I(s,e,i,h,!u&&l):wt(e,i,h,!u&&l)}return{constraint:o,maxResolution:e,minResolution:i,minZoom:n,zoomFactor:s}}function or(t){if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?pI():!1===o?jt:"number"==typeof o?tI(o):jt}return Hk}function nr(t){return!(t.sourceCenter&&t.targetCenter&&!$a(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}xc.createCenterConstraint=vr,xc.createResolutionConstraint=pr,xc.createRotationConstraint=or,xc.isNoopAnimation=nr,xc.default=zl;function pa(e,o){var t=document.createElement("canvas");return e&&(t.width=e),o&&(t.height=o),t.getContext("2d")}function QC(e){var o=e.offsetWidth,t=getComputedStyle(e);return o+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10)}function PC(e){var o=e.offsetHeight,t=getComputedStyle(e);return o+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}function td(e,o){var t=o.parentNode;t&&t.replaceChild(e,o)}function zg(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function lr(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function GC(e,o){for(var t=e.childNodes,r=0;;++r){var n=t[r],$=o[r];if(!n&&!$)break;n!==$&&(n?$?e.insertBefore($,n):(e.removeChild(n),--r):e.appendChild($))}}var Bh={};var Dh={};var s={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};var CC=Dh&&Dh.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Ih=function(t){function e(e){var r=t.call(this)||this,o=la({},e);return o[s.OPACITY]=void 0!==e.opacity?e.opacity:1,m("number"==typeof o[s.OPACITY],64),o[s.VISIBLE]=void 0===e.visible||e.visible,o[s.Z_INDEX]=e.zIndex,o[s.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,o[s.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,o[s.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,o[s.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==o.className?e.className:"ol-layer",delete o.className,r.setProperties(o),r.state_=null,r}return CC(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=I(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r?r:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return c()},e.prototype.getLayerStatesArray=function(t){return c()},e.prototype.getExtent=function(){return this.get(s.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(s.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(s.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(s.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(s.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(s.OPACITY)},e.prototype.getSourceState=function(){return c()},e.prototype.getVisible=function(){return this.get(s.VISIBLE)},e.prototype.getZIndex=function(){return this.get(s.Z_INDEX)},e.prototype.setExtent=function(t){this.set(s.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(s.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(s.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(s.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(s.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){m("number"==typeof t,64),this.set(s.OPACITY,t)},e.prototype.setVisible=function(t){this.set(s.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(s.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Ka);Dh.default=Ih;var ic={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};var BC=Bh&&Bh.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nh={LAYERS:"layers"},kr=function(e){function t(t){var n=this,r=t||{},i=la({},r);delete i.layers;var o=r.layers;return(n=e.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addEventListener(D(Nh.LAYERS),n.handleLayersChanged_),o?Array.isArray(o)?o=new T(o.slice(),{unique:!0}):m("function"==typeof o.getArray,43):o=new T(void 0,{unique:!0}),n.setLayers(o),n}return BC(t,e),t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(p),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push(d(e,H.ADD,this.handleLayersAdd_,this),d(e,H.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(p);Zd(this.listenerKeys_);for(var n=e.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.listenerKeys_[ba(o)]=[d(o,Lc.PROPERTYCHANGE,this.handleLayerChange_,this),d(o,f.CHANGE,this.handleLayerChange_,this)]}this.changed()},t.prototype.handleLayersAdd_=function(e){var t=e.element;this.listenerKeys_[ba(t)]=[d(t,Lc.PROPERTYCHANGE,this.handleLayerChange_,this),d(t,f.CHANGE,this.handleLayerChange_,this)],this.changed()},t.prototype.handleLayersRemove_=function(e){var t=e.element,n=ba(t);this.listenerKeys_[n].forEach(p),delete this.listenerKeys_[n],this.changed()},t.prototype.getLayers=function(){return this.get(Nh.LAYERS)},t.prototype.setLayers=function(e){this.set(Nh.LAYERS,e)},t.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},t.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],n=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});for(var r=this.getLayerState(),i=n,o=t.length;i<o;i++){var s=t[i];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),s.minZoom=Math.max(s.minZoom,r.minZoom),s.maxZoom=Math.min(s.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==s.extent?s.extent=De(s.extent,r.extent):s.extent=r.extent)}return t},t.prototype.getSourceState=function(){return ic.READY},t}(Ih);Bh.default=kr;function zC($){return $[0]>0&&$[1]>0}function yC($,r,e){return void 0===e&&(e=[0,0]),e[0]=$[0]*r+.5|0,e[1]=$[1]*r+.5|0,e}function Tb($,r){return Array.isArray($)?$:(void 0===r?r=[$,$]:(r[0]=$,r[1]=$),r)}var uC=Ll&&Ll.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();function Xh(e,t){e.style.msTouchAction=t,e.style.touchAction=t,e.setAttribute("touch-action",t)}var Zh=function(e){function t(t){var r=e.call(this)||this,i=tC(t);r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,r.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:Xf,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=Ia(),r.pixelToCoordinateTransform_=Ia(),r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=new Ct(r,t.moveTolerance);var n=r.handleMapBrowserEvent.bind(r);for(var o in j)r.mapBrowserEventHandler_.addEventListener(j[o],n);r.keyboardEventTarget_=i.keyboardEventTarget,r.keyHandlerKeys_=null,r.focusHandlerKeys_=null;var a=r.handleBrowserEvent.bind(r);return r.viewport_.addEventListener(f.CONTEXTMENU,a,!1),r.viewport_.addEventListener(f.WHEEL,a,!1),r.controls=i.controls||new T,r.interactions=i.interactions||new T,r.overlays_=i.overlays,r.overlayIdIndex_={},r.renderer_=null,r.handleResize_,r.postRenderFunctions_=[],r.tileQueue_=new At(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addEventListener(D(X.LAYERGROUP),r.handleLayerGroupChanged_),r.addEventListener(D(X.VIEW),r.handleViewChanged_),r.addEventListener(D(X.SIZE),r.handleSizeChanged_),r.addEventListener(D(X.TARGET),r.handleTargetChanged_),r.setProperties(i.values),r.controls.forEach(function(e){e.setMap(this)}.bind(r)),r.controls.addEventListener(H.ADD,function(e){e.element.setMap(this)}.bind(r)),r.controls.addEventListener(H.REMOVE,function(e){e.element.setMap(null)}.bind(r)),r.interactions.forEach(function(e){e.setMap(this)}.bind(r)),r.interactions.addEventListener(H.ADD,function(e){e.element.setMap(this)}.bind(r)),r.interactions.addEventListener(H.REMOVE,function(e){e.element.setMap(null)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r.overlays_.addEventListener(H.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(r)),r.overlays_.addEventListener(H.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(r)),r}return uC(t,e),t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(e){this.getControls().push(e)},t.prototype.addInteraction=function(e){this.getInteractions().push(e)},t.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},t.prototype.addOverlay=function(e){this.getOverlays().push(e)},t.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},t.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(f.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(f.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(f.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(e,t,r){if(this.frameState_){var i=this.getCoordinateFromPixelInternal(e),n=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:sa,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,n,a,t,null,o,null)}},t.prototype.getFeaturesAtPixel=function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r},t.prototype.forEachLayerAtPixel=function(e,t,r){if(this.frameState_){var i=r||{},n=void 0!==i.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=i.layerFilter||sa;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,n,t,o)}},t.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(e),i=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:sa,n=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,n,o,i,null)},t.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},t.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},t.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]},t.prototype.getTarget=function(){return this.get(X.TARGET)},t.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},t.prototype.getCoordinateFromPixel=function(e){return ke(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(e){var t=this.frameState_;return t?da(t.pixelToCoordinateTransform,e.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(X.LAYERGROUP)},t.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},t.prototype.getLoading=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var i=e[t].layer.getSource();if(i&&i.loading)return!0}return!1},t.prototype.getPixelFromCoordinate=function(e){var t=J(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)},t.prototype.getPixelFromCoordinateInternal=function(e){var t=this.frameState_;return t?da(t.coordinateToPixelTransform,e.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(X.SIZE)},t.prototype.getView=function(){return this.get(X.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getTilePriority=function(e,t,r,i){var n=this.frameState_;if(!(n&&t in n.wantedTiles))return If;if(!n.wantedTiles[t][e.getKey()])return If;var o=n.viewState.center,a=r[0]-o[0],s=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i},t.prototype.handleBrowserEvent=function(e,t){var r=t||e.type,i=new fj(r,this,e);this.handleMapBrowserEvent(i)},t.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){for(var t=e.originalEvent.target;t instanceof HTMLElement;){if(t.parentElement===this.overlayContainerStopEvent_)return;t=t.parentElement}e.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(var i=r.length-1;i>=0;i--){var n=r[i];if(n.getActive())if(!n.handleEvent(e))break}}},t.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,i=r;if(e){var n=e.viewHints;if(n[O.ANIMATING]||n[O.INTERACTING]){var o=!Gt&&Date.now()-e.time>8;r=o?0:8,i=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,i))}!e||!this.hasListener(kc.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(kc.RENDERCOMPLETE,e);for(var a=this.postRenderFunctions_,s=0,p=a.length;s<p;++s)a[s](this,e);a.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.focusHandlerKeys_){for(var t=0,r=this.focusHandlerKeys_.length;t<r;++t)p(this.focusHandlerKeys_[t]);this.focusHandlerKeys_=null}if(this.keyHandlerKeys_){for(t=0,r=this.keyHandlerKeys_.length;t<r;++t)p(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var i=!0;e.hasAttribute("tabindex")&&(i=document.activeElement===e,this.focusHandlerKeys_=[d(e,f.FOCUS,Xh.bind(this,this.viewport_,"none")),d(e,f.BLUR,Xh.bind(this,this.viewport_,"auto"))]),Xh(this.viewport_,i?"none":"auto");var n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[d(n,f.KEYDOWN,this.handleBrowserEvent,this),d(n,f.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(f.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),zg(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(f.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(p(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(p(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.viewport_.setAttribute("data-view",ba(e)),this.viewPropertyListenerKey_=d(e,Lc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=d(e,f.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(p),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[d(e,Lc.PROPERTYCHANGE,this.render,this),d(e,f.CHANGE,this.render,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(e){return this.getControls().remove(e)},t.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},t.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},t.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},t.prototype.renderFrame_=function(e){var t=this.getSize(),r=this.getView(),i=this.frameState_,n=null;if(void 0!==t&&zC(t)&&r&&r.isDef()){var o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();n={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:i?i.declutterItems:[],extent:nt(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}if(this.frameState_=n,this.renderer_.renderFrame(n),n){if(n.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,n.postRenderFunctions),i)(!this.previousExtent_||!hk(this.previousExtent_)&&!Md(n.extent,this.previousExtent_))&&(this.dispatchEvent(new Ve(Td.MOVESTART,this,i)),this.previousExtent_=Je(this.previousExtent_));this.previousExtent_&&!n.viewHints[O.ANIMATING]&&!n.viewHints[O.INTERACTING]&&!Md(n.extent,this.previousExtent_)&&(this.dispatchEvent(new Ve(Td.MOVEEND,this,n)),ut(n.extent,this.previousExtent_))}this.dispatchEvent(new Ve(Td.POSTRENDER,this,n)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},t.prototype.setLayerGroup=function(e){this.set(X.LAYERGROUP,e)},t.prototype.setSize=function(e){this.set(X.SIZE,e)},t.prototype.setTarget=function(e){this.set(X.TARGET,e)},t.prototype.setView=function(e){this.set(X.VIEW,e)},t.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0)},t}(Ka);function tC(e){var t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r,i,n,o={},a=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new kr({layers:e.layers});return o[X.LAYERGROUP]=a,o[X.TARGET]=e.target,o[X.VIEW]=void 0!==e.view?e.view:new zl,void 0!==e.controls&&(Array.isArray(e.controls)?r=new T(e.controls.slice()):(m("function"==typeof e.controls.getArray,47),r=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?i=new T(e.interactions.slice()):(m("function"==typeof e.interactions.getArray,48),i=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?n=new T(e.overlays.slice()):(m("function"==typeof e.overlays.getArray,49),n=e.overlays):n=new T,{controls:r,interactions:i,keyboardEventTarget:t,overlays:n,values:o}}Ll.default=Zh;function pC(o){var r=o||{},t=new T;return(void 0===r.zoom||r.zoom)&&t.push(new Vq(r.zoomOptions)),(void 0===r.rotate||r.rotate)&&t.push(new _q(r.rotateOptions)),(void 0===r.attribution||r.attribution)&&t.push(new er(r.attributionOptions)),t}var Rg={};var ei={};var nC=ei&&ei.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Za=function(e){function t(t){var r=e.call(this)||this;return r.element=t.element?t.element:null,r.target_=null,r.map_=null,r.listenerKeys=[],r.render=t.render?t.render:xb,t.target&&r.setTarget(t.target),r}return nC(t,e),t.prototype.disposeInternal=function(){zg(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&zg(this.element);for(var t=0,r=this.listenerKeys.length;t<r;++t)p(this.listenerKeys[t]);(this.listenerKeys.length=0,this.map_=e,this.map_)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==xb&&this.listenerKeys.push(d(e,Td.POSTRENDER,this.render,this)),e.render())},t.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},t}(Ka);ei.default=Za;var Vg="ol-hidden";var mC="ol-selectable";var Ya="ol-unselectable";var kC="ol-unsupported";var Cc="ol-control";var Zg="ol-collapsed";var jC=function(){var $,e={};return function(t){if($||($=document.createElement("div").style),!(t in e)){$.font=t;var S=$.fontFamily,r=$.fontWeight,o=$.fontStyle;if($.font="",!S)return null;var L=S.split(/,\s?/);e[t]={families:L,weight:r,style:o}}return e[t]}}();var ah={};var iC=ah&&ah.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xi=function(e){function r(r){var t=this,n=la({},r);delete n.source,(t=e.call(this,n)||this).mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,r.render&&(t.render=r.render),r.map&&t.setMap(r.map),t.addEventListener(D(s.SOURCE),t.handleSourcePropertyChange_);var o=r.source?r.source:null;return t.setSource(o),t}return iC(r,e),r.prototype.getLayersArray=function(e){var r=e||[];return r.push(this),r},r.prototype.getLayerStatesArray=function(e){var r=e||[];return r.push(this.getLayerState()),r},r.prototype.getSource=function(){return this.get(s.SOURCE)||null},r.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():ic.UNDEFINED},r.prototype.handleSourceChange_=function(){this.changed()},r.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(p(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=d(e,f.CHANGE,this.handleSourceChange_,this)),this.changed()},r.prototype.getFeatures=function(e){return this.renderer_.getFeatures(e)},r.prototype.render=function(e,r){var t=this.getRenderer();if(t.prepareFrame(e))return t.renderFrame(e,r)},r.prototype.setMap=function(e){this.mapPrecomposeKey_&&(p(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(p(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=d(e,kc.PRECOMPOSE,function(e){e.frameState.layerStatesArray.push(this.getLayerState(!1))},this),this.mapRenderKey_=d(this,f.CHANGE,e.render,e),this.changed())},r.prototype.setSource=function(e){this.set(s.SOURCE,e)},r.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},r.prototype.hasRenderer=function(){return!!this.renderer_},r.prototype.createRenderer=function(){return null},r.prototype.disposeInternal=function(){this.setSource(null),e.prototype.disposeInternal.call(this)},r}(Ih);function Ie(e,r){if(!e.visible)return!1;var t=r.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;var n=r.zoom;return n>e.minZoom&&n<=e.maxZoom}ah.inView=Ie,ah.default=xi;var hC=Rg&&Rg.__extends||function(){var e=function(t,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l])})(t,l)};return function(t,l){function r(){this.constructor=t}e(t,l),t.prototype=null===l?Object.create(l):(r.prototype=l.prototype,new r)}}(),er=function(e){function t(t){var l=this,r=t||{};(l=e.call(this,{element:document.createElement("div"),render:r.render||ar,target:r.target})||this).ulElement_=document.createElement("ul"),l.collapsed_=void 0===r.collapsed||r.collapsed,l.overrideCollapsible_=void 0!==r.collapsible,l.collapsible_=void 0===r.collapsible||r.collapsible,l.collapsible_||(l.collapsed_=!1);var o=void 0!==r.className?r.className:"ol-attribution",i=void 0!==r.tipLabel?r.tipLabel:"Attributions",a=void 0!==r.collapseLabel?r.collapseLabel:"\xBB";"string"==typeof a?(l.collapseLabel_=document.createElement("span"),l.collapseLabel_.textContent=a):l.collapseLabel_=a;var s=void 0!==r.label?r.label:"i";"string"==typeof s?(l.label_=document.createElement("span"),l.label_.textContent=s):l.label_=s;var n=l.collapsible_&&!l.collapsed_?l.collapseLabel_:l.label_,p=document.createElement("button");p.setAttribute("type","button"),p.title=i,p.appendChild(n),p.addEventListener(f.CLICK,l.handleClick_.bind(l),!1);var c=o+" "+Ya+" "+Cc+(l.collapsed_&&l.collapsible_?" "+Zg:"")+(l.collapsible_?"":" ol-uncollapsible"),d=l.element;return d.className=c,d.appendChild(l.ulElement_),d.appendChild(p),l.renderedAttributions_=[],l.renderedVisible_=!0,l}return hC(t,e),t.prototype.collectSourceAttributions_=function(e){for(var t={},l=[],r=e.layerStatesArray,o=0,i=r.length;o<i;++o){var a=r[o];if(Ie(a,e.viewState)){var s=a.layer.getSource();if(s){var n=s.getAttributions();if(n){var p=n(e);if(p)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(p))for(var c=0,d=p.length;c<d;++c)p[c]in t||(l.push(p[c]),t[p[c]]=!0);else p in t||(l.push(p),t[p]=!0)}}}}return l},t.prototype.updateElement_=function(e){if(e){var t=this.collectSourceAttributions_(e),l=t.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!Xd(t,this.renderedAttributions_)){lr(this.ulElement_);for(var r=0,o=t.length;r<o;++r){var i=document.createElement("li");i.innerHTML=t[r],this.ulElement_.appendChild(i)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(Zg),this.collapsed_?td(this.collapseLabel_,this.label_):td(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t}(Za);function ar(e){this.updateElement_(e.frameState)}Rg.render=ar,Rg.default=er;var vh={};var WB=vh&&vh.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),_q=function(t){function e(e){var r=this,o=e||{};r=t.call(this,{element:document.createElement("div"),render:o.render||Yq,target:o.target})||this;var s=void 0!==o.className?o.className:"ol-rotate",a=void 0!==o.label?o.label:"\u21E7";r.label_=null,"string"==typeof a?(r.label_=document.createElement("span"),r.label_.className="ol-compass",r.label_.textContent=a):(r.label_=a,r.label_.classList.add("ol-compass"));var i=o.tipLabel?o.tipLabel:"Reset rotation",n=document.createElement("button");n.className=s+"-reset",n.setAttribute("type","button"),n.title=i,n.appendChild(r.label_),n.addEventListener(f.CLICK,r.handleClick_.bind(r),!1);var l=s+" "+Ya+" "+Cc,$=r.element;return $.className=l,$.appendChild(n),r.callResetNorth_=o.resetNorth?o.resetNorth:void 0,r.duration_=void 0!==o.duration?o.duration:250,r.autoHide_=void 0===o.autoHide||o.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(Vg),r}return WB(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:vc}):t.setRotation(0))},e}(Za);function Yq(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var o="rotate("+r+"rad)";if(this.autoHide_){var s=this.element.classList.contains(Vg);s||0!==r?s&&0!==r&&this.element.classList.remove(Vg):this.element.classList.add(Vg)}this.label_.style.transform=o}this.rotation_=r}}vh.render=Yq,vh.default=_q;var Oi={};var DB=Oi&&Oi.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Vq=function(t){function e(e){var o=this,n=e||{};o=t.call(this,{element:document.createElement("div"),target:n.target})||this;var r=void 0!==n.className?n.className:"ol-zoom",a=void 0!==n.delta?n.delta:1,i=void 0!==n.zoomInLabel?n.zoomInLabel:"+",p=void 0!==n.zoomOutLabel?n.zoomOutLabel:"\u2212",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",d=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",s=document.createElement("button");s.className=r+"-in",s.setAttribute("type","button"),s.title=l,s.appendChild("string"==typeof i?document.createTextNode(i):i),s.addEventListener(f.CLICK,o.handleClick_.bind(o,a),!1);var u=document.createElement("button");u.className=r+"-out",u.setAttribute("type","button"),u.title=d,u.appendChild("string"==typeof p?document.createTextNode(p):p),u.addEventListener(f.CLICK,o.handleClick_.bind(o,-a),!1);var c=r+" "+Ya+" "+Cc,$=o.element;return $.className=c,$.appendChild(s),$.appendChild(u),o.duration_=void 0!==n.duration?n.duration:250,o}return DB(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var o=e.getZoom();if(void 0!==o){var n=e.getConstrainedZoom(o+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:vc})):e.setZoom(n)}}},e}(Za);Oi.default=Vq;var Ti={};var lB=Ti&&Ti.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function l(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(l.prototype=r.prototype,new l)}}(),Rq=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],ZA=function(e){function t(t){var r=this,l=t||{};(r=e.call(this,{element:document.createElement("div"),target:l.target})||this).cssClassName_=void 0!==l.className?l.className:"ol-full-screen";var s=void 0!==l.label?l.label:"\u2922";r.labelNode_="string"==typeof s?document.createTextNode(s):s;var n=void 0!==l.labelActive?l.labelActive:"\xD7";r.labelActiveNode_="string"==typeof n?document.createTextNode(n):n,r.button_=document.createElement("button");var o=l.tipLabel?l.tipLabel:"Toggle full-screen";r.setClassName_(r.button_,Zi()),r.button_.setAttribute("type","button"),r.button_.title=o,r.button_.appendChild(r.labelNode_),r.button_.addEventListener(f.CLICK,r.handleClick_.bind(r),!1);var u=r.cssClassName_+" "+Ya+" "+Cc+" "+(Oq()?"":kC),c=r.element;return c.className=u,c.appendChild(r.button_),r.keys_=void 0!==l.keys&&l.keys,r.source_=l.source,r}return lB(t,e),t.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){if(Oq()){var e=this.getMap();if(e)if(Zi())EA();else{var t=void 0;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?FA(t):Nq(t)}}},t.prototype.handleFullScreenChange_=function(){var e=this.getMap();Zi()?(this.setClassName_(this.button_,!0),td(this.labelActiveNode_,this.labelNode_)):(this.setClassName_(this.button_,!1),td(this.labelNode_,this.labelActiveNode_)),e&&e.updateSize()},t.prototype.setClassName_=function(e,t){var r=this.cssClassName_+"-true",l=this.cssClassName_+"-false",s=t?r:l;e.classList.remove(r),e.classList.remove(l),e.classList.add(s)},t.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t)for(var r=0,l=Rq.length;r<l;++r)this.listenerKeys.push(d(document,Rq[r],this.handleFullScreenChange_,this))},t}(Za);function Oq(){var e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function Zi(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function Nq(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function FA(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():Nq(e)}function EA(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}Ti.default=ZA;var vf={};var DA=vf&&vf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),ej="projection",Mq="coordinateFormat",AA=function(t){function e(e){var r=this,o=e||{},n=document.createElement("div");return n.className=void 0!==o.className?o.className:"ol-mouse-position",(r=t.call(this,{element:n,render:o.render||Gq,target:o.target})||this).addEventListener(D(ej),r.handleProjectionChanged_),o.coordinateFormat&&r.setCoordinateFormat(o.coordinateFormat),o.projection&&r.setProjection(o.projection),r.undefinedHTML_=void 0!==o.undefinedHTML?o.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=n.innerHTML,r.mapProjection_=null,r.transform_=null,r}return DA(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(Mq)},e.prototype.getProjection=function(){return this.get(ej)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(d(r,Db.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(d(r,Db.POINTEROUT,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set(Mq,t)},e.prototype.setProjection=function(t){this.set(ej,N(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?Ed(this.mapProjection_,r):_s}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var n=Eh();n&&(this.transform_=Ed(this.mapProjection_,n)),this.transform_(o,o);var i=this.getCoordinateFormat();e=i?i(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(Za);function Gq(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}vf.render=Gq,vf.default=AA;var Df={};var oj={};var sj={};var qA=sj&&sj.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uj=function(t){function e(e,r,n,o){var $=t.call(this,e)||this;return $.inversePixelTransform=r,$.frameState=n,$.context=o,$}return qA(e,t),e}(ga);sj.default=uj;var wj={};var jA=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,eA=/^([a-z]*)$|^hsla?\(.*\)$/i;function aA(r){return"string"==typeof r?r:sq(r)}function $z(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var $=getComputedStyle(e).color;return document.body.removeChild(e),$}return""}var Wz=function(){var r={},e=0;return function($){var t;if(r.hasOwnProperty($))t=r[$];else{if(e>=1024){var o=0;for(var a in r)0==(3&o++)&&(delete r[a],--e)}t=Tz($),r[$]=t,++e}return t}}();function uq(r){return Array.isArray(r)?r:Wz(r)}function Tz(r){var e,$,t,o,a;if(eA.exec(r)&&(r=$z(r)),jA.exec(r)){var u=r.length-1,n=void 0;n=u<=4?1:2;var c=4===u||8===u;e=parseInt(r.substr(1+0*n,n),16),$=parseInt(r.substr(1+1*n,n),16),t=parseInt(r.substr(1+2*n,n),16),o=c?parseInt(r.substr(1+3*n,n),16):255,1==n&&(e=(e<<4)+e,$=($<<4)+$,t=(t<<4)+t,c&&(o=(o<<4)+o)),a=[e,$,t,o/255]}else 0==r.indexOf("rgba(")?tq(a=r.slice(5,-1).split(",").map(Number)):0==r.indexOf("rgb(")?((a=r.slice(4,-1).split(",").map(Number)).push(1),tq(a)):m(!1,14);return a}function tq(r){return r[0]=I(r[0]+.5|0,0,255),r[1]=I(r[1]+.5|0,0,255),r[2]=I(r[2]+.5|0,0,255),r[3]=I(r[3],0,1),r}function sq(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var $=r[1];$!=(0|$)&&($=$+.5|0);var t=r[2];return t!=(0|t)&&(t=t+.5|0),"rgba("+e+","+$+","+t+","+(void 0===r[3]?1:r[3])+")"}var Qz=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var r=this.cache_[t];0!=(3&e++)||r.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(e,t,r){var i=rq(e,t,r);return i in this.cache_?this.cache_[i]:null},e.prototype.set=function(e,t,r,i){var o=rq(e,t,r);this.cache_[o]=i,++this.cacheSize_},e.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},e}();function rq(e,t,r){return t+":"+e+":"+(r?aA(r):"null")}var Pf=new Qz;function Oz(e,r){r&&r.clear();for(var t=e.declutterItems,$=t.length-1;$>=0;--$)for(var o=t[$],i=o.items,n=0,a=i.length;n<a;n+=3)r=i[n].renderDeclutter(i[n+1],i[n+2],o.opacity,r);return t.length=0,r}var Zj={};function bb(r){return Array.isArray(r)?sq(r):r}var qq=function(){function t(){}return t.prototype.drawCustom=function(t,o,e){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){},t}();var ak={};var bk={};var Jz=bk&&bk.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dk=function(e){function t(t){var r=e.call(this)||this;return r.highWaterMark=void 0!==t?t:2048,r.count_=0,r.entries_={},r.oldest_=null,r.newest_=null,r}return Jz(t,e),t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(f.CLEAR)},t.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},t.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},t.prototype.get=function(e,t){var r=this.entries_[e];return m(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},t.prototype.remove=function(e){var t=this.entries_[e];return m(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.key_;return t},t.prototype.getValues=function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.value_;return t},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},t.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},t.prototype.set=function(e,t){m(!(e in this.entries_),16);var r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_},t.prototype.setSize=function(e){this.highWaterMark=e},t}(dd);bk.default=dk;var Iz=ak&&ak.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),nq=function(t){function e(e){var o=t.call(this,e)||this;return o.consumers={},o}return Iz(e,t),e.prototype.clear=function(){this.consumers={},t.prototype.clear.call(this)},e.prototype.get=function(e,o){var r=t.prototype.get.call(this,e),n=ba(o);return n in this.consumers||(this.consumers[n]={}),this.consumers[n][e]=!0,r},e.prototype.prune=function(){t:for(;this.canExpireCache();){var t=this.peekLastKey();for(var e in this.consumers)if(t in this.consumers[e])break t;var o=this.pop();for(var e in o.width=0,o.height=0,this.consumers)delete this.consumers[e][t]}},e.prototype.release=function(t){delete this.consumers[ba(t)]},e}(dk);ak.default=nq;var mq="10px sans-serif";var Cb="#000";var md="round";var bg=[];var cg=0;var ld="round";var we=10;var cf="#000";var Ze="center";var lg="middle";var Fd=[0,0,0,0];var ie=1;var dc=new nq;var Bz={};var xz,jq=null,gq={};var Xy=function(){var e,t,$=100,r=Bz,i="32px ",a=["monospace","serif"],o=a.length,n="wmytzilWMYTZIL@#/&?$%10\uF013";function s(e,$,r){for(var s=fq(),x=!0,l=0;l<o;++l){var p=a[l];if(s.font=e+" "+$+" "+i+p,t=s.measureText(n).width,r!=p){s.font=e+" "+$+" "+i+r+","+p;var A=s.measureText(n).width;x=x&&A!=t}}return!!x}function x(){var t=!0;for(var i in r)r[i]<$&&(s.apply(this,i.split("\n"))?(r[i]=$,Zd(gq),jq=null,xz=void 0,dc.getCount()&&dc.clear()):(++r[i],t=!1));t&&(clearInterval(e),e=void 0)}return function(t){var i=jC(t);if(i)for(var a=i.families,o=0,n=a.length;o<n;++o){var l=a[o],p=i.style+"\n"+i.weight+"\n"+l;p in r||(r[p]=$,s(i.style,i.weight,l)||(r[p]=0,void 0===e&&(e=setInterval(x,32))))}}}();function fq(){return jq||(jq=pa(1,1)),jq}var Dy=function(){var e,t=gq;return function($){var r=t[$];return null==r&&(e||((e=document.createElement("div")).innerHTML="M",e.style.margin="0 !important",e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=$,document.body.appendChild(e),r=e.offsetHeight,t[$]=r,document.body.removeChild(e)),r}}();function fm(e,t){var $=fq();return e!=xz&&($.font=e,xz=$.font),$.measureText(t).width}function bq(e,t,$){if(t in $)return $[t];var r=fm(e,t);return $[t]=r,r}function Ay(e,t,$){for(var r=t.length,i=0,a=0;a<r;++a){var o=fm(e,t[a]);i=Math.max(i,o),$.push(o)}return i}function em(e,t,$,r){0!==t&&(e.translate($,r),e.rotate(t),e.translate(-$,-r))}var xy=Ia();function $p(e,t,$,r,i,a,o,n,s,x,l){var p;1!=$&&(p=e.globalAlpha,e.globalAlpha=p*$),t&&e.setTransform.apply(e,t),e.drawImage(r,i,a,o,n,s,x,o*l,n*l),1!=$&&(e.globalAlpha=p),t&&e.setTransform.apply(e,xy)}var qy=Zj&&Zj.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Zp=function(t){function e(e,i,o,r,s,a,n){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=o,l.transform_=r,l.viewRotation_=s,l.squaredTolerance_=a,l.userTransform_=n,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=0,l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=0,l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=Ia(),l}return qy(e,t),e.prototype.drawImages_=function(t,e,i,o){if(this.image_){var r=Ec(t,e,i,2,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,n=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=n*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var h=0,f=r.length;h<f;h+=2){var _=r[h]-this.imageAnchorX_,m=r[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_){var p=_+this.imageAnchorX_,g=m+this.imageAnchorY_;lb(a,p,g,this.imageScale_,this.imageScale_,l,-p,-g),s.setTransform.apply(s,a)}s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,m,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||s.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(s.globalAlpha=n)}},e.prototype.drawText_=function(t,e,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Ec(t,e,i,o,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=o){var n=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var h=lb(this.tmpLocalTransform_,n,l,this.textScale_,this.textScale_,a,-n,-l);s.setTransform.apply(s,h)}this.textStrokeState_&&s.strokeText(this.text_,n,l),this.textFillState_&&s.fillText(this.text_,n,l)}0===a&&1==this.textScale_||s.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,o,r){var s=this.context_,a=Ec(t,e,i,o,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);var n=a.length;r&&(n-=2);for(var l=2;l<n;l+=2)s.lineTo(a[l],a[l+1]);return r&&s.closePath(),i},e.prototype.drawRings_=function(t,e,i,o){for(var r=0,s=i.length;r<s;++r)e=this.moveToLineTo_(t,e,i[r],o,!0);return e},e.prototype.drawCircle=function(t){if(fa(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Ur(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],o=e[3]-e[1],r=Math.sqrt(i*i+o*o),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case k.POINT:this.drawPoint(t);break;case k.LINE_STRING:this.drawLineString(t);break;case k.POLYGON:this.drawPolygon(t);break;case k.MULTI_POINT:this.drawMultiPoint(t);break;case k.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case k.MULTI_POLYGON:this.drawMultiPolygon(t);break;case k.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case k.CIRCLE:this.drawCircle(t);}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&fa(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,o=e.length;i<o;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),fa(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(fa(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),r=0,s=t.getEnds(),a=t.getStride();i.beginPath();for(var n=0,l=s.length;n<l;++n)r=this.moveToLineTo_(o,r,s[n],a,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),fa(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),fa(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),o=0,r=t.getEndss(),s=t.getStride();e.beginPath();for(var a=0,n=r.length;a<n;++a){var l=r[a];o=this.drawRings_(i,o,l,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Xd(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:Ze;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=o&&(i.textAlign=o,e.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:bb(i||Cb)}}else this.fillState_=null;if(e){var o=e.getColor(),r=e.getLineCap(),s=e.getLineDash(),a=e.getLineDashOffset(),n=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:md,lineDash:s||bg,lineDashOffset:a||cg,lineJoin:void 0!==n?n:ld,lineWidth:this.pixelRatio_*(void 0!==l?l:ie),miterLimit:void 0!==h?h:we,strokeStyle:bb(o||cf)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),o=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:bb(i||Cb)}}else this.textFillState_=null;var o=t.getStroke();if(o){var r=o.getColor(),s=o.getLineCap(),a=o.getLineDash(),n=o.getLineDashOffset(),l=o.getLineJoin(),h=o.getWidth(),f=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==s?s:md,lineDash:a||bg,lineDashOffset:n||cg,lineJoin:void 0!==l?l:ld,lineWidth:void 0!==h?h:ie,miterLimit:void 0!==f?f:we,strokeStyle:bb(r||cf)}}else this.textStrokeState_=null;var _=t.getFont(),m=t.getOffsetX(),p=t.getOffsetY(),g=t.getRotateWithView(),$=t.getRotation(),x=t.getScale(),S=t.getText(),c=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:void 0!==_?_:mq,textAlign:void 0!==c?c:Ze,textBaseline:void 0!==d?d:lg},this.text_=void 0!==S?S:"",this.textOffsetX_=void 0!==m?this.pixelRatio_*m:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==$?$:0,this.textScale_=this.pixelRatio_*(void 0!==x?x:1)}else this.text_=""},e}(qq);Zj.default=Zp;var x={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var z={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};var ly=.5,Yp={Point:Nw,LineString:$w,Polygon:Iw,MultiPoint:Mw,MultiLineString:Xw,MultiPolygon:Ww,GeometryCollection:cx,Circle:Rx};function iy(e,r){return parseInt(ba(e),10)-parseInt(ba(r),10)}function hy(e,r){var t=Up(e,r);return t*t}function Up(e,r){return ly*e/r}function Rx(e,r,t,a){var $=t.getFill(),i=t.getStroke();if($||i){var n=e.getBuilder(t.getZIndex(),z.CIRCLE);n.setFillStrokeStyle($,i),n.drawCircle(r,a)}var o=t.getText();if(o){var l=e.getBuilder(t.getZIndex(),z.TEXT);l.setTextStyle(o,e.addDeclutter(!1)),l.drawText(r,a)}}function Tp(e,r,t,a,$,i){var n=!1,o=t.getImage();if(o){var l=o.getImageState();l==x.LOADED||l==x.ERROR?o.unlistenImageChange($):(l==x.IDLE&&o.load(),l=o.getImageState(),o.listenImageChange($),n=!0)}return Kx(e,r,t,a,i),n}function Kx(e,r,t,a,$){var i=t.getGeometryFunction()(r);if(i){var n=i.simplifyTransformed(a,$);if(t.getRenderer())Rp(e,n,t,r);else(0,Yp[n.getType()])(e,n,t,r)}}function Rp(e,r,t,a){if(r.getType()!=k.GEOMETRY_COLLECTION)e.getBuilder(t.getZIndex(),z.DEFAULT).drawCustom(r,a,t.getRenderer());else for(var $=r.getGeometries(),i=0,n=$.length;i<n;++i)Rp(e,$[i],t,a)}function cx(e,r,t,a){var $,i,n=r.getGeometriesArray();for($=0,i=n.length;$<i;++$){(0,Yp[n[$].getType()])(e,n[$],t,a)}}function $w(e,r,t,a){var $=t.getStroke();if($){var i=e.getBuilder(t.getZIndex(),z.LINE_STRING);i.setFillStrokeStyle(null,$),i.drawLineString(r,a)}var n=t.getText();if(n){var o=e.getBuilder(t.getZIndex(),z.TEXT);o.setTextStyle(n,e.addDeclutter(!1)),o.drawText(r,a)}}function Xw(e,r,t,a){var $=t.getStroke();if($){var i=e.getBuilder(t.getZIndex(),z.LINE_STRING);i.setFillStrokeStyle(null,$),i.drawMultiLineString(r,a)}var n=t.getText();if(n){var o=e.getBuilder(t.getZIndex(),z.TEXT);o.setTextStyle(n,e.addDeclutter(!1)),o.drawText(r,a)}}function Ww(e,r,t,a){var $=t.getFill(),i=t.getStroke();if(i||$){var n=e.getBuilder(t.getZIndex(),z.POLYGON);n.setFillStrokeStyle($,i),n.drawMultiPolygon(r,a)}var o=t.getText();if(o){var l=e.getBuilder(t.getZIndex(),z.TEXT);l.setTextStyle(o,e.addDeclutter(!1)),l.drawText(r,a)}}function Nw(e,r,t,a){var $=t.getImage();if($){if($.getImageState()!=x.LOADED)return;var i=e.getBuilder(t.getZIndex(),z.IMAGE);i.setImageStyle($,e.addDeclutter(!1)),i.drawPoint(r,a)}var n=t.getText();if(n){var o=e.getBuilder(t.getZIndex(),z.TEXT);o.setTextStyle(n,e.addDeclutter(!!$)),o.drawText(r,a)}}function Mw(e,r,t,a){var $=t.getImage();if($){if($.getImageState()!=x.LOADED)return;var i=e.getBuilder(t.getZIndex(),z.IMAGE);i.setImageStyle($,e.addDeclutter(!1)),i.drawMultiPoint(r,a)}var n=t.getText();if(n){var o=e.getBuilder(t.getZIndex(),z.TEXT);o.setTextStyle(n,e.addDeclutter(!!$)),o.drawText(r,a)}}function Iw(e,r,t,a){var $=t.getFill(),i=t.getStroke();if($||i){var n=e.getBuilder(t.getZIndex(),z.POLYGON);n.setFillStrokeStyle($,i),n.drawPolygon(r,a)}var o=t.getText();if(o){var l=e.getBuilder(t.getZIndex(),z.TEXT);l.setTextStyle(o,e.addDeclutter(!1)),l.drawText(r,a)}}var Gw=wj&&wj.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),Jp=function(e){function r(r){var t=e.call(this)||this;return t.map_=r,t.declutterTree_=null,t}return Gw(r,e),r.prototype.dispatchRenderEvent=function(e,r){c()},r.prototype.calculateMatrices2D=function(e){var r=e.viewState,t=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;lb(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),si(o,t)},r.prototype.forEachFeatureAtCoordinate=function(e,r,t,o,n,a,i,c){var $,p=r.viewState;function u(e,r,t){return n.call(a,r,e?t:null)}var h=p.projection,s=e,l=[[0,0]];if(h.canWrapX()){var f=h.getExtent(),I=L(f),d=e[0];if(d<f[0]||d>f[2])s=[d+I*Math.ceil((f[0]-d)/I),e[1]];o&&l.push([-I,0],[I,0])}var m,v=r.layerStatesArray,y=v.length;this.declutterTree_&&(m=this.declutterTree_.all().map(function(e){return e.value}));for(var _=[],x=0;x<l.length;x++)for(var g=y-1;g>=0;--g){var C=v[g],j=C.layer;if(j.hasRenderer()&&Ie(C,p)&&i.call(c,j)){var T=j.getRenderer(),E=j.getSource();if(T&&E){var q=E.getWrapX()?s:e,b=u.bind(null,C.managed);_[0]=q[0]+l[x][0],_[1]=q[1]+l[x][1],$=T.forEachFeatureAtCoordinate(_,r,t,b,m)}if($)return $}}},r.prototype.forEachLayerAtPixel=function(e,r,t,o,n){return c()},r.prototype.hasFeatureAtCoordinate=function(e,r,t,o,n,a){return void 0!==this.forEachFeatureAtCoordinate(e,r,t,o,sa,this,n,a)},r.prototype.getMap=function(){return this.map_},r.prototype.renderFrame=function(e){this.declutterTree_=Oz(e,this.declutterTree_)},r.prototype.scheduleExpireIconCache=function(e){Pf.canExpireCache()&&e.postRenderFunctions.push(vw)},r}(bf);function vw(e,r){Pf.expire()}wj.default=Jp;var tw=oj&&oj.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function s(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}}(),$l=function(e){function r(r){var t=e.call(this,r)||this;t.labelCacheKey_=d(dc,f.CLEAR,r.redrawText.bind(r)),t.element_=document.createElement("div");var s=t.element_.style;s.position="absolute",s.width="100%",s.height="100%",s.zIndex="0",t.element_.className=Ya+" ol-layers";var n=r.getViewport();return n.insertBefore(t.element_,n.firstChild||null),t.children_=[],t.renderedVisible_=!0,t}return tw(r,e),r.prototype.dispatchRenderEvent=function(e,r){var t=this.getMap();if(t.hasListener(e)){var s=new uj(e,void 0,r);t.dispatchEvent(s)}},r.prototype.disposeInternal=function(){p(this.labelCacheKey_),e.prototype.disposeInternal.call(this)},r.prototype.renderFrame=function(r){if(r){this.calculateMatrices2D(r),this.dispatchRenderEvent(kc.PRECOMPOSE,r);var t=r.layerStatesArray.sort(function(e,r){return e.zIndex-r.zIndex}),s=r.viewState;this.children_.length=0;for(var n=null,i=0,a=t.length;i<a;++i){var o=t[i];if(r.layerIndex=i,Ie(o,s)&&(o.sourceState==ic.READY||o.sourceState==ic.UNDEFINED)){var $=o.layer.render(r,n);$&&$!==n&&(this.children_.push($),n=$)}}e.prototype.renderFrame.call(this,r),GC(this.element_,this.children_),this.dispatchRenderEvent(kc.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},r.prototype.forEachLayerAtPixel=function(e,r,t,s,n){for(var i=r.viewState,a=r.layerStatesArray,o=a.length-1;o>=0;--o){var $=a[o],l=$.layer;if(l.hasRenderer()&&Ie($,i)&&n(l)){var p=l.getRenderer().getDataAtPixel(e,r,t);if(p){var c=s(l,p);if(c)return c}}}},r}(Jp);oj.default=$l;var bm={};var na={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};var lw=bm&&bm.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),W={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},Ch=function(t){function e(e){var i=t.call(this)||this;return i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container "+mC,i.element.style.position="absolute",i.autoPan=void 0!==e.autoPan&&e.autoPan,i.autoPanAnimation=e.autoPanAnimation||{},i.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,i.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener(D(W.ELEMENT),i.handleElementChanged),i.addEventListener(D(W.MAP),i.handleMapChanged),i.addEventListener(D(W.OFFSET),i.handleOffsetChanged),i.addEventListener(D(W.POSITION),i.handlePositionChanged),i.addEventListener(D(W.POSITIONING),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:na.TOP_LEFT),void 0!==e.position&&i.setPosition(e.position),i}return lw(e,t),e.prototype.getElement=function(){return this.get(W.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(W.MAP)},e.prototype.getOffset=function(){return this.get(W.OFFSET)},e.prototype.getPosition=function(){return this.get(W.POSITION)},e.prototype.getPositioning=function(){return this.get(W.POSITIONING)},e.prototype.handleElementChanged=function(){lr(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(zg(this.element),p(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=d(t,Td.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(W.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(W.ELEMENT,t)},e.prototype.setMap=function(t){this.set(W.MAP,t)},e.prototype.setOffset=function(t){this.set(W.OFFSET,t)},e.prototype.setPosition=function(t){this.set(W.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),n=this.getRect(i,[QC(i),PC(i)]),o=this.autoPanMargin;if(!tb(e,n)){var r=n[0]-e[0],s=e[2]-n[2],a=n[1]-e[1],p=e[3]-n[3],$=[0,0];if(r<0?$[0]=r-o:s<0&&($[0]=Math.abs(s)+o),a<0?$[1]=a-o:p<0&&($[1]=Math.abs(p)+o),0!==$[0]||0!==$[1]){var d=t.getView().getCenterInternal(),c=t.getPixelFromCoordinateInternal(d),h=[c[0]+$[0],c[1]+$[1]];t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(h),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(W.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=n[0],s=n[1];if(o==na.BOTTOM_RIGHT||o==na.CENTER_RIGHT||o==na.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_="",i.left="");var a=Math.round(e[0]-t[0]-r)+"px";this.rendered.right_!=a&&(this.rendered.right_=a,i.right=a)}else{""!==this.rendered.right_&&(this.rendered.right_="",i.right=""),o!=na.BOTTOM_CENTER&&o!=na.CENTER_CENTER&&o!=na.TOP_CENTER||(r-=this.element.offsetWidth/2);var p=Math.round(t[0]+r)+"px";this.rendered.left_!=p&&(this.rendered.left_=p,i.left=p)}if(o==na.BOTTOM_LEFT||o==na.BOTTOM_CENTER||o==na.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_="",i.top="");var $=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=$&&(this.rendered.bottom_=$,i.bottom=$)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_="",i.bottom=""),o!=na.CENTER_LEFT&&o!=na.CENTER_CENTER&&o!=na.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var d=Math.round(t[1]+s)+"px";this.rendered.top_!=d&&(this.rendered.top_="top",i.top=d)}},e.prototype.getOptions=function(){return this.options},e}(Ka);bm.default=Ch;var Dp=Df&&Df.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),eh=.75,pe=.1,cw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dp(t,e),t.prototype.createRenderer=function(){return new $l(this)},t}(Zh),Zv=function(e){function t(t){var i=this,o=t||{};(i=e.call(this,{element:document.createElement("div"),render:o.render||wp,target:o.target})||this).boundHandleRotationChanged_=i.handleRotationChanged_.bind(i),i.collapsed_=void 0===o.collapsed||o.collapsed,i.collapsible_=void 0===o.collapsible||o.collapsible,i.collapsible_||(i.collapsed_=!1),i.rotateWithView_=void 0!==o.rotateWithView&&o.rotateWithView,i.viewExtent_=void 0;var r=void 0!==o.className?o.className:"ol-overviewmap",a=void 0!==o.tipLabel?o.tipLabel:"Overview map",n=void 0!==o.collapseLabel?o.collapseLabel:"\xAB";"string"==typeof n?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=n):i.collapseLabel_=n;var l=void 0!==o.label?o.label:"\xBB";"string"==typeof l?(i.label_=document.createElement("span"),i.label_.textContent=l):i.label_=l;var p=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild(p),s.addEventListener(f.CLICK,i.handleClick_.bind(i),!1),i.ovmapDiv_=document.createElement("div"),i.ovmapDiv_.className="ol-overviewmap-map",i.ovmap_=new cw({view:o.view});var h=i.ovmap_;o.layers&&o.layers.forEach(function(e){h.addLayer(e)});var $=document.createElement("div");$.className="ol-overviewmap-box",$.style.boxSizing="border-box",i.boxOverlay_=new Ch({position:[0,0],positioning:na.CENTER_CENTER,element:$}),i.ovmap_.addOverlay(i.boxOverlay_);var d=r+" "+Ya+" "+Cc+(i.collapsed_&&i.collapsible_?" "+Zg:"")+(i.collapsible_?"":" ol-uncollapsible"),v=i.element;v.className=d,v.appendChild(i.ovmapDiv_),v.appendChild(s);var c=i,_=i.boxOverlay_,u=i.boxOverlay_.getElement(),M=function(e){var t,i={clientX:(t=e).clientX,clientY:t.clientY},o=h.getEventCoordinateInternal(i);_.setPosition(o)},A=function(e){var t=h.getEventCoordinateInternal(e);c.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",A)};return u.addEventListener("mousedown",function(){window.addEventListener("mousemove",M),window.addEventListener("mouseup",A)}),i}return Dp(t,e),t.prototype.setMap=function(t){var i=this.getMap();if(t!==i){if(i){var o=i.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(d(t,Lc.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var r=t.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},t.prototype.handleMapPropertyChange_=function(e){if(e.key===X.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var i=this.getMap().getView();this.bindView_(i)}},t.prototype.bindView_=function(e){e.addEventListener(D(Ga.ROTATION),this.boundHandleRotationChanged_)},t.prototype.unbindView_=function(e){e.removeEventListener(D(Ga.ROTATION),this.boundHandleRotationChanged_)},t.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},t.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView().calculateExtentInternal(i);if(!this.viewExtent_||!Md(o,this.viewExtent_)){this.viewExtent_=o;var r=t.getSize(),a=t.getView().calculateExtentInternal(r),n=t.getPixelFromCoordinateInternal(ab(o)),l=t.getPixelFromCoordinateInternal(Tc(o)),p=Math.abs(n[0]-l[0]),s=Math.abs(n[1]-l[1]),h=r[0],$=r[1];p<h*pe||s<$*pe||p>h*eh||s>$*eh?this.resetExtent_():tb(a,o)||this.recenter_()}}},t.prototype.resetExtent_=function(){if(0!==eh&&0!==pe){var e=this.getMap(),t=this.ovmap_,i=e.getSize(),o=e.getView().calculateExtentInternal(i),r=t.getView(),a=Math.log(eh/pe)/Math.LN2,n=1/(Math.pow(2,a/2)*pe);lt(o,n),r.fitInternal(lc(o))}},t.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())},t.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView(),r=t.getView(),a=this.rotateWithView_?0:-o.getRotation(),n=this.boxOverlay_,l=this.boxOverlay_.getElement(),p=o.getCenterInternal(),s=o.getResolution(),h=r.getResolution(),$=i[0]*s/h,d=i[1]*s/h;if(n.setPosition(p),l){l.style.width=$+"px",l.style.height=d+"px";var v="rotate("+a+"rad)";l.style.transform=v}}},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(Zg),this.collapsed_?td(this.collapseLabel_,this.label_):td(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),ef(e,Td.POSTRENDER,function(e){this.updateBox_()},this)}},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.setRotateWithView=function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},t.prototype.getOverviewMap=function(){return this.ovmap_},t}(Za);function wp(e){this.validateExtent_(),this.updateBox_()}Df.render=wp,Df.default=Zv;var te={};var Lv=te&&te.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Lh="units",Mb={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};te.Units=Mb;var Jv=[1,2,5],Cv=function(e){function t(t){var r=this,i=t||{},s=void 0!==i.className?i.className:i.bar?"ol-scale-bar":"ol-scale-line";return(r=e.call(this,{element:document.createElement("div"),render:i.render||qp,target:i.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=s+"-inner",r.element.className=s+" "+Ya,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==i.minWidth?i.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addEventListener(D(Lh),r.handleUnitsChanged_),r.setUnits(i.units||Mb.METRIC),r.scaleBar_=i.bar||!1,r.scaleBarSteps_=i.steps||4,r.scaleBarText_=i.text||!1,r}return Lv(t,e),t.prototype.getUnits=function(){return this.get(Lh)},t.prototype.handleUnitsChanged_=function(){this.updateElement_()},t.prototype.setUnits=function(e){this.set(Lh,e)},t.prototype.updateElement_=function(){var e=this.viewState_;if(e){var t=e.center,r=e.projection,i=this.getUnits(),s=i==Mb.DEGREES?Y.DEGREES:Y.METERS,n=Ri(r,e.resolution,t,s),a=this.minWidth_*n,o="";if(i==Mb.DEGREES){var d=Ta[Y.DEGREES];(a*=d)<d/60?(o="\u2033",n*=3600):a<d?(o="\u2032",n*=60):o="\xB0"}else i==Mb.IMPERIAL?a<.9144?(o="in",n/=.0254):a<1609.344?(o="ft",n/=.3048):(o="mi",n/=1609.344):i==Mb.NAUTICAL?(n/=1852,o="nm"):i==Mb.METRIC?a<.001?(o="\u03BCm",n*=1e6):a<1?(o="mm",n*=1e3):a<1e3?o="m":(o="km",n/=1e3):i==Mb.US?a<.9144?(o="in",n*=39.37):a<1609.344?(o="ft",n/=.30480061):(o="mi",n/=1609.3472):m(!1,33);for(var l,$,p,c,h=3*Math.floor(Math.log(this.minWidth_*n)/Math.log(10));;){p=Math.floor(h/3);var _=Math.pow(10,p);if(l=Jv[(h%3+3)%3]*_,$=Math.round(l/n),isNaN($))return this.element.style.display="none",void(this.renderedVisible_=!1);if($>=this.minWidth_)break;++h}c=this.scaleBar_?this.createScaleBar($,l,o):l.toFixed(p<0?-p:0)+" "+o,this.renderedHTML_!=c&&(this.innerElement_.innerHTML=c,this.renderedHTML_=c),this.renderedWidth_!=$&&(this.innerElement_.style.width=$+"px",this.renderedWidth_=$),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.createScaleBar=function(e,t,r){for(var i="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],n=e/this.scaleBarSteps_,a="#ffffff",o=0;o<this.scaleBarSteps_;o++)0===o&&s.push(this.createMarker("absolute",o)),s.push("<div><div class=\"ol-scale-singlebar\" style=\"width: "+n+"px;background-color: "+a+";\"></div>"+this.createMarker("relative",o)+(o%2==0||2===this.scaleBarSteps_?this.createStepText(o,e,!1,t,r):"")+"</div>"),o===this.scaleBarSteps_-1&&s.push(this.createStepText(o+1,e,!0,t,r)),a="#ffffff"===a?"#000000":"#ffffff";return"<div style=\"display: flex;\">"+(this.scaleBarText_?"<div class=\"ol-scale-text\" style=\"width: "+e+"px;\">"+i+"</div>":"")+s.join("")+"</div>"},t.prototype.createMarker=function(e,t){return"<div class=\"ol-scale-step-marker\" style=\"position: "+e+";top: "+("absolute"===e?3:-10)+"px;\"></div>"},t.prototype.createStepText=function(e,t,r,i,s){var n=(0===e?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+s);return"<div class=\"ol-scale-step-text\" style=\"margin-left: "+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(r?t+"px":"unset")+";\">"+n+"</div>"},t.prototype.getScaleForResolution=function(){var e=this.getMap().getView().getResolution(),t=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*t*39.37*(25.4/.28)},t}(Za);function qp(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()}te.render=qp,te.default=Cv;var th={};var yv=th&&th.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ze={VERTICAL:0,HORIZONTAL:1},xv=function(t){function e(e){var i=this,r=e||{};(i=t.call(this,{element:document.createElement("div"),render:r.render||op})||this).dragListenerKeys_=[],i.currentResolution_=void 0,i.direction_=ze.VERTICAL,i.dragging_,i.heightLimit_=0,i.widthLimit_=0,i.startX_,i.startY_,i.thumbSize_=null,i.sliderInitialized_=!1,i.duration_=void 0!==r.duration?r.duration:200;var n=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=n+"-thumb "+Ya;var s=i.element;return s.setAttribute("touch-action","none"),s.className=n+" "+Ya+" "+Cc,s.appendChild(o),s.addEventListener(Db.POINTERDOWN,i.handleDraggerStart_.bind(i),!1),s.addEventListener(Db.POINTERMOVE,i.handleDraggerDrag_.bind(i),!1),s.addEventListener(Db.POINTERUP,i.handleDraggerEnd_.bind(i),!1),s.addEventListener(f.CLICK,i.handleContainerClick_.bind(i),!1),o.addEventListener(f.CLICK,dL,!1),i}return yv(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,r=t.firstElementChild,n=getComputedStyle(r),o=r.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),s=r.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom);this.thumbSize_=[o,s],e>i?(this.direction_=ze.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=ze.VERTICAL,this.heightLimit_=i-s),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i),n=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:n,duration:this.duration_,easing:vc})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var i=this.handleDraggerDrag_,r=this.handleDraggerEnd_;this.dragListenerKeys_.push(d(document,Db.POINTERMOVE,i,this),d(document,Db.POINTERUP,r,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,r=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(p),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==ze.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===ze.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,I(i,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return I(1-e(t),0,1)},e}(Za);function op(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}th.render=op,th.default=xv;var Vh={};var tv=Vh&&Vh.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ov=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),target:o.target})||this).extent=o.extent?o.extent:null;var r=void 0!==o.className?o.className:"ol-zoom-extent",i=void 0!==o.label?o.label:"E",a=void 0!==o.tipLabel?o.tipLabel:"Fit to extent",$=document.createElement("button");$.setAttribute("type","button"),$.title=a,$.appendChild("string"==typeof i?document.createTextNode(i):i),$.addEventListener(f.CLICK,n.handleClick_.bind(n),!1);var l=r+" "+Ya+" "+Cc,p=n.element;return p.className=l,p.appendChild($),n}return tv(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(lc(e))},e}(Za);Vh.default=ov;function _u(o){var a=o||{},r=new T,e=new $u(-.005,.05,100);return(void 0===a.altShiftDragRotate||a.altShiftDragRotate)&&r.push(new Io),(void 0===a.doubleClickZoom||a.doubleClickZoom)&&r.push(new ap({delta:a.zoomDelta,duration:a.zoomDuration})),(void 0===a.dragPan||a.dragPan)&&r.push(new Mo({condition:a.onFocusOnly?_o:void 0,kinetic:e})),(void 0===a.pinchRotate||a.pinchRotate)&&r.push(new no),(void 0===a.pinchZoom||a.pinchZoom)&&r.push(new lo({duration:a.zoomDuration})),(void 0===a.keyboard||a.keyboard)&&(r.push(new yo),r.push(new wo({delta:a.zoomDelta,duration:a.zoomDuration}))),(void 0===a.mouseWheelZoom||a.mouseWheelZoom)&&r.push(new so({condition:a.onFocusOnly?_o:void 0,duration:a.zoomDuration})),(void 0===a.shiftDragZoom||a.shiftDragZoom)&&r.push(new zo({duration:a.zoomDuration})),r}var $u=function(){function t(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var n=i-3;n>0&&this.points_[n+2]>t;)n-=3;var e=this.points_[i+2]-this.points_[n+2];if(e<1e3/60)return!1;var s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/e,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var $h={};var He={};var mf={ACTIVE:"active"};var Uu=He&&He.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$b=function(t){function e(e){var r=t.call(this)||this;return e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return Uu(e,t),e.prototype.getActive=function(){return this.get(mf.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(mf.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(Ka);function gp(t,e,r){var n=t.getCenterInternal();if(n){var o=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:BH,center:t.getConstrainedCenter(o)})}}function of(t,e,r,n){var o=t.getZoom();if(void 0!==o){var p=t.getConstrainedZoom(o+e),a=t.getResolutionForZoom(p);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:vc})}}He.pan=gp,He.zoomByDelta=of,He.default=$b;var Ou=$h&&$h.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),ap=function(t){function e(e){var r=t.call(this,{handleEvent:Fu})||this,a=e||{};return r.delta_=a.delta?a.delta:1,r.duration_=void 0!==a.duration?a.duration:250,r}return Ou(e,t),e}($b);function Fu(t){var e=!1;if(t.type==j.DBLCLICK){var r=t.originalEvent,a=t.map,n=t.coordinate,o=r.shiftKey?-this.delta_:this.delta_,$=a.getView();of($,o,n,this.duration_),t.preventDefault(),e=!0}return!e}$h.default=ap;var ii={};var Cu=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Bu=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};var _o=function(e){return e.target.getTargetElement()===document.activeElement};var rf=sa;var $o=function(e){var t=e.originalEvent;return 0==t.button&&!(mK&&hK&&t.ctrlKey)};var Wo=jc;var Vo=function(e){return e.type==j.SINGLECLICK};var qi=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var uf=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};var Uo=function(e){var t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t};var rb=function(e){var t=e.pointerEvent;return m(void 0!==t,56),"mouse"==t.pointerType};var Qo=function(e){var t=e.pointerEvent;return m(void 0!==t,56),t.isPrimary&&0===t.button};var yf={};var HK=yf&&yf.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ea=function(e){function t(t){var n=this,r=t||{};return n=e.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return HK(t,e),t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.pointerEvent)return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==j.POINTERDRAG)this.handleDragEvent(e);else if(e.type==j.POINTERUP){var n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==j.POINTERDOWN){var r=this.handleDownEvent(e);r&&e.preventDefault(),this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==j.POINTERMOVE&&this.handleMoveEvent(e);return!t},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){if(rK(e)){var t=e.pointerEvent,n=t.pointerId.toString();e.type==j.POINTERUP?delete this.trackedPointers_[n]:e.type==j.POINTERDOWN?this.trackedPointers_[n]=t:n in this.trackedPointers_&&(this.trackedPointers_[n]=t),this.targetPointers=Pl(this.trackedPointers_)}},t}($b);function Bf(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].clientX,r+=e[o].clientY;return[n/t,r/t]}function rK(e){var t=e.type;return t===j.POINTERDOWN||t===j.POINTERDRAG||t===j.POINTERUP}yf.centroid=Bf,yf.default=Ea;var gK=ii&&ii.__extends||function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(n,i)};return function(n,i){function e(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),Mo=function(t){function n(n){var i=t.call(this,{stopDown:jc})||this,e=n||{};return i.kinetic_=e.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1,i.condition_=e.condition?e.condition:PJ,i.noKinetic_=!1,i}return gK(n,t),n.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=Bf(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],r=t.map.getView();OH(e,r.getResolution()),Ul(e,r.getRotation()),r.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var e=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),s=n.getCoordinateFromPixelInternal([a[0]-e*Math.cos(r),a[1]-e*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:vc})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},n}(Ea);function PJ(t){return qi(t)&&Qo(t)}ii.default=Mo;var Di={};var LJ=Di&&Di.__extends||function(){var t=function(n,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(n,o)};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),Io=function(t){function n(n){var o=this,e=n||{};return(o=t.call(this,{stopDown:jc})||this).condition_=e.condition?e.condition:Bu,o.lastAngle_=void 0,o.duration_=void 0!==e.duration?e.duration:250,o}return LJ(n,t),n.prototype.handleDragEvent=function(t){if(rb(t)){var n=t.map,o=n.getView();if(o.getConstraints().rotation!==Hk){var e=n.getSize(),r=t.pixel,i=Math.atan2(e[1]/2-r[1],r[0]-e[0]/2);if(void 0!==this.lastAngle_){var a=i-this.lastAngle_;o.adjustRotationInternal(-a)}this.lastAngle_=i}}},n.prototype.handleUpEvent=function(t){return!rb(t)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){return!!rb(t)&&!(!$o(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)},n}(Ea);Di.default=Io;var Gi={};var Hi={};var Ii={};var GI=Ii&&Ii.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Do=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return GI(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new mb([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(bf);Ii.default=Do;var Bo=Hi&&Hi.__extends||function(){var t=function(n,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(n,o)};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),Mi={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},Ni=function(t){function n(n,o,e){var r=t.call(this,n)||this;return r.coordinate=o,r.mapBrowserEvent=e,r}return Bo(n,t),n}(ga),Ao=function(t){function n(n){var o=t.call(this)||this,e=n||{};return o.box_=new Do(e.className||"ol-dragbox"),o.minArea_=void 0!==e.minArea?e.minArea:64,o.onBoxEnd_=e.onBoxEnd?e.onBoxEnd:xb,o.startPixel_=null,o.condition_=e.condition?e.condition:rf,o.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:o.defaultBoxEndCondition,o}return Bo(n,t),n.prototype.defaultBoxEndCondition=function(t,n,o){var e=o[0]-n[0],r=o[1]-n[1];return e*e+r*r>=this.minArea_},n.prototype.getGeometry=function(){return this.box_.getGeometry()},n.prototype.handleDragEvent=function(t){rb(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ni(Mi.BOXDRAG,t.coordinate,t)))},n.prototype.handleUpEvent=function(t){return!rb(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Ni(Mi.BOXEND,t.coordinate,t))),!1)},n.prototype.handleDownEvent=function(t){return!!rb(t)&&!(!$o(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ni(Mi.BOXSTART,t.coordinate,t)),!0)},n}(Ea);Hi.default=Ao;var kI=Gi&&Gi.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),zo=function(t){function e(e){var o=this,r=e||{},n=r.condition?r.condition:uf;return(o=t.call(this,{condition:n,className:r.className||"ol-dragzoom",minArea:r.minArea,onBoxEnd:wH})||this).duration_=void 0!==r.duration?r.duration:200,o.out_=void 0!==r.out&&r.out,o}return kI(e,t),e}(Ao);function wH(){var t=this.getMap(),e=t.getView(),o=t.getSize(),r=this.getGeometry().getExtent();if(this.out_){var n=e.calculateExtentInternal(o),i=UI([t.getPixelFromCoordinateInternal(Nb(r)),t.getPixelFromCoordinateInternal(cd(r))]),a=e.getResolutionForExtentInternal(i,o);lt(n,1/a),r=n}var $=e.getConstrainedResolution(e.getResolutionForExtentInternal(r,o)),p=e.getConstrainedCenter(Ee(r),$);e.animateInternal({resolution:$,center:p,duration:this.duration_,easing:vc})}Gi.default=zo;var Si={};var Wc={LEFT:37,UP:38,RIGHT:39,DOWN:40};var uH=Si&&Si.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yo=function(o){function t(t){var e=o.call(this,{handleEvent:cG})||this,r=t||{};return e.defaultCondition_=function(o){return qi(o)&&Uo(o)},e.condition_=void 0!==r.condition?r.condition:e.defaultCondition_,e.duration_=void 0!==r.duration?r.duration:100,e.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,e}return uH(t,o),t}($b);function cG(o){var t=!1;if(o.type==f.KEYDOWN){var e=o.originalEvent.keyCode;if(this.condition_(o)&&(e==Wc.DOWN||e==Wc.LEFT||e==Wc.RIGHT||e==Wc.UP)){var r=o.map.getView(),n=r.getResolution()*this.pixelDelta_,i=0,$=0;e==Wc.DOWN?$=-n:e==Wc.LEFT?i=-n:e==Wc.RIGHT?i=n:$=n;var a=[i,$];Ul(a,r.getRotation()),gp(r,a,this.duration_),o.preventDefault(),t=!0}}return!t}Si.default=yo;var Xi={};var aG=Xi&&Xi.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wo=function(t){function e(e){var r=t.call(this,{handleEvent:LF})||this,n=e||{};return r.condition_=n.condition?n.condition:Uo,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return aG(e,t),e}($b);function LF(t){var e=!1;if(t.type==f.KEYDOWN||t.type==f.KEYPRESS){var r=t.originalEvent.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var n=t.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_,i=n.getView();of(i,o,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}Xi.default=wo;var Tf={};var KF=Tf&&Tf.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),Vf={TRACKPAD:"trackpad",WHEEL:"wheel"};Tf.Mode=Vf;var so=function(t){function e(e){var o=this,i=e||{};return(o=t.call(this,i)||this).totalDelta_=0,o.lastDelta_=0,o.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,o.duration_=void 0!==i.duration?i.duration:250,o.timeout_=void 0!==i.timeout?i.timeout:80,o.useAnchor_=void 0===i.useAnchor||i.useAnchor,o.condition_=i.condition?i.condition:rf,o.lastAnchor_=null,o.startTime_=void 0,o.timeoutId_,o.mode_=void 0,o.trackpadEventGap_=400,o.trackpadTimeoutId_,o.trackpadDeltaPerZoom_=300,o}return KF(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,Math.sign(this.lastDelta_),this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==f.WHEEL)return!0;t.preventDefault();var e,o=t.map,i=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==f.WHEEL&&(e=i.deltaY,zK&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Xf),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var r=Date.now();if(void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Vf.TRACKPAD:Vf.WHEEL),this.mode_===Vf.TRACKPAD){var a=o.getView();return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):a.beginInteraction(),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.trackpadEventGap_),a.adjustZoom(-e/this.trackpadDeltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1}this.totalDelta_+=e;var n=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),n),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var o=I(this.totalDelta_,-this.maxDelta_,this.maxDelta_);of(e,-o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}($b);Tf.default=so;var dj={};var EF=dj&&dj.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),no=function(t){function n(n){var e=this,r=n||{},o=r;return o.stopDown||(o.stopDown=jc),(e=t.call(this,o)||this).anchor_=null,e.lastAngle_=void 0,e.rotating_=!1,e.rotationDelta_=0,e.threshold_=void 0!==r.threshold?r.threshold:.3,e.duration_=void 0!==r.duration?r.duration:250,e}return EF(n,t),n.prototype.handleDragEvent=function(t){var n=0,e=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-e.clientY,r.clientX-e.clientX);if(void 0!==this.lastAngle_){var i=o-this.lastAngle_;this.rotationDelta_+=i,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=i}this.lastAngle_=o;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Hk){var h=a.getViewport().getBoundingClientRect(),l=Bf(this.targetPointers);l[0]-=h.left,l[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(n,this.anchor_))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Ea);dj.default=no;var gj={};var rE=gj&&gj.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lo=function(t){function e(e){var r=this,n=e||{},o=n;return o.stopDown||(o.stopDown=jc),(r=t.call(this,o)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return rE(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,i=r.clientY-n.clientY,a=Math.sqrt(o*o+i*i);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,c=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),u=Bf(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),s.render(),c.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Ea);gj.default=lo;var jj={};var ko=jj&&jj.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GD={ADD_FEATURES:"addfeatures"},zD=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i.features=n,i.file=r,i.projection=o,i}return ko(e,t),e}(ga),uD=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{handleEvent:sa})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],r.projection_=n.projection?N(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return ko(e,t),e.prototype.handleResult_=function(t,e){var r=e.target.result,n=this.getMap(),o=this.projection_;o||(o=n.getView().getProjection());for(var i=this.formatConstructors_,s=[],$=0,a=i.length;$<a;++$){var p=new i[$];if((s=this.tryReadFeatures_(p,r,{featureProjection:o}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new zD(GD.ADD_FEATURES,t,s,o))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[d(e,f.DROP,$C,this),d(e,f.DRAGENTER,pj,this),d(e,f.DRAGOVER,pj,this),d(e,f.DROP,pj,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(n){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(p),this.dropListenKeys_=null)},e}($b);function $C(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var o=e.item(r),i=new FileReader;i.addEventListener(f.LOAD,this.handleResult_.bind(this,o)),i.readAsText(o)}}function pj(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}jj.default=uD;var qj={};var YC=qj&&qj.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),VC=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,i)||this).condition_=i.condition?i.condition:uf,n.lastAngle_=void 0,n.lastMagnitude_=void 0,n.lastScaleDelta_=0,n.duration_=void 0!==i.duration?i.duration:400,n}return YC(e,t),e.prototype.handleDragEvent=function(t){if(rb(t)){var e=t.map,n=e.getSize(),i=t.pixel,o=i[0]-n[0]/2,a=n[1]/2-i[1],r=Math.atan2(a,o),s=Math.sqrt(o*o+a*a),l=e.getView();if(void 0!==this.lastAngle_){var u=this.lastAngle_-r;l.adjustRotationInternal(u)}this.lastAngle_=r,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!rb(t))return!0;var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!rb(t)&&!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)},e}(Ea);qj.default=VC;var le={};var dg={};var OC=dg&&dg.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ra=function(e){function t(t){var r=e.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener(D(r.geometryName_),r.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var n=t;r.setGeometry(n)}else{var o=t;r.setProperties(o)}return r}return OC(t,e),t.prototype.clone=function(){var e=new t(this.getProperties());e.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&e.setGeometry(r.clone());var n=this.getStyle();return n&&e.setStyle(n),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(p(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=d(e,f.CHANGE,this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?co(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeEventListener(D(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener(D(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(Ka);function co(e){return"function"==typeof e?e:(Array.isArray(e)?t=e:(m("function"==typeof e.getZIndex,41),t=[e]),function(){return t});var t}dg.createStyleFunction=co,dg.default=ra;var yj={};var UA=yj&&yj.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),hg=function(t){function e(e,r,o){var i=t.call(this)||this;if(void 0!==o&&void 0===r)i.setFlatCoordinates(o,e);else{var s=r||0;i.setCenterAndRadius(e,s,o)}return i}return UA(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,s=t-i[0],n=e-i[1],a=s*s+n*n;if(a<o){if(0===a)for(var p=0;p<this.stride;++p)r[p]=i[p];else{var d=this.getRadius()/Math.sqrt(a);r[0]=i[0]+d*s,r[1]=i[1]+d*n;for(p=2;p<this.stride;++p)r[p]=i[p]}return r.length=this.stride,a}return o},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return La(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return k.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(fa(t,e)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]||ot(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,i=Pr(o,0,t,this.stride);o[i++]=o[0]+e;for(var s=1,n=this.stride;s<n;++s)o[i++]=o[s];o.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter(bt(r,0,r.length,o,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter(at(r,0,r.length,o,t,e,r)),this.changed()},e}(ub);hg.prototype.transform,yj.default=hg;var Bj={};function Vn(r,e,t,i,n,$){var o=NaN,l=NaN,a=(t-e)/i;if(1===a)o=r[e],l=r[e+1];else if(2==a)o=(1-n)*r[e]+n*r[e+i],l=(1-n)*r[e+1]+n*r[e+i+1];else if(0!==a){for(var u=r[e],p=r[e+1],f=0,s=[0],q=e+i;q<t;q+=i){var D=r[q],T=r[q+1];f+=Math.sqrt((D-u)*(D-u)+(T-p)*(T-p)),s.push(f),u=D,p=T}var v=n*f,c=qL(s,v);if(c<0){var g=(v-s[-c-2])/(s[-c-1]-s[-c-2]),x=e+(-c-2)*i;o=Sd(r[x],r[x+i],g),l=Sd(r[x+1],r[x+i+1],g)}else o=r[e+c*i],l=r[e+c*i+1]}return $?($[0]=o,$[1]=l,$):[o,l]}function Dj(r,e,t,i,n,$){if(t==e)return null;var o;if(n<r[e+i-1])return $?((o=r.slice(e,e+i))[i-1]=n,o):null;if(r[t-1]<n)return $?((o=r.slice(t-i,t))[i-1]=n,o):null;if(n==r[e+i-1])return r.slice(e,e+i);for(var l=e/i,a=t/i;l<a;){var u=l+a>>1;n<r[(u+1)*i-1]?a=u:l=u+1}var p=r[l*i-1];if(n==p)return r.slice((l-1)*i,(l-1)*i+i);var f=(n-p)/(r[(l+1)*i-1]-p);o=[];for(var s=0;s<i-1;++s)o.push(Sd(r[(l-1)*i+s],r[l*i+s],f));return o.push(n),o}function wA(r,e,t,i,n,$,o){if(o)return Dj(r,e,t[t.length-1],i,n,$);var l;if(n<r[i-1])return $?((l=r.slice(0,i))[i-1]=n,l):null;if(r[r.length-1]<n)return $?((l=r.slice(r.length-i))[i-1]=n,l):null;for(var a=0,u=t.length;a<u;++a){var p=t[a];if(e!=p){if(n<r[e+i-1])return null;if(n<=r[p-1])return Dj(r,e,p,i,n,!1);e=p}}return null}function Rn(r,n,t,e){for(var $=r[n],i=r[n+1],x=0,Z=n+e;Z<t;Z+=e){var g=r[Z],o=r[Z+1];x+=Math.sqrt((g-$)*(g-$)+(o-i)*(o-i)),$=g,i=o}return x}var iA=Bj&&Bj.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Gb=function(t){function e(e,i){var o=t.call(this)||this;return o.flatMidpoint_=null,o.flatMidpointRevision_=-1,o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?o.setCoordinates(e,i):o.setFlatCoordinates(i,e),o}return iA(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Ca(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,o){return o<Qd(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Yi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),aj(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,o))},e.prototype.forEachSegment=function(t){return Jr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=B.XYM&&this.layout!=B.XYZM)return null;var i=void 0!==e&&e;return Dj(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return wd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Vn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Rn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Hj(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,B.XY)},e.prototype.getType=function(){return k.LINE_STRING},e.prototype.intersectsExtent=function(t){return Ef(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Xg(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ub);Bj.default=Gb;var Ij={};var gA=Ij&&Ij.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Qn=function(t){function e(e,r,i){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,r);else if(void 0!==r&&i)o.setFlatCoordinates(r,e),o.ends_=i;else{for(var s=o.getLayout(),n=e,a=[],f=[],l=0,$=n.length;l<$;++l){var p=n[l];0===l&&(s=p.getLayout()),Ca(a,p.getFlatCoordinates()),f.push(a.length)}o.setFlatCoordinates(s,a),o.ends_=f}return o}return gA(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Ca(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,i){return i<Qd(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($i(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bj(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,i))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=B.XYM&&this.layout!=B.XYZM||0===this.flatCoordinates.length)return null;var i=void 0!==e&&e,o=void 0!==r&&r;return wA(this.flatCoordinates,0,this.ends_,this.stride,t,i,o)},e.prototype.getCoordinates=function(){return ih(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Gb(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,i=[],o=0,s=0,n=e.length;s<n;++s){var a=e[s],f=new Gb(t.slice(o,a),r);i.push(f),o=a}return i},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,i=this.ends_,o=this.stride,s=0,n=i.length;s<n;++s){var a=i[s],f=Vn(e,r,a,o,.5);Ca(t,f),r=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=tE(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,i),new e(r,B.XY,i)},e.prototype.getType=function(){return k.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return _D(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=nj(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(ub);Ij.default=Qn;var Lj={};var cA=Lj&&Lj.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Nj=function(t){function e(e,r){var o=t.call(this)||this;return r&&!Array.isArray(e[0])?o.setFlatCoordinates(r,e):o.setCoordinates(e,r),o}return cA(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Ca(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,o){if(o<Qd(this.getExtent(),t,e))return o;for(var i=this.flatCoordinates,n=this.stride,s=0,a=i.length;s<a;s+=n){var u=$c(t,e,i[s],i[s+1]);if(u<o){o=u;for(var d=0;d<n;++d)r[d]=i[s+d];r.length=n}}return o},e.prototype.getCoordinates=function(){return wd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new ob(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,o=[],i=0,n=t.length;i<n;i+=r){var s=new ob(t.slice(i,i+r),e);o.push(s)}return o},e.prototype.getType=function(){return k.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,o=0,i=e.length;o<i;o+=r){var n=e[o],s=e[o+1];if(Jh(t,n,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Xg(this.flatCoordinates,0,t,this.stride),this.changed()},e}(ub);Lj.default=Nj;var Oj={};function Mz(r,e,t,$){for(var n=[],a=ja(),i=0,o=t.length;i<o;++i){var s=t[i];a=rt(r,e,s[0],$),n.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=s[s.length-1]}return n}var Lz=Oj&&Oj.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ln=function(t){function e(e,i,r){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var s=o.getLayout(),n=e,a=[],h=[],l=0,u=n.length;l<u;++l){var $=n[l];0===l&&(s=$.getLayout());for(var d=a.length,p=$.getEnds(),f=0,c=p.length;f<c;++f)p[f]+=d;Ca(a,$.getFlatCoordinates()),h.push(p)}i=s,e=a,r=h}return void 0!==i&&r?(o.setFlatCoordinates(i,e),o.endss_=r):o.setCoordinates(e,i),o}return Lz(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Ca(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,o=(e=t.getEnds().slice()).length;r<o;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,r){return r<Qd(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(yE(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return lE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return ME(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Er(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Or(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Mz(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=fE(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Nj(this.getFlatInteriorPoints().slice(),B.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;ID(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Er(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=qE(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,B.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),o=r[r.length-1];if(0!==e)for(var s=0,n=r.length;s<n;++s)r[s]-=e;return new mb(this.flatCoordinates.slice(e,o),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],o=0,s=0,n=i.length;s<n;++s){var a=i[s].slice(),h=a[a.length-1];if(0!==o)for(var l=0,u=a.length;l<u;++l)a[l]-=o;var $=new mb(e.slice(o,h),t,a);r.push($),o=h}return r},e.prototype.getType=function(){return k.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return RD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=vE(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(ub);Oj.default=Ln;var Sj={};var Tj={};var Uj={};var Vj={};var Kn=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getAnchor=function(){return c()},t.prototype.getImage=function(t){return c()},t.prototype.getHitDetectionImage=function(t){return c()},t.prototype.getImageState=function(){return c()},t.prototype.getImageSize=function(){return c()},t.prototype.getHitDetectionImageSize=function(){return c()},t.prototype.getOrigin=function(){return c()},t.prototype.getSize=function(){return c()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){c()},t.prototype.load=function(){c()},t.prototype.unlistenImageChange=function(t){c()},t}();var cz=Vj&&Vj.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function r(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jn=function(t){function i(i){var e=this,r=void 0!==i.rotateWithView&&i.rotateWithView;return(e=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==i.rotation?i.rotation:0,scale:1})||this).canvas_=null,e.hitDetectionCanvas_=null,e.fill_=void 0!==i.fill?i.fill:null,e.origin_=[0,0],e.points_=i.points,e.radius_=void 0!==i.radius?i.radius:i.radius1,e.radius2_=i.radius2,e.angle_=void 0!==i.angle?i.angle:0,e.stroke_=void 0!==i.stroke?i.stroke:null,e.anchor_=null,e.size_=null,e.imageSize_=null,e.hitDetectionImageSize_=null,e.render(),e}return cz(i,t),i.prototype.clone=function(){var t=new i({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},i.prototype.getAnchor=function(){return this.anchor_},i.prototype.getAngle=function(){return this.angle_},i.prototype.getFill=function(){return this.fill_},i.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},i.prototype.getImage=function(t){return this.canvas_},i.prototype.getImageSize=function(){return this.imageSize_},i.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},i.prototype.getImageState=function(){return x.LOADED},i.prototype.getOrigin=function(){return this.origin_},i.prototype.getPoints=function(){return this.points_},i.prototype.getRadius=function(){return this.radius_},i.prototype.getRadius2=function(){return this.radius2_},i.prototype.getSize=function(){return this.size_},i.prototype.getStroke=function(){return this.stroke_},i.prototype.listenImageChange=function(t){},i.prototype.load=function(){},i.prototype.unlistenImageChange=function(t){},i.prototype.render=function(){var t,i=md,e=ld,r=0,o=null,s=0,n=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=cf),t=bb(t),void 0===(n=this.stroke_.getWidth())&&(n=ie),o=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=ld),void 0===(i=this.stroke_.getLineCap())&&(i=md),void 0===(r=this.stroke_.getMiterLimit())&&(r=we));var a=2*(this.radius_+n)+1,l={strokeStyle:t,strokeWidth:n,size:a,lineCap:i,lineDash:o,lineDashOffset:s,lineJoin:e,miterLimit:r},h=pa(a,a);this.canvas_=h.canvas;var u=a=this.canvas_.width;this.draw_(l,h,0,0),this.createHitDetectionCanvas_(l),this.anchor_=[a/2,a/2],this.size_=[a,a],this.imageSize_=[u,u]},i.prototype.draw_=function(t,i,e,r){var o,s,n;i.setTransform(1,0,0,1,0,0),i.translate(e,r),i.beginPath();var a=this.points_;if(a===1/0)i.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(a*=2),o=0;o<=a;o++)s=2*o*Math.PI/a-Math.PI/2+this.angle_,n=o%2==0?this.radius_:l,i.lineTo(t.size/2+n*Math.cos(s),t.size/2+n*Math.sin(s))}if(this.fill_){var h=this.fill_.getColor();null===h&&(h=Cb),i.fillStyle=bb(h),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke()),i.closePath()},i.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var i=this.fill_.getColor(),e=0;if("string"==typeof i&&(i=uq(i)),null===i?e=1:Array.isArray(i)&&(e=4===i.length?i[3]:1),0===e){var r=pa(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r,0,0)}}},i.prototype.drawHitDetectionCanvas_=function(t,i,e,r){i.setTransform(1,0,0,1,0,0),i.translate(e,r),i.beginPath();var o=this.points_;if(o===1/0)i.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var s=void 0!==this.radius2_?this.radius2_:this.radius_;s!==this.radius_&&(o*=2);var n=void 0,a=void 0,l=void 0;for(n=0;n<=o;n++)l=2*n*Math.PI/o-Math.PI/2+this.angle_,a=n%2==0?this.radius_:s,i.lineTo(t.size/2+a*Math.cos(l),t.size/2+a*Math.sin(l))}i.fillStyle=Cb,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.stroke()),i.closePath()},i}(Kn);Vj.default=Jn;var _y=Uj&&Uj.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),tg=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke})||this}return _y(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Jn);Uj.default=tg;var ug=function(){function o(o){var r=o||{};this.color_=void 0!==r.color?r.color:null}return o.prototype.clone=function(){var r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(o){this.color_=o},o}();var Hd=function(){function t(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return t.prototype.clone=function(){var i=this.getColor();return new t({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();var Dc=function(){function e(e){var t=e||{};this.geometry_=null,this.geometryFunction_=Hn,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(e){this.renderer_=e},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(e){this.fill_=e},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(e){this.image_=e},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(e){this.stroke_=e},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(e){this.text_=e},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Hn,this.geometry_=e},e.prototype.setZIndex=function(e){this.zIndex_=e},e}();function $y(e){var t;if("function"==typeof e)t=e;else{var r;if(Array.isArray(e))r=e;else m("function"==typeof e.getZIndex,41),r=[e];t=function(){return r}}return t}var In=null;function Wy(e,t){if(!In){var r=new ug({color:"rgba(255,255,255,0.4)"}),o=new Hd({color:"#3399CC",width:1.25});In=[new Dc({image:new tg({fill:r,stroke:o,radius:5}),fill:r,stroke:o})]}return In}function Ce(){var e={},t=[255,255,255,1],r=[0,153,255,1];return e[k.POLYGON]=[new Dc({fill:new ug({color:[255,255,255,.5]})})],e[k.MULTI_POLYGON]=e[k.POLYGON],e[k.LINE_STRING]=[new Dc({stroke:new Hd({color:t,width:5})}),new Dc({stroke:new Hd({color:r,width:3})})],e[k.MULTI_LINE_STRING]=e[k.LINE_STRING],e[k.CIRCLE]=e[k.POLYGON].concat(e[k.LINE_STRING]),e[k.POINT]=[new Dc({image:new tg({radius:6,fill:new ug({color:r}),stroke:new Hd({color:t,width:1.5})}),zIndex:1/0})],e[k.MULTI_POINT]=e[k.POINT],e[k.GEOMETRY_COLLECTION]=e[k.POLYGON].concat(e[k.LINE_STRING],e[k.POINT]),e}function Hn(e){return e.getGeometry()}var By=Tj&&Tj.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fn={RENDER_ORDER:"renderOrder"},En=function(t){function e(e){var r=this,n=e||{},i=la({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return By(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Fn.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(Fn.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Wy,this.styleFunction_=null===t?void 0:$y(this.style_),this.changed()},e}(xi);Tj.default=En;var kk={};var lk={};var ca={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Eg=[ca.FILL];var Rb=[ca.STROKE];var Gc=[ca.BEGIN_PATH];var Dn=[ca.CLOSE_PATH];var Cx=lk&&lk.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nd=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=n,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return Cx(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,r,n,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=r);var u,$,l,p=t[e],c=t[e+1],h=this.tmpCoordinate_,d=!0;for(u=e+r;u<i;u+=r)h[0]=t[u],h[1]=t[u+1],(l=Mh(a,h))!==$?(d&&(this.coordinates[s++]=p,this.coordinates[s++]=c),this.coordinates[s++]=h[0],this.coordinates[s++]=h[1],d=!1):l===P.INTERSECTING?(this.coordinates[s++]=h[0],this.coordinates[s++]=h[1],d=!1):d=!0,p=h[0],c=h[1],$=l;return(n&&d||u===e+r)&&(this.coordinates[s++]=p,this.coordinates[s++]=c),s},e.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatCoordinates(t,e,a,r,!1,!1);n.push(u),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,s,a,u=t.getType(),$=t.getStride(),l=this.coordinates.length;if(u==k.MULTI_POLYGON){r=(t=t).getOrientedFlatCoordinates(),s=[];var p=t.getEndss();a=0;for(var c=0,h=p.length;c<h;++c){var d=[];a=this.drawCustomCoordinates_(r,a,p[c],$,d),s.push(d)}this.instructions.push([ca.CUSTOM,l,s,t,i,Or])}else u==k.POLYGON||u==k.MULTI_LINE_STRING?(o=[],r=u==k.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(r,0,t.getEnds(),$,o),this.instructions.push([ca.CUSTOM,l,o,t,i,ih])):u==k.LINE_STRING||u==k.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,$,!1,!1),this.instructions.push([ca.CUSTOM,l,n,t,i,wd])):u==k.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([ca.CUSTOM,l,n,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[ca.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ca.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,r,n=e.length,o=-1;for(t=0;t<n;++t)(r=(i=e[t])[0])==ca.END_GEOMETRY?o=t:r==ca.BEGIN_GEOMETRY&&(i[2]=t,kL(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=bb(r||Cb)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=bb(n||cf);var o=e.getLineCap();i.lineCap=void 0!==o?o:md;var s=e.getLineDash();i.lineDash=s?s.slice():bg;var a=e.getLineDashOffset();i.lineDashOffset=a||cg;var u=e.getLineJoin();i.lineJoin=void 0!==u?u:ld;var $=e.getWidth();i.lineWidth=void 0!==$?$:ie;var l=e.getMiterLimit();i.miterLimit=void 0!==l?l:we,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[ca.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[ca.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,r=t.lineCap,n=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||n!=t.currentLineDash&&!Xd(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=u)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[ca.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ut(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Tg(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(qq);lk.default=Nd;var tk={};var Vw=tk&&tk.__extends||function(){var t=function(i,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})(i,o)};return function(i,o){function e(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),zn=function(t){function i(i,o,e,h){var s=t.call(this,i,o,e,h)||this;return s.declutterGroups_=null,s.hitDetectionImage_=null,s.image_=null,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s}return Vw(i,t),i.prototype.drawCoordinates_=function(t,i,o,e){return this.appendFlatCoordinates(t,i,o,e,!1,!1)},i.prototype.drawPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var o=t.getFlatCoordinates(),e=t.getStride(),h=this.coordinates.length,s=this.drawCoordinates_(o,0,o.length,e);this.instructions.push([ca.DRAW_IMAGE,h,s,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ca.DRAW_IMAGE,h,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i)}},i.prototype.drawMultiPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var o=t.getFlatCoordinates(),e=t.getStride(),h=this.coordinates.length,s=this.drawCoordinates_(o,0,o.length,e);this.instructions.push([ca.DRAW_IMAGE,h,s,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ca.DRAW_IMAGE,h,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i)}},i.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},i.prototype.setImageStyle=function(t,i){var o=t.getAnchor(),e=t.getSize(),h=t.getHitDetectionImage(1),s=t.getImage(1),r=t.getOrigin();this.anchorX_=o[0],this.anchorY_=o[1],this.declutterGroups_=i,this.hitDetectionImage_=h,this.image_=s,this.height_=e[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=e[0]},i}(Nd);tk.default=zn;var wk={};var nw=wk&&wk.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),un=function(t){function i(i,e,s,n){return t.call(this,i,e,s,n)||this}return nw(i,t),i.prototype.drawFlatCoordinates_=function(t,i,e,s){var n=this.coordinates.length,o=this.appendFlatCoordinates(t,i,e,s,!1,!1),r=[ca.MOVE_TO_LINE_TO,n,o];return this.instructions.push(r),this.hitDetectionInstructions.push(r),e},i.prototype.drawLineString=function(t,i){var e=this.state,s=e.strokeStyle,n=e.lineWidth;if(void 0!==s&&void 0!==n){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],Gc);var o=t.getFlatCoordinates(),r=t.getStride();this.drawFlatCoordinates_(o,0,o.length,r),this.hitDetectionInstructions.push(Rb),this.endGeometry(i)}},i.prototype.drawMultiLineString=function(t,i){var e=this.state,s=e.strokeStyle,n=e.lineWidth;if(void 0!==s&&void 0!==n){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],Gc);for(var o=t.getEnds(),r=t.getFlatCoordinates(),p=t.getStride(),a=0,h=0,u=o.length;h<u;++h)a=this.drawFlatCoordinates_(r,a,o[h],p);this.hitDetectionInstructions.push(Rb),this.endGeometry(i)}},i.prototype.finish=function(){var i=this.state;return null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&this.instructions.push(Rb),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},i.prototype.applyStroke=function(i){null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(Rb),i.lastStroke=this.coordinates.length),i.lastStroke=0,t.prototype.applyStroke.call(this,i),this.instructions.push(Gc)},i}(Nd);wk.default=un;var zk={};var Rv=zk&&zk.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Bk=function(t){function i(i,e,s,o){return t.call(this,i,e,s,o)||this}return Rv(i,t),i.prototype.drawFlatCoordinatess_=function(t,i,e,s){var o=this.state,n=void 0!==o.fillStyle,r=void 0!==o.strokeStyle,l=e.length;this.instructions.push(Gc),this.hitDetectionInstructions.push(Gc);for(var h=0;h<l;++h){var a=e[h],$=this.coordinates.length,u=this.appendFlatCoordinates(t,i,a,s,!0,!r),c=[ca.MOVE_TO_LINE_TO,$,u];this.instructions.push(c),this.hitDetectionInstructions.push(c),r&&(this.instructions.push(Dn),this.hitDetectionInstructions.push(Dn)),i=a}return n&&(this.instructions.push(Eg),this.hitDetectionInstructions.push(Eg)),r&&(this.instructions.push(Rb),this.hitDetectionInstructions.push(Rb)),i},i.prototype.drawCircle=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ca.SET_FILL_STYLE,Cb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var n=t.getFlatCoordinates(),r=t.getStride(),l=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,r,!1,!1);var h=[ca.CIRCLE,l];this.instructions.push(Gc,h),this.hitDetectionInstructions.push(Gc,h),void 0!==e.fillStyle&&(this.instructions.push(Eg),this.hitDetectionInstructions.push(Eg)),void 0!==e.strokeStyle&&(this.instructions.push(Rb),this.hitDetectionInstructions.push(Rb)),this.endGeometry(i)}},i.prototype.drawPolygon=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ca.SET_FILL_STYLE,Cb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var n=t.getEnds(),r=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(r,0,n,l),this.endGeometry(i)}},i.prototype.drawMultiPolygon=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ca.SET_FILL_STYLE,Cb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ca.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);for(var n=t.getEndss(),r=t.getOrientedFlatCoordinates(),l=t.getStride(),h=0,a=0,$=n.length;a<$;++a)h=this.drawFlatCoordinatess_(r,h,n[a],l);this.endGeometry(i)}},i.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var i=this.tolerance;if(0!==i)for(var e=this.coordinates,s=0,o=e.length;s<o;++s)e[s]=Yc(e[s],i);return t.prototype.finish.call(this)},i.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},i}(Nd);zk.default=Bk;var Lg={};function Iv(h,t,r,$,a){var n,o,C,i,c,e,u,v,p,s=r,x=r,g=0,k=0,m=r;for(n=r;n<$;n+=a){var d=t[n],f=t[n+1];void 0!==i&&(v=d-i,p=f-c,C=Math.sqrt(v*v+p*p),void 0!==e&&(k+=o,Math.acos((e*v+u*p)/(o*C))>h&&(k>g&&(g=k,s=m,x=n),k=0,m=n-a)),o=C,e=v,u=p),i=d,c=f}return(k+=C)>g?[m,n]:[s,x]}var zv={POINT:"point",LINE:"line"};var wv=Lg&&Lg.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pd={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};Lg.TEXT_ALIGN=Pd;var rn=function(t){function e(e,i,r,s){var o=t.call(this,e,i,r,s)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",dc.prune(),o}return wv(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(""!==this.text_&&s&&(i||r)){var o,l,a=this.coordinates.length,n=t.getType(),$=null,h=2,p=2;if(s.placement===zv.LINE){if(!fa(this.getBufferedMaxExtent(),t.getExtent()))return;var u=void 0;if($=t.getFlatCoordinates(),p=t.getStride(),n==k.LINE_STRING)u=[$.length];else if(n==k.MULTI_LINE_STRING)u=t.getEnds();else if(n==k.POLYGON)u=t.getEnds().slice(0,1);else if(n==k.MULTI_POLYGON){var f=t.getEndss();for(u=[],o=0,l=f.length;o<l;++o)u.push(f[o][0])}this.beginGeometry(t,e);for(var c=s.textAlign,d=0,_=void 0,x=0,g=u.length;x<g;++x){if(null==c){var S=Iv(s.maxAngle,$,d,u[x],p);d=S[0],_=S[1]}else _=u[x];for(o=d;o<_;o+=p)this.coordinates.push($[o],$[o+1]);h=this.coordinates.length,d=u[x];var m=this.declutterGroups_?0===x?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(a,h,m),a=h}this.endGeometry(e)}else{var y=null;switch(s.overflow||(y=[]),n){case k.POINT:case k.MULTI_POINT:h=($=t.getFlatCoordinates()).length;break;case k.LINE_STRING:$=t.getFlatMidpoint();break;case k.CIRCLE:$=t.getCenter();break;case k.MULTI_LINE_STRING:h=($=t.getFlatMidpoints()).length;break;case k.POLYGON:$=t.getFlatInteriorPoint(),s.overflow||y.push($[2]/this.resolution),p=3;break;case k.MULTI_POLYGON:var D=t.getFlatInteriorPoints();for($=[],o=0,l=D.length;o<l;o+=3)s.overflow||y.push(D[o+2]/this.resolution),$.push(D[o],D[o+1]);if(0==(h=$.length))return;}h=this.appendFlatCoordinates($,0,h,p,!1,!1),this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var w=this.pixelRatio;this.instructions.push([ca.DRAW_IMAGE,a,h,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,s.padding==Fd?Fd:s.padding.map(function(t){return t*w}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.hitDetectionInstructions.push([ca.DRAW_IMAGE,a,h,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,s.padding,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||Ze,textBaseline:e.textBaseline||lg,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var r=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,l=this.textKey_,a=this.fillKey_;this.saveTextStates_();var n=this.pixelRatio,$=Pd[s.textBaseline],h=this.textOffsetY_*n,p=this.text_,u=s.scale,f=r?r.lineWidth*u/2:0;this.instructions.push([ca.DRAW_CHARS,t,e,$,i,s.overflow,a,s.maxAngle,n,h,o,f*n,p,l,1]),this.hitDetectionInstructions.push([ca.DRAW_CHARS,t,e,$,i,s.overflow,a,s.maxAngle,1,h,o,f,p,l,1/n])},e.prototype.setTextStyle=function(t,e){var i,r,s;if(t){this.declutterGroups_=e;var o=t.getFill();o?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=bb(o.getColor()||Cb)):(r=null,this.textFillState_=r);var l=t.getStroke();if(l){(s=this.textStrokeState_)||(s={},this.textStrokeState_=s);var a=l.getLineDash(),n=l.getLineDashOffset(),$=l.getWidth(),h=l.getMiterLimit();s.lineCap=l.getLineCap()||md,s.lineDash=a?a.slice():bg,s.lineDashOffset=void 0===n?cg:n,s.lineJoin=l.getLineJoin()||ld,s.lineWidth=void 0===$?ie:$,s.miterLimit=void 0===h?we:h,s.strokeStyle=bb(l.getColor()||cf)}else s=null,this.textStrokeState_=s;i=this.textState_;var p=t.getFont()||mq;Xy(p);var u=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||lg,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Fd,i.scale=void 0===u?1:u;var f=t.getOffsetX(),c=t.getOffsetY(),d=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===c?0:c,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===_?0:_,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:ba(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+ba(r.fillStyle):""}else this.text_=""},e}(Nd);Lg.default=rn;var rv={Circle:Bk,Default:Nd,Image:zn,LineString:un,Polygon:Bk,Text:rn},nv=function(){function e(e,r,t,i,d){this.declutter_=d,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=t,this.buildersByZIndex_={}}return e.prototype.addDeclutter=function(e){var r=null;return this.declutter_&&(e?(r=this.declutterGroups_)[0][4]++:(r=[ja()],this.declutterGroups_=r,r[0].push(1))),r},e.prototype.finish=function(){var e={};for(var r in this.buildersByZIndex_){e[r]=e[r]||{};var t=this.buildersByZIndex_[r];for(var i in t){var d=t[i].finish();e[r][i]=d}}return e},e.prototype.getBuilder=function(e,r){var t=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[t];void 0===i&&(i={},this.buildersByZIndex_[t]=i);var d=i[r];void 0===d&&(d=new(0,rv[r])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[r]=d);return d},e}();var Ne={};var Lk={};function Xt(t,a,r,h,$,e,o,x,M,p,n){for(var P,i,v=[],w=t[a]>t[r-h],J=$.length,N=t[a],l=t[a+1],s=t[a+=h],I=t[a+1],f=0,u=Math.sqrt(Math.pow(s-N,2)+Math.pow(I-l,2)),d=!1,m=0;m<J;++m){for(var q=$[P=w?J-m-1:m],O=x*M(p,q,n),T=e+O/2;a<r-h&&f+u<T;)N=s,l=I,s=t[a+=h],I=t[a+1],f+=u,u=Math.sqrt(Math.pow(s-N,2)+Math.pow(I-l,2));var c=T-f,b=Math.atan2(I-l,s-N);if(w&&(b+=b>0?-Math.PI:Math.PI),void 0!==i){var g=b-i;if(d=d||0!==g,g+=g>Math.PI?-2*Math.PI:g<-Math.PI?2*Math.PI:0,Math.abs(g)>o)return null}i=b;var j=c/u,k=Sd(N,s,j),y=Sd(l,I,j);v[P]=[k,y,O/2,b,q],e+=O}return d?v:[[v[0][0],v[0][1],v[0][2],v[0][3],$]]}var Nk,Sg={};!function(t,i){"object"==typeof Sg?Sg=i():"function"==typeof Nk&&Nk.amd?Nk(i):(t=t||self).RBush=i()}(Sg,function(){function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var c=n[r],m=e,p=a;for(i(n,e,r),h(n[a],c)>0&&i(n,e,a);m<p;){for(i(n,m,p),m++,p--;h(n[m],c)<0;)m++;for(;h(n[p],c)>0;)p--}0===h(n[e],c)?i(n,e,p):i(n,++p,a),p<=r&&(e=p+1),r<=p&&(a=p-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function m(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!m(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;m(t,o)&&(i.leaf?n.push(h):c(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!m(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(m(t,a)){if(i.leaf||c(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!c(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var c=f;c<=u;c+=s){var m=Math.min(c+s-1,u);e.children.push(this._build(t,c,m,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(c=t,m=s,(Math.max(m.maxX,c.maxX)-Math.min(m.minX,c.minX))*(Math.max(m.maxY,c.maxY)-Math.min(m.minY,c.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var c,m;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,c=1/0,m=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,void 0,void 0,void 0,void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),X=f(d)+f(x);v<c?(c=v,r=p,m=X<m?X:m):v===c&&X<m&&(m=X,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var c=t.children[f];o(a,t.leaf?e(c):c),l+=u(a)}for(var m=n-i-1;m>=i;m--){var p=t.children[m];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});var VK=Lk&&Lk.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),hc=ja(),Re=Ia(),zb=[],Wa=[],gb=[],vb=[],_m=function(t){function e(e,r,i,a){var $=t.call(this)||this;return $.overlaps=i,$.pixelRatio=r,$.resolution=e,$.alignFill_,$.declutterItems=[],$.instructions=a.instructions,$.coordinates=a.coordinates,$.coordinateCache_={},$.renderedTransform_=Ia(),$.hitDetectionInstructions=a.hitDetectionInstructions,$.pixelCoordinates_=null,$.viewRotation_=0,$.fillStates=a.fillStates||{},$.strokeStates=a.strokeStates||{},$.textStates=a.textStates||{},$.widths_={},$}return VK(e,t),e.prototype.disposeInternal=function(){dc.release(this),t.prototype.disposeInternal.call(this)},e.prototype.getTextImage=function(t,e,r,i){var a,$=i+e+t+r+this.pixelRatio;if(!dc.containsKey($)){var p=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,n=this.textStates[e],s=this.pixelRatio,l=n.scale*s,h=Pd[n.textAlign||Ze],E=i&&p.lineWidth?p.lineWidth:0,v=t.split("\n"),m=v.length,c=[],K=Ay(n.font,v,c),Z=Dy(n.font),u=Z*m,f=K+E,d=pa(Math.ceil((f+2)*l),Math.ceil((u+E)*l));a=d.canvas,dc.set($,a),1!=l&&d.scale(l,l),d.font=n.font,i&&(d.strokeStyle=p.strokeStyle,d.lineWidth=E,d.lineCap=p.lineCap,d.lineJoin=p.lineJoin,d.miterLimit=p.miterLimit,d.setLineDash&&p.lineDash.length&&(d.setLineDash(p.lineDash),d.lineDashOffset=p.lineDashOffset)),r&&(d.fillStyle=o.fillStyle),d.textBaseline="middle",d.textAlign="center";var x=.5-h,_=h*f+x*E,g=void 0;if(i)for(g=0;g<m;++g)d.strokeText(v[g],_+x*c[g],.5*(E+Z)+g*Z);if(r)for(g=0;g<m;++g)d.fillText(v[g],_+x*c[g],.5*(E+Z)+g*Z)}return dc.get($,this)},e.prototype.replayTextBackground_=function(t,e,r,i,a,$,p){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,e),$&&(this.alignFill_=$[2],this.fill_(t)),p&&(this.setStrokeStyle_(t,p),t.stroke())},e.prototype.replayImage_=function(t,e,r,i,a,$,p,o,n,s,l,h,E,v,m,c,K,Z){var u=K||Z;e-=a*=E,r-=$*=E;var f=m+s>i.width?i.width-s:m,d=o+l>i.height?i.height-l:o,x=c[3]+f*E+c[1],_=c[0]+d*E+c[2],g=e-c[3],T=r-c[0];(u||0!==h)&&(zb[0]=g,vb[0]=g,zb[1]=T,Wa[1]=T,Wa[0]=g+x,gb[0]=Wa[0],gb[1]=T+_,vb[1]=gb[1]);var y=null;if(0!==h){var I=e+a,C=r+$;y=lb(Re,I,C,1,1,h,-I,-C),da(Re,zb),da(Re,Wa),da(Re,gb),da(Re,vb),La(Math.min(zb[0],Wa[0],gb[0],vb[0]),Math.min(zb[1],Wa[1],gb[1],vb[1]),Math.max(zb[0],Wa[0],gb[0],vb[0]),Math.max(zb[1],Wa[1],gb[1],vb[1]),hc)}else La(g,T,g+x,T+_,hc);var S=t.canvas,k=Z?Z[2]*E/2:0,b=hc[0]-k<=S.width&&hc[2]+k>=0&&hc[1]-k<=S.height&&hc[3]+k>=0;if(v&&(e=Math.round(e),r=Math.round(r)),p){if(!b&&1==p[4])return;qt(p,hc);var w=b?[t,y?y.slice(0):null,n,i,s,l,f,d,e,r,E]:null;w&&(u&&w.push(K,Z,zb,Wa,gb,vb),p.push(w))}else b&&(u&&this.replayTextBackground_(t,zb,Wa,gb,vb,K,Z),$p(t,y,n,i,s,l,f,d,e,r,E))},e.prototype.fill_=function(t){if(this.alignFill_){var e=da(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter=function(t,e,r,i){if(t&&t.length>5){var a=t[4];if(1==a||a==t.length-5){var $={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};var $XGea$$interop$default=pi(Sg);if(i||(i=new $XGea$$interop$default.d(9)),!i.collides($)){i.insert($);for(var p=5,o=t.length;p<o;++p){var n=t[p],s=n[0],l=s.globalAlpha;l!==r&&(s.globalAlpha=r),n.length>11&&this.replayTextBackground_(n[0],n[13],n[14],n[15],n[16],n[11],n[12]),$p.apply(void 0,n),l!==r&&(s.globalAlpha=l)}}t.length=5,Je(t)}}return i},e.prototype.drawTextImageWithPointPlacement_=function(t,e,r,i){var a=this.textStates[e],$=this.getTextImage(t,e,i,r),p=this.strokeStates[r],o=this.pixelRatio,n=Pd[a.textAlign||Ze],s=Pd[a.textBaseline||lg],l=p&&p.lineWidth?p.lineWidth:0;return{label:$,anchorX:n*($.width/o-2*a.scale)+2*(.5-n)*l,anchorY:s*$.height/o+2*(.5-s)*l}},e.prototype.execute_=function(t,e,r,i,a,$){var p;this.declutterItems.length=0,this.pixelCoordinates_&&Xd(e,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=Ec(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),CF(this.renderedTransform_,e));for(var o,n,s,l,h,E,v,m,c,K,Z,u,f,d,x,_,g,T=0,y=r.length,I=0,C=0,S=0,k=null,b=null,w=this.coordinateCache_,R=this.viewRotation_,A=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},L=this.instructions!=r||this.overlaps?0:200;T<y;){var O=r[T];switch(O[0]){case ca.BEGIN_GEOMETRY:(x=O[1]).getGeometry()?void 0===$||fa($,O[3])?++T:T=O[2]+1:T=O[2];break;case ca.BEGIN_PATH:C>L&&(this.fill_(t),C=0),S>L&&(t.stroke(),S=0),C||S||(t.beginPath(),l=NaN,h=NaN),++T;break;case ca.CIRCLE:var M=p[I=O[1]],P=p[I+1],q=p[I+2]-M,j=p[I+3]-P,W=Math.sqrt(q*q+j*j);t.moveTo(M+W,P),t.arc(M,P,W,0,2*Math.PI,!0),++T;break;case ca.CLOSE_PATH:t.closePath(),++T;break;case ca.CUSTOM:I=O[1],o=O[2];var N=O[3],B=O[4],G=6==O.length?O[5]:void 0;D.geometry=N,D.feature=x,T in w||(w[T]=[]);var F=w[T];G?G(p,I,o,2,F):(F[0]=p[I],F[1]=p[I+1],F.length=2),B(F,D),++T;break;case ca.DRAW_IMAGE:I=O[1],o=O[2],K=O[3],n=O[4],s=O[5],c=a?null:O[6];var X=O[7],Y=O[8],H=O[9],U=O[10],J=O[11],V=O[12],z=O[13],Q=O[14];if(!K&&O.length>=19){Z=O[18],u=O[19],f=O[20],d=O[21];var tt=this.drawTextImageWithPointPlacement_(Z,u,f,d);K=tt.label,O[3]=K;var et=O[22];n=(tt.anchorX-et)*this.pixelRatio,O[4]=n;var rt=O[23];s=(tt.anchorY-rt)*this.pixelRatio,O[5]=s,X=K.height,O[7]=X,Q=K.width,O[14]=Q}var it=void 0;O.length>24&&(it=O[24]);var at=void 0,$t=void 0,pt=void 0;O.length>16?(at=O[15],$t=O[16],pt=O[17]):(at=Fd,$t=!1,pt=!1),J&&A?V+=R:J||A||(V-=R);for(var ot=0,nt=0;I<o;I+=2)if(!(it&&it[ot++]<Q/this.pixelRatio)){if(c){var st=Math.floor(nt);c.length<st+1&&((m=ja()).push(c[0][4]),c.push(m)),m=c[st]}this.replayImage_(t,p[I],p[I+1],K,n,s,m,X,Y,H,U,V,z,i,Q,at,$t?k:null,pt?b:null),m&&(nt===Math.floor(nt)&&this.declutterItems.push(this,m,x),nt+=1/m[4])}++T;break;case ca.DRAW_CHARS:var lt=O[1],ht=O[2],Et=O[3];m=a?null:O[4];var vt=O[5];d=O[6];var mt=O[7],ct=O[8],Kt=O[9];f=O[10];var Zt=O[11];Z=O[12],u=O[13];var ut=O[14],ft=this.textStates[u],dt=ft.font,xt=ft.scale*ct,_t=void 0;dt in this.widths_?_t=this.widths_[dt]:(_t={},this.widths_[dt]=_t);var gt=Rn(p,lt,ht,2),Tt=xt*bq(dt,Z,_t);if(vt||Tt<=gt){var yt=this.textStates[u].textAlign,It=(gt-Tt)*Pd[yt],Ct=Xt(p,lt,ht,2,Z,It,mt,xt,bq,dt,_t);if(Ct){var St=void 0,kt=void 0,bt=void 0,wt=void 0,Rt=void 0;if(f)for(St=0,kt=Ct.length;St<kt;++St)bt=(Rt=Ct[St])[4],wt=this.getTextImage(bt,u,"",f),n=Rt[2]+Zt,s=Et*wt.height+2*(.5-Et)*Zt-Kt,this.replayImage_(t,Rt[0],Rt[1],wt,n,s,m,wt.height,1,0,0,Rt[3],ut,!1,wt.width,Fd,null,null);if(d)for(St=0,kt=Ct.length;St<kt;++St)bt=(Rt=Ct[St])[4],wt=this.getTextImage(bt,u,d,""),n=Rt[2],s=Et*wt.height-Kt,this.replayImage_(t,Rt[0],Rt[1],wt,n,s,m,wt.height,1,0,0,Rt[3],ut,!1,wt.width,Fd,null,null)}}this.declutterItems.push(this,m,x),++T;break;case ca.END_GEOMETRY:if(void 0!==a){var At=a(x=O[1]);if(At)return At}++T;break;case ca.FILL:L?C++:this.fill_(t),++T;break;case ca.MOVE_TO_LINE_TO:for(I=O[1],o=O[2],_=p[I],v=(g=p[I+1])+.5|0,(E=_+.5|0)===l&&v===h||(t.moveTo(_,g),l=E,h=v),I+=2;I<o;I+=2)E=(_=p[I])+.5|0,v=(g=p[I+1])+.5|0,I!=o-2&&E===l&&v===h||(t.lineTo(_,g),l=E,h=v);++T;break;case ca.SET_FILL_STYLE:k=O,this.alignFill_=O[2],C&&(this.fill_(t),C=0,S&&(t.stroke(),S=0)),t.fillStyle=O[1],++T;break;case ca.SET_STROKE_STYLE:b=O,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,O),++T;break;case ca.STROKE:L?S++:t.stroke(),++T;break;default:++T;}}C&&this.fill_(t),S&&t.stroke()},e.prototype.execute=function(t,e,r,i){this.viewRotation_=r,this.execute_(t,e,this.instructions,i,void 0,void 0)},e.prototype.executeHitDetection=function(t,e,r,i,a){return this.viewRotation_=r,this.execute_(t,e,this.hitDetectionInstructions,!0,i,a)},e}(bf);Lk.default=_m;var SF=Ne&&Ne.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yk=[z.POLYGON,z.CIRCLE,z.LINE_STRING,z.IMAGE,z.TEXT,z.DEFAULT],Ym=function(r){function e(e,t,n,o,i,c){var $=r.call(this)||this;return $.maxExtent_=e,$.overlaps_=o,$.pixelRatio_=n,$.resolution_=t,$.renderBuffer_=c,$.executorsByZIndex_={},$.hitDetectionContext_=null,$.hitDetectionTransform_=Ia(),$.createExecutors_(i),$}return SF(e,r),e.prototype.clip=function(r,e){var t=this.getClipCoords(e);r.beginPath(),r.moveTo(t[0],t[1]),r.lineTo(t[2],t[3]),r.lineTo(t[4],t[5]),r.lineTo(t[6],t[7]),r.clip()},e.prototype.createExecutors_=function(r){for(var e in r){var t=this.executorsByZIndex_[e];void 0===t&&(t={},this.executorsByZIndex_[e]=t);var n=r[e];for(var o in n){var i=n[o];t[o]=new _m(this.resolution_,this.pixelRatio_,this.overlaps_,i)}}},e.prototype.disposeInternal=function(){for(var e in this.executorsByZIndex_){var t=this.executorsByZIndex_[e];for(var n in t)t[n].disposeInternal()}if(this.hitDetectionContext_){var o=this.hitDetectionContext_.canvas;o.width=0,o.height=0}r.prototype.disposeInternal.call(this)},e.prototype.hasExecutors=function(r){for(var e in this.executorsByZIndex_)for(var t=this.executorsByZIndex_[e],n=0,o=r.length;n<o;++n)if(r[n]in t)return!0;return!1},e.prototype.forEachFeatureAtCoordinate=function(r,e,t,n,o,i){var c=2*(n=Math.round(n))+1,$=lb(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-t,-r[0],-r[1]);this.hitDetectionContext_||(this.hitDetectionContext_=pa(c,c));var a,l=this.hitDetectionContext_;l.canvas.width!==c||l.canvas.height!==c?(l.canvas.width=c,l.canvas.height=c):l.clearRect(0,0,c,c),void 0!==this.renderBuffer_&&(a=ja(),Ld(a,r),Tg(a,e*(this.renderBuffer_+n),a));var s,p=Xm(n);function u(r){for(var e=l.getImageData(0,0,c,c).data,t=0;t<c;t++)for(var n=0;n<c;n++)if(p[t][n]&&e[4*(n*c+t)+3]>0){var $=void 0;return(!i||s!=z.IMAGE&&s!=z.TEXT||-1!==i.indexOf(r))&&($=o(r)),$||void l.clearRect(0,0,c,c)}}var E,g,f,v,d,x=Object.keys(this.executorsByZIndex_).map(Number);for(x.sort(Zb),E=x.length-1;E>=0;--E){var h=x[E].toString();for(f=this.executorsByZIndex_[h],g=Yk.length-1;g>=0;--g)if(void 0!==(v=f[s=Yk[g]])&&(d=v.executeHitDetection(l,$,t,u,a)))return d}},e.prototype.getClipCoords=function(r){var e=this.maxExtent_;if(!e)return null;var t=e[0],n=e[1],o=e[2],i=e[3],c=[t,n,t,i,o,i,o,n];return Ec(c,0,8,2,r,c),c},e.prototype.isEmpty=function(){return xg(this.executorsByZIndex_)},e.prototype.execute=function(r,e,t,n,o,i){var c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(Zb),this.maxExtent_&&(r.save(),this.clip(r,e));var $,a,l,s,p,u,E=o||Yk;for($=0,a=c.length;$<a;++$){var g=c[$].toString();for(p=this.executorsByZIndex_[g],l=0,s=E.length;l<s;++l){var f=E[l];if(void 0!==(u=p[f]))if(!i||f!=z.IMAGE&&f!=z.TEXT)u.execute(r,e,t,n);else{var v=i[g];v?v.push(u,e.slice(0)):i[g]=[u,e.slice(0)]}}}this.maxExtent_&&r.restore()},e}(bf),$k={0:[[!0]]};function cc(r,e,t){var n,o=Math.floor(r.length/2);if(e>=o)for(n=o;n<e;n++)r[n][t]=!0;else if(e<o)for(n=e+1;n<o;n++)r[n][t]=!0}function Xm(r){if(void 0!==$k[r])return $k[r];for(var e=2*r+1,t=new Array(e),n=0;n<e;n++)t[n]=new Array(e);for(var o=r,i=0,c=0;o>=i;)cc(t,r+o,r+i),cc(t,r+i,r+o),cc(t,r-i,r+o),cc(t,r-o,r+i),cc(t,r-o,r-i),cc(t,r-i,r-o),cc(t,r+i,r-o),cc(t,r+o,r-i),2*((c+=1+2*++i)-o)+1>0&&(c+=1-2*(o-=1));return $k[r]=t,t}function Tm(r,e,t,n,o,i){for(var c=Object.keys(r).map(Number).sort(Zb),$=0,a=c.length;$<a;++$)for(var l=r[c[$].toString()],s=void 0,p=0,u=l.length;p<u;){var E=l[p++];E!==s&&(s=E,i.push({items:E.declutterItems,opacity:n}));var g=l[p++];E.execute(e,g,t,o)}}Ne.getCircleArray=Xm,Ne.replayDeclutter=Tm,Ne.default=Ym;var cl={};var dl={};var AB=dl&&dl.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Pm=function(t){function e(e){var r=t.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r}return AB(e,t),e.prototype.getFeatures=function(t){return c()},e.prototype.prepareFrame=function(t){return c()},e.prototype.renderFrame=function(t,e){return c()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(o,a){var n=this.loadedTileCallback.bind(this,r,o);return t.forEachLoadedTile(e,o,a,n)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,o,a){},e.prototype.getDataAtPixel=function(t,e,r){return c()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===x.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=x.LOADED&&e!=x.ERROR&&t.addEventListener(f.CHANGE,this.boundHandleImageChange_),e==x.IDLE&&(t.load(),e=t.getState()),e==x.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==ic.READY&&t.changed()},e}(Dl);dl.default=Pm;var dA=cl&&cl.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),hl=function(t){function r(r){var e=t.call(this,r)||this;return e.container=null,e.renderedResolution,e.tempTransform_=Ia(),e.pixelTransform=Ia(),e.inversePixelTransform=Ia(),e.context=null,e.containerReused=!1,e.createTransformStringCanvas_=pa(1,1).canvas,e}return dA(r,t),r.prototype.useContainer=function(t,r,e){var o,n,a=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===a&&(s=t.firstElementChild)instanceof HTMLCanvasElement&&(n=s.getContext("2d"));if(n&&n.canvas.style.transform===r?(this.container=t,this.context=n,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(o=document.createElement("div")).className=a;var i=o.style;i.position="absolute",i.width="100%",i.height="100%";var s=(n=pa()).canvas;o.appendChild(s),(i=s.style).position="absolute",i.left="0",i.transformOrigin="top left",this.container=o,this.context=n}},r.prototype.clip=function(t,r,e){var o=r.pixelRatio,n=r.size[0]*o/2,a=r.size[1]*o/2,i=r.viewState.rotation,s=ab(e),$=cd(e),p=Tc(e),f=Nb(e);da(r.coordinateToPixelTransform,s),da(r.coordinateToPixelTransform,$),da(r.coordinateToPixelTransform,p),da(r.coordinateToPixelTransform,f),t.save(),em(t,-i,n,a),t.beginPath(),t.moveTo(s[0]*o,s[1]*o),t.lineTo($[0]*o,$[1]*o),t.lineTo(p[0]*o,p[1]*o),t.lineTo(f[0]*o,f[1]*o),t.clip(),em(t,i,n,a)},r.prototype.clipUnrotated=function(t,r,e){var o=ab(e),n=cd(e),a=Tc(e),i=Nb(e);da(r.coordinateToPixelTransform,o),da(r.coordinateToPixelTransform,n),da(r.coordinateToPixelTransform,a),da(r.coordinateToPixelTransform,i);var s=this.inversePixelTransform;da(s,o),da(s,n),da(s,a),da(s,i),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.clip()},r.prototype.dispatchRenderEvent_=function(t,r,e){var o=this.getLayer();if(o.hasListener(t)){var n=new uj(t,this.inversePixelTransform,e,r);o.dispatchEvent(n)}},r.prototype.preRender=function(t,r){this.dispatchRenderEvent_(kc.PRERENDER,t,r)},r.prototype.postRender=function(t,r){this.dispatchRenderEvent_(kc.POSTRENDER,t,r)},r.prototype.getRenderTransform=function(t,r,e,o,n,a,i){var s=n/2,$=a/2,p=o/r,f=-p,m=-t[0]+i,v=-t[1];return lb(this.tempTransform_,s,$,p,f,-e,m,v)},r.prototype.getDataAtPixel=function(t,r,e){var o,n=da(this.inversePixelTransform,t.slice()),a=this.context;try{o=a.getImageData(Math.round(n[0]),Math.round(n[1]),1,1).data}catch(i){return"SecurityError"===i.name?new Uint8Array:o}return 0===o[3]?null:o},r.prototype.createTransformString=function(t){return this.createTransformStringCanvas_.style.transform=_r(t),this.createTransformStringCanvas_.style.transform},r}(Pm);cl.default=hl;function az(e,t,r,a,i,o,n){var $=e[0]/2,c=e[1]/2,m=pa($,c);m.imageSmoothingEnabled=!1;for(var g=m.canvas,s=new Zp(m,.5,i,null,n),p=r.length,h=Math.ceil(16777216/p),l={},C=0;C<p;++C){var M=r[C],v=M.getStyleFunction()||a;if(a){var u=v(M,o);Array.isArray(u)||(u=[u]);for(var y="#"+("000000"+(C*h).toString(16)).slice(-6),d=0,I=u.length;d<I;++d){var f=u[d],x=f.clone(),S=x.getFill();S&&S.setColor(y);var D=x.getStroke();D&&D.setColor(y),x.setText(void 0);var w=f.getImage();if(w){var T=w.getImageSize(),G=document.createElement("canvas");G.width=T[0],G.height=T[1];var j=G.getContext("2d",{alpha:!1});j.fillStyle=y;var q=j.canvas;j.fillRect(0,0,q.width,q.height);var E=T?T[0]:q.width,A=T?T[1]:q.height;pa(E,A).drawImage(q,0,0),x.setImage(new zm({img:q,imgSize:T,anchor:w.getAnchor(),anchorXUnits:Ub.PIXELS,anchorYUnits:Ub.PIXELS,offset:w.getOrigin(),size:w.getSize(),opacity:w.getOpacity(),scale:w.getScale(),rotation:w.getRotation(),rotateWithView:w.getRotateWithView()}))}var N=Number(x.getZIndex());(L=l[N])||(L={},l[N]=L,L[k.POLYGON]=[],L[k.CIRCLE]=[],L[k.LINE_STRING]=[],L[k.POINT]=[]);var O=x.getGeometryFunction()(M);O&&fa(i,O.getExtent())&&L[O.getType().replace("Multi","")].push(O,x)}}}for(var R=Object.keys(l).map(Number).sort(Zb),b=(C=0,R.length);C<b;++C){var L=l[R[C]];for(var U in L){var z=L[U];for(d=0,I=z.length;d<I;d+=2){s.setStyle(z[d+1]);for(var F=0,P=t.length;F<P;++F)s.setTransform(t[F]),s.drawGeometry(z[d])}}}return m.getImageData(0,0,g.width,g.height)}function Im(e,t,r){var a=[];if(r){var i=4*(Math.round(e[0]/2)+Math.round(e[1]/2)*r.width),o=r.data[i],n=r.data[i+1],$=r.data[i+2]+256*(n+256*o),c=Math.ceil(16777216/t.length);$%c==0&&a.push(t[$/c])}return a}var kl={};var Ub={FRACTION:"fraction",PIXELS:"pixels"};var fh={};var gh={};var ol={};var Pw=ol&&ol.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Fm=function(t){function e(e,r,o,n){var p=t.call(this)||this;return p.extent=e,p.pixelRatio_=o,p.resolution=r,p.state=n,p}return Pw(e,t),e.prototype.changed=function(){this.dispatchEvent(f.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return c()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){c()},e}(dd);ol.default=Fm;var iw=gh&&gh.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ew=function(t){function e(e,n,i,r,o,a){var $=t.call(this,e,n,i,x.IDLE)||this;return $.src_=r,$.image_=new Image,null!==o&&($.image_.crossOrigin=o),$.unlisten_=null,$.state=x.IDLE,$.imageLoadFunction_=a,$}return iw(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=x.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=db(this.extent)/this.image_.height),this.state=x.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=x.IDLE&&this.state!=x.ERROR||(this.state=x.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=hh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Fm);function hh(t,e,n){var i=t;if(i.src&&Gt){var r=i.decode(),o=!0;return r.then(function(){o&&e()}).catch(function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())}),function(){o=!1}}var a=[ef(i,f.LOAD,e),ef(i,f.ERROR,n)];return function(){a.forEach(p)}}gh.listenImage=hh,gh.default=ew;var Dv=fh&&fh.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),Cm=function(t){function e(e,i,a,n,r,s){var o=t.call(this)||this;return o.hitDetectionImage_=null,o.image_=e||new Image,null!==n&&(o.image_.crossOrigin=n),o.canvas_=s?document.createElement("canvas"):null,o.color_=s,o.unlisten_=null,o.imageState_=r,o.size_=a,o.src_=i,o.tainted_,o}return Dv(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===x.LOADED){this.tainted_=!1;var t=pa(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(e){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(f.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=x.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=x.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],a=pa(e,i);a.fillRect(0,0,e,i),this.hitDetectionImage_=a.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==x.IDLE){this.imageState_=x.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=hh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,a=this.color_[0]/255,n=this.color_[1]/255,r=this.color_[2]/255,s=0,o=i.length;s<o;s+=4)i[s]*=a,i[s+1]*=n,i[s+2]*=r;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(dd);function Bm(t,e,i,a,n,r){var s=Pf.get(e,a,r);return s||(s=new Cm(t,e,i,a,n,r),Pf.set(e,a,r,s)),s}fh.get=Bm,fh.default=Cm;var Fa={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var Hu=kl&&kl.__extends||function(){var i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),zm=function(i){function t(t){var o=this,r=t||{},n=void 0!==r.opacity?r.opacity:1,e=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,c=void 0!==r.rotateWithView&&r.rotateWithView;(o=i.call(this,{opacity:n,rotation:e,scale:s,rotateWithView:c})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],o.normalizedAnchor_=null,o.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:Fa.TOP_LEFT,o.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:Ub.FRACTION,o.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:Ub.FRACTION,o.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var a=void 0!==r.img?r.img:null,h=void 0!==r.imgSize?r.imgSize:null,$=r.src;m(!(void 0!==$&&a),4),m(!a||a&&h,5),void 0!==$&&0!==$.length||!a||($=a.src||ba(a)),m(void 0!==$&&$.length>0,6);var g=void 0!==r.src?x.IDLE:x.LOADED;return o.color_=void 0!==r.color?uq(r.color):null,o.iconImage_=Bm(a,$,h,o.crossOrigin_,g,o.color_),o.offset_=void 0!==r.offset?r.offset:[0,0],o.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:Fa.TOP_LEFT,o.origin_=null,o.size_=void 0!==r.size?r.size:null,o}return Hu(t,i),t.prototype.clone=function(){return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var i=this.anchor_,t=this.getSize();if(this.anchorXUnits_==Ub.FRACTION||this.anchorYUnits_==Ub.FRACTION){if(!t)return null;i=this.anchor_.slice(),this.anchorXUnits_==Ub.FRACTION&&(i[0]*=t[0]),this.anchorYUnits_==Ub.FRACTION&&(i[1]*=t[1])}if(this.anchorOrigin_!=Fa.TOP_LEFT){if(!t)return null;i===this.anchor_&&(i=this.anchor_.slice()),this.anchorOrigin_!=Fa.TOP_RIGHT&&this.anchorOrigin_!=Fa.BOTTOM_RIGHT||(i[0]=-i[0]+t[0]),this.anchorOrigin_!=Fa.BOTTOM_LEFT&&this.anchorOrigin_!=Fa.BOTTOM_RIGHT||(i[1]=-i[1]+t[1])}return this.normalizedAnchor_=i,this.normalizedAnchor_},t.prototype.setAnchor=function(i){this.anchor_=i,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(i){return this.iconImage_.getImage(i)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(i){return this.iconImage_.getHitDetectionImage(i)},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var i=this.offset_;if(this.offsetOrigin_!=Fa.TOP_LEFT){var t=this.getSize(),o=this.iconImage_.getSize();if(!t||!o)return null;i=i.slice(),this.offsetOrigin_!=Fa.TOP_RIGHT&&this.offsetOrigin_!=Fa.BOTTOM_RIGHT||(i[0]=o[0]-t[0]-i[0]),this.offsetOrigin_!=Fa.BOTTOM_LEFT&&this.offsetOrigin_!=Fa.BOTTOM_RIGHT||(i[1]=o[1]-t[1]-i[1])}return this.origin_=i,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(i){this.iconImage_.addEventListener(f.CHANGE,i)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(i){this.iconImage_.removeEventListener(f.CHANGE,i)},t}(Kn);kl.default=zm;var _F=kk&&kk.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),wm=function(e){function t(t){var r=e.call(this,t)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=ja(),r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r}return _F(t,e),t.prototype.useContainer=function(t,r,i){i<1&&(t=null),e.prototype.useContainer.call(this,t,r,i)},t.prototype.renderFrame=function(e,t){var r=e.pixelRatio,i=e.layerStatesArray[e.layerIndex];uF(this.pixelTransform,1/r,1/r),si(this.inversePixelTransform,this.pixelTransform);var n=_r(this.pixelTransform);this.useContainer(t,n,i.opacity);var o=this.context,a=o.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&a.width>0&&(a.width=0),this.container;var $=Math.round(e.size[0]*r),d=Math.round(e.size[1]*r);a.width!=$||a.height!=d?(a.width=$,a.height=d,a.style.transform!==n&&(a.style.transform=n)):this.containerReused||o.clearRect(0,0,$,d),this.preRender(o,e);var p=e.extent,u=e.viewState,h=u.center,c=u.resolution,l=u.projection,m=u.rotation,g=l.getExtent(),F=this.getLayer().getSource(),f=!1;if(i.extent){var _=Pb(i.extent,l);(f=!tb(_,e.extent)&&fa(_,e.extent))&&this.clip(o,e,_)}var v=e.viewHints,y=!(v[O.ANIMATING]||v[O.INTERACTING]),x=this.getRenderTransform(h,c,m,r,$,d,0),R=this.getLayer().getDeclutter()?{}:null;if(s.execute(o,x,m,y,void 0,R),F.getWrapX()&&l.canWrapX()&&!tb(g,p)){for(var I=p[0],E=L(g),w=0,T=void 0;I<g[0];){T=E*--w;var j=this.getRenderTransform(h,c,m,r,$,d,T);s.execute(o,j,m,y,void 0,R),I+=E}for(w=0,I=p[2];I>g[2];){T=E*++w;var C=this.getRenderTransform(h,c,m,r,$,d,T);s.execute(o,C,m,y,void 0,R),I-=E}}if(R){var G=e.viewHints,D=!(G[O.ANIMATING]||G[O.INTERACTING]);Tm(R,o,m,1,D,e.declutterItems)}f&&o.restore(),this.postRender(o,e);var S=i.opacity,A=this.container;return S!==parseFloat(A.style.opacity)&&(A.style.opacity=1===S?"":S),this.container},t.prototype.getFeatures=function(e){return new Promise(function(t,r){this.hitDetectionImageData_||this.animatingOrInteracting_?t(Im(e,this.renderedFeatures_,this.hitDetectionImageData_)):requestAnimationFrame(function(){var r=[this.context.canvas.width,this.context.canvas.height];da(this.pixelTransform,r);var i=this.renderedCenter_,n=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,s=this.renderedExtent_,$=this.getLayer(),d=[],p=r[0]/2,u=r[1]/2;d.push(this.getRenderTransform(i,n,o,.5,p,u,0).slice());var h=$.getSource(),c=a.getExtent();if(h.getWrapX()&&a.canWrapX()&&!tb(c,s)){for(var l=s[0],m=L(c),g=0,F=void 0;l<c[0];)F=m*--g,d.push(this.getRenderTransform(i,n,o,.5,p,u,F).slice()),l+=m;for(g=0,l=s[2];l>c[2];)F=m*++g,d.push(this.getRenderTransform(i,n,o,.5,p,u,F).slice()),l-=m}this.hitDetectionImageData_=az(r,d,this.renderedFeatures_,$.getStyleFunction(),s,n,o),t(Im(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){if(this.replayGroup_){var o=t.viewState.resolution,a=t.viewState.rotation,s=this.getLayer(),$={};return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,r,function(e){var t=ba(e);if(!(t in $))return $[t]=!0,i(e,s)},s.getDeclutter()?n:null)}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var t=this.getLayer(),r=t.getSource(),i=e.viewHints[O.ANIMATING],n=e.viewHints[O.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(!this.dirty_&&!o&&i||!a&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=e.extent,$=e.viewState,d=$.projection,p=$.resolution,u=e.pixelRatio,h=t.getRevision(),c=t.getRenderBuffer(),l=t.getRenderOrder();void 0===l&&(l=iy);var m=$.center.slice(),g=Tg(s,c*p),F=$.projection.getExtent();if(r.getWrapX()&&$.projection.canWrapX()&&!tb(F,e.extent)){var f=L(F),_=Math.max(L(g)/2,f);g[0]=F[0]-_,g[2]=F[2]+_;var v=Math.floor((m[0]-F[0])/f);m[0]-=v*f}if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==h&&this.renderedRenderOrder_==l&&tb(this.renderedExtent_,g))return this.replayGroupChanged=!1,!0;this.replayGroup_&&this.replayGroup_.dispose(),this.replayGroup_=null,this.dirty_=!1;var y,x=new nv(Up(p,u),g,p,u,t.getDeclutter()),R=Eh();R?(r.loadFeatures(ae(g,d),p,R),y=Ed(R,d)):r.loadFeatures(g,p,d);var I=hy(p,u),E=function(e){var r,i=e.getStyleFunction()||t.getStyleFunction();if(i&&(r=i(e,p)),r){var n=this.renderFeature(e,I,r,x,y);this.dirty_=this.dirty_||n}}.bind(this),w=ae(g,d),T=r.getFeaturesInExtent(w);l&&T.sort(l);for(var j=0,C=T.length;j<C;++j)E(T[j]);this.renderedFeatures_=T;var G=x.finish(),D=new Ym(g,p,u,r.getOverlaps(),G,t.getRenderBuffer());return this.renderedResolution_=p,this.renderedRevision_=h,this.renderedRenderOrder_=l,this.renderedExtent_=g,this.renderedRotation_=$.rotation,this.renderedCenter_=m,this.renderedProjection_=d,this.replayGroup_=D,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,t,r,i,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=Tp(i,e,r[a],t,this.boundHandleStyleImageChange_,n)||o;else o=Tp(i,e,r,t,this.boundHandleStyleImageChange_,n);return o},t}(hl);kk.default=wm;var kF=Sj&&Sj.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),qc=function(e){function r(r){return e.call(this,r)||this}return kF(r,e),r.prototype.createRenderer=function(){return new wm(this)},r}(En);Sj.default=qc;var lh={};var Yd={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};var VE=!1;function dD(e,t,r,$){return function(o,a,s){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(o,a,s):e,!0),t.getType()==Yd.ARRAY_BUFFER&&(i.responseType="arraybuffer"),i.withCredentials=VE,i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var a=t.getType(),n=void 0;a==Yd.JSON||a==Yd.TEXT?n=i.responseText:a==Yd.XML?(n=i.responseXML)||(n=new DOMParser().parseFromString(i.responseText,"application/xml")):a==Yd.ARRAY_BUFFER&&(n=i.response),n?r.call(this,t.readFeatures(n,{extent:o,featureProjection:s}),t.readProjection(n)):$.call(this)}else $.call(this)}.bind(this),i.onerror=function(){$.call(this)}.bind(this),i.send()}}function um(e,t){return dD(e,t,function(e,t){"function"==typeof this.addFeatures&&this.addFeatures(e)},xb)}function IB(t,e){return[[-1/0,-1/0,1/0,1/0]]}var Kl={};var vB=Kl&&Kl.__extends||function(){var t=function(r,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(r,o)};return function(r,o){function e(){this.constructor=r}t(r,o),r.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),Ml=function(t){function r(r){var o=t.call(this)||this;return o.projection_=N(r.projection),o.attributions_=sm(r.attributions),o.attributionsCollapsible_=void 0===r.attributionsCollapsible||r.attributionsCollapsible,o.loading=!1,o.state_=void 0!==r.state?r.state:ic.READY,o.wrapX_=void 0!==r.wrapX&&r.wrapX,o}return vB(r,t),r.prototype.getAttributions=function(){return this.attributions_},r.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},r.prototype.getProjection=function(){return this.projection_},r.prototype.getResolutions=function(){return c()},r.prototype.getState=function(){return this.state_},r.prototype.getWrapX=function(){return this.wrapX_},r.prototype.refresh=function(){this.changed()},r.prototype.setAttributions=function(t){this.attributions_=sm(t),this.changed()},r.prototype.setState=function(t){this.state_=t,this.changed()},r}(Ka);function sm(t){return t?Array.isArray(t)?function(r){return t}:"function"==typeof t?t:function(r){return[t]}:null}Kl.default=Ml;var Ja={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};var rh=function(){function t(t){var $XGea$$interop$default=pi(Sg);this.rbush_=new $XGea$$interop$default.d(t),this.items_={}}return t.prototype.insert=function(t,r){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:r};this.rbush_.insert(i),this.items_[ba(r)]=i},t.prototype.load=function(t,r){for(var i=new Array(r.length),e=0,n=r.length;e<n;e++){var o=t[e],s=r[e],u={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[e]=u,this.items_[ba(s)]=u}this.rbush_.load(i)},t.prototype.remove=function(t){var r=ba(t),i=this.items_[r];return delete this.items_[r],null!==this.rbush_.remove(i)},t.prototype.update=function(t,r){var i=this.items_[ba(r)],e=[i.minX,i.minY,i.maxX,i.maxY];Md(e,t)||(this.remove(r),this.insert(t,r))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(r).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,r){return this.forEach_(this.getInExtent(t),r)},t.prototype.forEach_=function(t,r){for(var i,e=0,n=t.length;e<n;e++)if(i=r(t[e]))return i;return i},t.prototype.isEmpty=function(){return xg(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var r=this.rbush_.toJSON();return La(r.minX,r.minY,r.maxX,r.maxY,t)},t.prototype.concat=function(t){for(var r in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[r]=t.items_[r]},t}();var rm=lh&&lh.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$d=function(e){function t(t,r){var o=e.call(this,t)||this;return o.feature=r,o}return rm(t,e),t}(ga);lh.VectorSourceEvent=$d;var mc=function(e){function t(t){var r=this,o=t||{};(r=e.call(this,{attributions:o.attributions,projection:void 0,state:ic.READY,wrapX:void 0===o.wrapX||o.wrapX})||this).loader_=xb,r.format_=o.format,r.overlaps_=null==o.overlaps||o.overlaps,r.url_=o.url,void 0!==o.loader?r.loader_=o.loader:void 0!==r.url_&&(m(r.format_,7),r.loader_=um(r.url_,r.format_)),r.strategy_=void 0!==o.strategy?o.strategy:IB;var n,i,s=void 0===o.useSpatialIndex||o.useSpatialIndex;return r.featuresRtree_=s?new rh:null,r.loadedExtentsRtree_=new rh,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(o.features)?i=o.features:o.features&&(i=(n=o.features).getArray()),s||void 0!==n||(n=new T(i)),void 0!==i&&r.addFeaturesInternal(i),void 0!==n&&r.bindFeaturesCollection_(n),r}return rm(t,e),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var t=ba(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var o=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new $d(Ja.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[d(t,f.CHANGE,this.handleFeatureChange_,this),d(t,Lc.PROPERTYCHANGE,this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,t){var r=!0,o=t.getId();return void 0!==o&&(o.toString()in this.idIndex_?r=!1:this.idIndex_[o.toString()]=t),r&&(m(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var t=[],r=[],o=[],n=0,i=e.length;n<i;n++){var s=e[n],a=ba(s);this.addToIndex_(a,s)&&r.push(s)}n=0;for(var u=r.length;n<u;n++){s=r[n],a=ba(s);this.setupChangeEvents_(a,s);var $=s.getGeometry();if($){var l=$.getExtent();t.push(l),o.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(t,o);n=0;for(var p=r.length;n<p;n++)this.dispatchEvent(new $d(Ja.ADDFEATURE,r[n]))},t.prototype.bindFeaturesCollection_=function(e){var t=!1;this.addEventListener(Ja.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Ja.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(H.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(H.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(p)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new $d(Ja.CLEAR);this.dispatchEvent(o),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},t.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},t.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var o=t(r);if(o)return o}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),xg(this.nullGeometryFeatures_)||Ca(e,Pl(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},t.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]},t.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],o=e[1],n=null,i=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||sa;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),$=s;if((s=t.closestPointXY(r,o,i,s))<$){n=e;var l=Math.sqrt(s);a[0]=r-l,a[1]=o-l,a[2]=r+l,a[3]=o+l}}}),n},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var t=e.target,r=ba(t),o=t.getGeometry();if(o){var n=o.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(n,t)):this.featuresRtree_&&this.featuresRtree_.update(n,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var i=t.getId();if(void 0!==i){var s=i.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new $d(Ja.CHANGEFEATURE,t))},t.prototype.hasFeature=function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:ba(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&xg(this.nullGeometryFeatures_)},t.prototype.loadFeatures=function(e,t,r){var o=this.loadedExtentsRtree_,n=this.strategy_(e,t);this.loading=!1;for(var i=function(e,i){var a=n[e];o.forEachInExtent(a,function(e){return tb(e.extent,a)})||(s.loader_.call(s,a,t,r),o.insert(a,{extent:a.slice()}),s.loading=s.loader_!==xb)},s=this,a=0,u=n.length;a<u;++a)i(a)},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),e.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if(Md(r.extent,e))return t=r,!0}),t&&r.remove(t)},t.prototype.removeFeature=function(e){var t=ba(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},t.prototype.removeFeatureInternal=function(e){var t=ba(e);this.featureChangeKeys_[t].forEach(p),delete this.featureChangeKeys_[t];var r=e.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new $d(Ja.REMOVEFEATURE,e))},t.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){m(this.format_,7),this.setLoader(um(e,this.format_))},t}(Ml);lh.default=mc;var pm=le&&le.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),u={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Vl={DRAWSTART:"drawstart",DRAWEND:"drawend"},Wl=function(e){function t(t,i){var r=e.call(this,t)||this;return r.feature=i,r}return pm(t,e),t}(ga),Gy=function(e){function t(t){var i=this,r=t;r.stopDown||(r.stopDown=jc),(i=e.call(this,r)||this).shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.freehand_=!1,i.source_=t.source?t.source:null,i.features_=t.features?t.features:null,i.snapTolerance_=t.snapTolerance?t.snapTolerance:12,i.type_=t.type,i.mode_=Vz(i.type_),i.stopClick_=!!t.stopClick,i.minPoints_=t.minPoints?t.minPoints:i.mode_===u.POLYGON?3:2,i.maxPoints_=t.maxPoints?t.maxPoints:1/0,i.finishCondition_=t.finishCondition?t.finishCondition:sa;var o=t.geometryFunction;if(!o)if(i.type_===k.CIRCLE)o=function(e,t){var i=t||new hg([NaN,NaN]),r=qa(e[0],e[1]);return i.setCenterAndRadius(e[0],Math.sqrt(r)),i};else{var n,s=i.mode_;s===u.POINT?n=ob:s===u.LINE_STRING?n=Gb:s===u.POLYGON&&(n=mb),o=function(e,t){var i=t;return i?s===u.POLYGON?e[0].length?i.setCoordinates([e[0].concat([e[0][0]])]):i.setCoordinates([]):i.setCoordinates(e):i=new n(e),i}}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,i.overlay_=new qc({source:new mc({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:$v(),updateWhileInteracting:!0}),i.geometryName_=t.geometryName,i.condition_=t.condition?t.condition:qi,i.freehandCondition_,t.freehand?i.freehandCondition_=rf:i.freehandCondition_=t.freehandCondition?t.freehandCondition:uf,i.addEventListener(D(mf.ACTIVE),i.updateState_),i}return pm(t,e),t.prototype.setMap=function(t){e.prototype.setMap.call(this,t),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(t){t.originalEvent.type===f.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==u.POINT&&this.freehandCondition_(t);var i=t.type===j.POINTERMOVE,r=!0;!this.freehand_&&this.lastDragTime_&&t.type===j.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===j.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),r=!1):this.freehand_&&t.type===j.POINTERDOWN?r=!1:i?(r=t.type===j.POINTERMOVE)&&this.freehand_?r=this.handlePointerMove_(t):("mouse"==t.pointerEvent.pointerType||t.type===j.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===j.DBLCLICK&&(r=!1),e.prototype.handleEvent.call(this,t)&&r},t.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Hb(j.POINTERMOVE,e.map,e.pointerEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},t.prototype.handleUpEvent=function(e){var t=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);var i=this.mode_===u.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e):(this.startDrawing_(e),this.mode_===u.POINT&&this.finishDrawing()),t=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!t&&this.stopClick_&&e.stopPropagation(),t},t.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,r=t[0]-i[0],o=t[1]-i[1],n=r*r+o*o;if(this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},t.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===u.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===u.POLYGON){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var n=e.map,s=0,a=r.length;s<a;s++){var h=r[s],$=n.getPixelFromCoordinate(h),p=e.pixel,_=p[0]-$[0],d=p[1]-$[1],c=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(_*_+d*d)<=c){this.finishCoordinate_=h;break}}}return t},t.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new ra(new ob(t)),this.updateSketchFeatures_())},t.prototype.startDrawing_=function(e){var t=e.coordinate;this.finishCoordinate_=t,this.mode_===u.POINT?this.sketchCoords_=t.slice():this.mode_===u.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ra(new Gb(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new ra,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Wl(Vl.DRAWSTART,this.sketchFeature_))},t.prototype.modifyDrawing_=function(e){var t,i,r,o=e.coordinate,n=this.sketchFeature_.getGeometry();(this.mode_===u.POINT?i=this.sketchCoords_:this.mode_===u.POLYGON?(i=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(e)&&(o=this.finishCoordinate_.slice())):i=(t=this.sketchCoords_)[t.length-1],i[0]=o[0],i[1]=o[1],this.geometryFunction_(this.sketchCoords_,n),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(o);if(n.getType()==k.POLYGON&&this.mode_!==u.POLYGON){this.sketchLine_||(this.sketchLine_=new ra);var s=n.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),r.changed()):(r=new Gb(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(e){var t,i,r=e.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===u.LINE_STRING?(this.finishCoordinate_=r.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(r.slice()),this.geometryFunction_(i,o)):this.mode_===u.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(r.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),t&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry();this.mode_===u.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===u.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,i=e.getGeometry();this.mode_===u.LINE_STRING?(t.pop(),this.geometryFunction_(t,i)):this.mode_===u.POLYGON&&(t[0].pop(),this.geometryFunction_(t,i),t=i.getCoordinates()),this.type_===k.MULTI_POINT?e.setGeometry(new Nj([t])):this.type_===k.MULTI_LINE_STRING?e.setGeometry(new Qn([t])):this.type_===k.MULTI_POLYGON&&e.setGeometry(new Ln([t])),this.dispatchEvent(new Wl(Vl.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),e},t.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Wl(Vl.DRAWSTART,this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},t.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing_(),this.overlay_.setMap(t?e:null)},t}(Ea);function $v(){var e=Ce();return function(t,i){return e[t.getGeometry().getType()]}}function vI(e,t){return function(i,r){var o=i[0],n=i[1],s=Math.sqrt(qa(o,n)),a=r||bl(new hg(o),e),h=t;if(!t){var $=n[0]-o[0],p=n[1]-o[1];h=Math.atan(p/$)-($<0?Math.PI:0)}return il(a,o,s,h),a}}function nA(){return function(e,t){var i=F(e),r=[[Nb(i),Tc(i),cd(i),ab(i),Nb(i)]],o=t;return o?o.setCoordinates(r):o=new mb(r),o}}function Vz(e){var t;return e===k.POINT||e===k.MULTI_POINT?t=u.POINT:e===k.LINE_STRING||e===k.MULTI_LINE_STRING?t=u.LINE_STRING:e===k.POLYGON||e===k.MULTI_POLYGON?t=u.POLYGON:e===k.CIRCLE&&(t=u.CIRCLE),t}le.createRegularPolygon=vI,le.createBox=nA,le.default=Gy;var am={};var km=am&&am.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),WI={EXTENTCHANGED:"extentchanged"},vz=function(e){function t(t){var r=e.call(this,WI.EXTENTCHANGED)||this;return r.extent=t,r}return km(t,e),t}(ga),cC=function(e){function t(t){var r=this,n=t||{};return(r=e.call(this,n)||this).extent_=null,r.pointerHandler_=null,r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.snappedToVertex_=!1,r.extentFeature_=null,r.vertexFeature_=null,t||(t={}),r.extentOverlay_=new qc({source:new mc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:Zt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.vertexOverlay_=new qc({source:new mc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:LE(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&r.setExtent(t.extent),r}return km(t,e),t.prototype.snapToVertex_=function(e,t){var r=t.getCoordinateFromPixelInternal(e),n=this.getExtentInternal();if(n){var o=sy(n);o.sort(function(e,t){return Cg(r,e)-Cg(r,t)});var i=o[0],a=ng(r,i),$=t.getPixelFromCoordinateInternal(a);if(yg(e,$)<=this.pixelTolerance_){var l=t.getPixelFromCoordinateInternal(i[0]),p=t.getPixelFromCoordinateInternal(i[1]),u=qa($,l),s=qa($,p),c=Math.sqrt(Math.min(u,s));return this.snappedToVertex_=c<=this.pixelTolerance_,this.snappedToVertex_&&(a=u>s?i[1]:i[0]),a}}return null},t.prototype.handlePointerMove_=function(e){var t=e.pixel,r=e.map,n=this.snapToVertex_(t,r);n||(n=r.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(n)},t.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;return t?e?t.setGeometry(lc(e)):t.setGeometry(void 0):(t=e?new ra(lc(e)):new ra({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},t.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new ra(new ob(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t));return t},t.prototype.handleEvent=function(t){return!t.pointerEvent||(t.type!=j.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),e.prototype.handleEvent.call(this,t),!1)},t.prototype.handleDownEvent=function(e){var t=e.pixel,r=e.map,n=this.getExtentInternal(),o=this.snapToVertex_(t,r),i=function(e){var t=null,r=null;return e[0]==n[0]?t=n[2]:e[0]==n[2]&&(t=n[0]),e[1]==n[1]?r=n[3]:e[1]==n[3]&&(r=n[1]),null!==t&&null!==r?[t,r]:null};if(o&&n){var a=o[0]==n[0]||o[0]==n[2]?o[0]:null,$=o[1]==n[1]||o[1]==n[3]?o[1]:null;null!==a&&null!==$?this.pointerHandler_=aq(i(o)):null!==a?this.pointerHandler_=gm(i([a,n[1]]),i([a,n[3]])):null!==$&&(this.pointerHandler_=gm(i([n[0],$]),i([n[2],$])))}else o=r.getCoordinateFromPixelInternal(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=aq(o);return!0},t.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0},t.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==Ki(t)||this.setExtent(null),!1},t.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getExtent=function(){return ae(this.getExtentInternal(),this.getMap().getView().getProjection())},t.prototype.getExtentInternal=function(){return this.extent_},t.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new vz(this.extent_))},t}(Ea);function Zt(){var e=Ce();return function(t,r){return e[k.POLYGON]}}function LE(){var e=Ce();return function(t,r){return e[k.POINT]}}function aq(e){return function(t){return F([e,t])}}function gm(e,t){return e[0]==t[0]?function(r){return F([e,[r[0],t[1]]])}:e[1]==t[1]?function(r){return F([e,[t[0],r[1]]])}:null}function sy(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}am.default=cC;var Ah={};var hm=Ah&&Ah.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),im=0,jf=1,jm=[0,0,0,0],jd=[],_l={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},xh=function(e){function t(t,r,o){var i=e.call(this,t)||this;return i.features=r,i.mapBrowserEvent=o,i}return hm(t,e),t}(ga);Ah.ModifyEvent=xh;var sA=function(e){function t(t){var r,o=e.call(this,t)||this;if(o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=t.condition?t.condition:Qo,o.defaultDeleteCondition_=function(e){return Cu(e)&&Vo(e)},o.deleteCondition_=t.deleteCondition?t.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:rf,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.modified_=!1,o.rBush_=new rh,o.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new qc({source:new mc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:OF(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,t.source?(o.source_=t.source,r=new T(o.source_.getFeatures()),o.source_.addEventListener(Ja.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(Ja.REMOVEFEATURE,o.handleSourceRemove_.bind(o))):r=t.features,!r)throw new Error("The modify interaction requires features or a source");return o.features_=r,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(H.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(H.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o}return hm(t,e),t.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),e.addEventListener(f.CHANGE,this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new xh(_l.MODIFYSTART,this.features_,e)))},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(f.CHANGE,this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var o=r.length-1;o>=0;--o){for(var i=r[o],n=this.dragSegments_.length-1;n>=0;--n)this.dragSegments_[n][0]===i&&this.dragSegments_.splice(n,1);t.remove(i)}},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},t.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),o={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),o)},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o){var n=r[o],a={feature:e,geometry:t,depth:[o],index:o,segment:[n,n]};this.rBush_.insert(t.getExtent(),a)}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length-1;o<i;++o){var n=r.slice(o,o+2),a={feature:e,geometry:t,index:o,segment:n};this.rBush_.insert(F(n),a)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),p={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert(F($),p)}},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),p={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert(F($),p)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length;a<s;++a)for(var $=n[a],p=0,u=$.length-1;p<u;++p){var d=$.slice(p,p+2),m={feature:e,geometry:t,depth:[a,o],index:p,segment:d};this.rBush_.insert(F(d),m)}},t.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),o={feature:e,geometry:t,index:im,segment:[r,r]},i={feature:e,geometry:t,index:jf,segment:[r,r]},n=[o,i];o.featureSegments=n,i.featureSegments=n,this.rBush_.insert(Mf(r),o),this.rBush_.insert(t.getExtent(),i)},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),o=0;o<r.length;++o){var i=r[o];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}},t.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new ra(new ob(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},t.prototype.handleEvent=function(t){return!t.pointerEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=j.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(r=!(t.type!=j.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==j.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!r);var r},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,r=0,o=this.dragSegments_.length;r<o;++r){for(var i=this.dragSegments_[r],n=i[0],a=n.depth,s=n.geometry,$=void 0,p=n.segment,u=i[1];t.length<s.getStride();)t.push(p[u][t.length]);switch(s.getType()){case k.POINT:$=t,p[0]=t,p[1]=t;break;case k.MULTI_POINT:($=s.getCoordinates())[n.index]=t,p[0]=t,p[1]=t;break;case k.LINE_STRING:($=s.getCoordinates())[n.index+u]=t,p[u]=t;break;case k.MULTI_LINE_STRING:case k.POLYGON:($=s.getCoordinates())[a[0]][n.index+u]=t,p[u]=t;break;case k.MULTI_POLYGON:($=s.getCoordinates())[a[1]][a[0]][n.index+u]=t,p[u]=t;break;case k.CIRCLE:p[0]=t,p[1]=t,n.index===im?(this.changingFeature_=!0,s.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,s.setRadius(yg(s.getCenter(),t)),this.changingFeature_=!1);}$&&this.setGeometryCoordinates_(s,$)}this.createOrUpdateVertexFeature_(t)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;this.handlePointerAtPixel_(e.pixel,e.map);var t=e.coordinate;this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var o=e.map.getView().getProjection(),i=[],n=r.getGeometry().getCoordinates(),a=F([n]),s=this.rBush_.getInExtent(a),$={};s.sort(zA);for(var p=0,u=s.length;p<u;++p){var d=s[p],m=d.segment,x=ba(d.feature),g=d.depth;if(g&&(x+="-"+g.join("-")),$[x]||($[x]=new Array(2)),d.geometry.getType()!==k.CIRCLE||d.index!==jf){if(!$a(m[0],n)||$[x][0]){if(!$a(m[1],n)||$[x][1])ba(m)in this.vertexSegments_&&!$[x][0]&&!$[x][1]&&this.insertVertexCondition_(e)&&i.push([d,n]);else{if((d.geometry.getType()===k.LINE_STRING||d.geometry.getType()===k.MULTI_LINE_STRING)&&$[x][0]&&0===$[x][0].index)continue;this.dragSegments_.push([d,1]),$[x][1]=d}}else this.dragSegments_.push([d,0]),$[x][0]=d;}else{var h=mm(t,d,o);$a(h,n)&&!$[x][0]&&(this.dragSegments_.push([d,0]),$[x][0]=d)}}i.length&&this.willModifyFeatures_(e);for(var l=i.length-1;l>=0;--l)this.insertVertex_.apply(this,i[l])}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],o=r.geometry;if(o.getType()===k.CIRCLE){var i=o.getCenter(),n=r.featureSegments[0],a=r.featureSegments[1];n.segment[0]=i,n.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update(Mf(i),n),this.rBush_.update(o.getExtent(),a)}else this.rBush_.update(F(r.segment),r)}return this.modified_&&(this.dispatchEvent(new xh(_l.MODIFYEND,this.features_,e)),this.modified_=!1),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},t.prototype.handlePointerAtPixel_=function(e,t){var r=t.getCoordinateFromPixel(e),o=t.getView().getProjection(),i=Pb(Mf(r,jm),o),n=t.getView().getResolution()*this.pixelTolerance_,a=ae(Tg(i,n,jm),o),s=this.rBush_.getInExtent(a);if(s.length>0){s.sort(function(e,t){return lm(r,e,o)-lm(r,t,o)});var $=s[0],p=$.segment,u=mm(r,$,o),d=t.getPixelFromCoordinate(u),m=yg(e,d);if(m<=this.pixelTolerance_){var x={};if($.geometry.getType()===k.CIRCLE&&$.index===jf)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var g=t.getPixelFromCoordinate(p[0]),h=t.getPixelFromCoordinate(p[1]),l=qa(d,g),_=qa(d,h);m=Math.sqrt(Math.min(l,_)),this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_&&(u=l>_?p[1]:p[0]),this.createOrUpdateVertexFeature_(u);for(var c=1,v=s.length;c<v;++c){var y=s[c].segment;if(!($a(p[0],y[0])&&$a(p[1],y[1])||$a(p[0],y[1])&&$a(p[1],y[0])))break;x[ba(y)]=!0}}return x[ba(p)]=!0,void(this.vertexSegments_=x)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,t){for(var r,o=e.segment,i=e.feature,n=e.geometry,a=e.depth,s=e.index;t.length<n.getStride();)t.push(0);switch(n.getType()){case k.MULTI_LINE_STRING:case k.POLYGON:(r=n.getCoordinates())[a[0]].splice(s+1,0,t);break;case k.MULTI_POLYGON:(r=n.getCoordinates())[a[1]][a[0]].splice(s+1,0,t);break;case k.LINE_STRING:(r=n.getCoordinates()).splice(s+1,0,t);break;default:return;}this.setGeometryCoordinates_(n,r);var $=this.rBush_;$.remove(e),this.updateSegmentIndices_(n,s,a,1);var p={segment:[o[0],t],feature:i,geometry:n,depth:a,index:s};$.insert(F(p.segment),p),this.dragSegments_.push([p,1]);var u={segment:[t,o[1]],feature:i,geometry:n,depth:a,index:s+1};$.insert(F(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=j.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e);var t=this.removeVertex_();return this.dispatchEvent(new xh(_l.MODIFYEND,this.features_,e)),this.modified_=!1,t}return!1},t.prototype.removeVertex_=function(){var e,t,r,o,i,n,a,s,$,p,u,d=this.dragSegments_,m={},x=!1;for(i=d.length-1;i>=0;--i)p=(r=d[i])[0],u=ba(p.feature),p.depth&&(u+="-"+p.depth.join("-")),u in m||(m[u]={}),0===r[1]?(m[u].right=p,m[u].index=p.index):1==r[1]&&(m[u].left=p,m[u].index=p.index+1);for(u in m){switch($=m[u].right,a=m[u].left,(s=(n=m[u].index)-1)<0&&(s=0),e=t=(o=(p=void 0!==a?a:$).geometry).getCoordinates(),x=!1,o.getType()){case k.MULTI_LINE_STRING:t[p.depth[0]].length>2&&(t[p.depth[0]].splice(n,1),x=!0);break;case k.LINE_STRING:t.length>2&&(t.splice(n,1),x=!0);break;case k.MULTI_POLYGON:e=e[p.depth[1]];case k.POLYGON:(e=e[p.depth[0]]).length>4&&(n==e.length-1&&(n=0),e.splice(n,1),x=!0,0===n&&(e.pop(),e.push(e[0]),s=e.length-1));}if(x){this.setGeometryCoordinates_(o,t);var g=[];if(void 0!==a&&(this.rBush_.remove(a),g.push(a.segment[0])),void 0!==$&&(this.rBush_.remove($),g.push($.segment[1])),void 0!==a&&void 0!==$){var h={depth:p.depth,feature:p.feature,geometry:p.geometry,index:s,segment:g};this.rBush_.insert(F(h.segment),h)}this.updateSegmentIndices_(o,n,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.length=0}}return x},t.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,t,r,o){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||Xd(i.depth,r))&&i.index>t&&(i.index+=o)})},t}(Ea);function zA(e,t){return e.index-t.index}function lm(e,t,r){var o=t.geometry;if(o.getType()===k.CIRCLE){var i=o;if(t.index===jf){var n=qa(i.getCenter(),e),a=Math.sqrt(n)-i.getRadius();return a*a}}var s=J(e,r);return jd[0]=J(t.segment[0],r),jd[1]=J(t.segment[1],r),Cg(s,jd)}function mm(e,t,r){var o=t.geometry;if(o.getType()===k.CIRCLE&&t.index===jf)return o.getClosestPoint(e);var i=J(e,r);return jd[0]=J(t.segment[0],r),jd[1]=J(t.segment[1],r),ke(ng(i,jd),r)}function OF(){var e=Ce();return function(t,r){return e[k.POINT]}}Ah.default=sA;var Zl={};var nm=Zl&&Zl.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),XI={SELECT:"select"},ZI=function(e){function t(t,r,i,o){var n=e.call(this,t)||this;return n.selected=r,n.deselected=i,n.mapBrowserEvent=o,n}return nm(t,e),t}(ga),Nu=function(e){function t(t){var r,i=e.call(this,{handleEvent:pv})||this,o=t||{};if(i.condition_=o.condition?o.condition:Vo,i.addCondition_=o.addCondition?o.addCondition:Wo,i.removeCondition_=o.removeCondition?o.removeCondition:Wo,i.toggleCondition_=o.toggleCondition?o.toggleCondition:uf,i.multi_=!!o.multi&&o.multi,i.filter_=o.filter?o.filter:sa,i.hitTolerance_=o.hitTolerance?o.hitTolerance:0,i.style_=void 0!==o.style?o.style:Sv(),i.featureStyleAssociation_={},i.features_=o.features||new T,o.layers){if("function"==typeof o.layers)r=o.layers;else{var n=o.layers;r=function(e){return $e(n,e)}}}else r=sa;i.layerFilter_=r,i.featureLayerAssociation_={};var a=i.getFeatures();return a.addEventListener(H.ADD,i.addFeature_.bind(i)),a.addEventListener(H.REMOVE,i.removeFeature_.bind(i)),i}return nm(t,e),t.prototype.addFeatureLayerAssociation_=function(e,t){this.featureLayerAssociation_[ba(e)]=t},t.prototype.getFeatures=function(){return this.features_},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(e){return this.featureLayerAssociation_[ba(e)]},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(t){this.getMap()&&this.style_&&this.features_.forEach(this.removeSelectedStyle_.bind(this)),e.prototype.setMap.call(this,t),t&&this.style_&&this.features_.forEach(this.giveSelectedStyle_.bind(this))},t.prototype.addFeature_=function(e){var t=e.element;this.style_&&this.giveSelectedStyle_(t)},t.prototype.removeFeature_=function(e){var t=e.element;this.style_&&this.removeSelectedStyle_(t)},t.prototype.giveSelectedStyle_=function(e){var t=ba(e);this.featureStyleAssociation_[t]=e.getStyle(),e.setStyle(this.style_)},t.prototype.removeSelectedStyle_=function(e){var t=ba(e);e.setStyle(this.featureStyleAssociation_[t]),delete this.featureStyleAssociation_[t]},t.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[ba(e)]},t}($b);function pv(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),o=!t&&!r&&!i,n=e.map,a=this.getFeatures(),$=[],s=[];if(o){Zd(this.featureLayerAssociation_),n.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return s.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var c=a.item(l),u=s.indexOf(c);u>-1?s.splice(u,1):(a.remove(c),$.push(c))}0!==s.length&&a.extend(s)}else{n.forEachFeatureAtPixel(e.pixel,function(e,o){if(this.filter_(e,o))return!t&&!i||$e(a.getArray(),e)?(r||i)&&$e(a.getArray(),e)&&($.push(e),this.removeFeatureLayerAssociation_(e)):(s.push(e),this.addFeatureLayerAssociation_(e,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=$.length-1;p>=0;--p)a.remove($[p]);a.extend(s)}return(s.length>0||$.length>0)&&this.dispatchEvent(new ZI(XI.SELECT,s,$,e)),!0}function Sv(){var e=Ce();return Ca(e[k.POLYGON],e[k.LINE_STRING]),Ca(e[k.GEOMETRY_COLLECTION],e[k.LINE_STRING]),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}Zl.default=Nu;var Yl={};var rw=Yl&&Yl.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function om(e){return e.feature?e.feature:e.element?e.element:void 0}var _d=[],Zy=function(e){function t(t){var r=this,n=t||{},o=n;return o.handleDownEvent||(o.handleDownEvent=sa),o.stopDown||(o.stopDown=jc),(r=e.call(this,o)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new rh,r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r)},r}return rw(t,e),t.prototype.addFeature=function(e,t){var r=void 0===t||t,n=ba(e),o=e.getGeometry();if(o){var i=this.SEGMENT_WRITERS_[o.getType()];i&&(this.indexedFeaturesExtents_[n]=o.getExtent(ja()),i(e,o))}r&&(this.featureChangeListenerKeys_[n]=d(e,f.CHANGE,this.handleFeatureChange_,this))},t.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},t.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},t.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},t.prototype.handleEvent=function(t){var r=this.snapTo(t.pixel,t.coordinate,t.map);return r.snapped&&(t.coordinate=r.vertex.slice(0,2),t.pixel=r.vertexPixel),e.prototype.handleEvent.call(this,t)},t.prototype.handleFeatureAdd_=function(e){var t=om(e);this.addFeature(t)},t.prototype.handleFeatureRemove_=function(e){var t=om(e);this.removeFeature(t)},t.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=ba(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)},t.prototype.handleUpEvent=function(e){var t=Pl(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},t.prototype.removeFeature=function(e,t){var r=void 0===t||t,n=ba(e),o=this.indexedFeaturesExtents_[n];if(o){var i=this.rBush_,a=[];i.forEachInExtent(o,function(t){e===t.feature&&a.push(t)});for(var s=a.length-1;s>=0;--s)i.remove(a[s])}r&&(p(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},t.prototype.setMap=function(t){var r=this.getMap(),n=this.featuresListenerKeys_,o=this.getFeatures_();r&&(n.forEach(p),n.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),e.prototype.setMap.call(this,t),t&&(this.features_?n.push(d(this.features_,H.ADD,this.handleFeatureAdd_,this),d(this.features_,H.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(d(this.source_,Ja.ADDFEATURE,this.handleFeatureAdd_,this),d(this.source_,Ja.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},t.prototype.snapTo=function(e,t,r){var n=r.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=r.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),i=F([n,o]),a=this.rBush_.getInExtent(i);this.vertex_&&!this.edge_&&(a=a.filter(function(e){return e.feature.getGeometry().getType()!==k.CIRCLE}));var s=!1,$=null,u=null;if(0===a.length)return{snapped:s,vertex:$,vertexPixel:u};for(var p,l=r.getView().getProjection(),h=J(t,l),m=1/0,d=0;d<a.length;++d){var c=a[d];_d[0]=J(c.segment[0],l),_d[1]=J(c.segment[1],l);var g=Cg(h,_d);g<m&&(p=c,m=g)}var G=p.segment;if(this.vertex_&&!this.edge_){var _=r.getPixelFromCoordinate(G[0]),v=r.getPixelFromCoordinate(G[1]),f=qa(e,_),y=qa(e,v);Math.sqrt(Math.min(f,y))<=this.pixelTolerance_&&(s=!0,$=f>y?G[1]:G[0],u=r.getPixelFromCoordinate($))}else if(this.edge_){var N=p.feature.getGeometry().getType()===k.CIRCLE;if(N?$=RH(t,p.feature.getGeometry()):(_d[0]=J(G[0],l),_d[1]=J(G[1],l),$=ke(ng(h,_d),l)),u=r.getPixelFromCoordinate($),yg(e,u)<=this.pixelTolerance_&&(s=!0,this.vertex_&&!N)){_=r.getPixelFromCoordinate(G[0]),v=r.getPixelFromCoordinate(G[1]),f=qa(u,_),y=qa(u,v);Math.sqrt(Math.min(f,y))<=this.pixelTolerance_&&($=f>y?G[1]:G[0],u=r.getPixelFromCoordinate($))}}return s&&(u=[Math.round(u[0]),Math.round(u[1])]),{snapped:s,vertex:$,vertexPixel:u}},t.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},t.prototype.writeCircleGeometry_=function(e,t){for(var r=bl(t).getCoordinates()[0],n=0,o=r.length-1;n<o;++n){var i=r.slice(n,n+2),a={feature:e,segment:i};this.rBush_.insert(F(i),a)}},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var o=this.SEGMENT_WRITERS_[r[n].getType()];o&&o(e,r[n])}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length-1;n<o;++n){var i=r.slice(n,n+2),a={feature:e,segment:i};this.rBush_.insert(F(i),a)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length-1;a<s;++a){var $=i.slice(a,a+2),u={feature:e,segment:$};this.rBush_.insert(F($),u)}},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n){var i=r[n],a={feature:e,segment:[i,i]};this.rBush_.insert(t.getExtent(),a)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length;a<s;++a)for(var $=i[a],u=0,p=$.length-1;u<p;++u){var l=$.slice(u,u+2),h={feature:e,segment:l};this.rBush_.insert(F(l),h)}},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),n={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length-1;a<s;++a){var $=i.slice(a,a+2),u={feature:e,segment:$};this.rBush_.insert(F($),u)}},t}(Ea);Yl.default=Zy;var uh={};var qm=uh&&uh.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),Ql={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},ph=function(t){function e(e,r,a,n,o){var i=t.call(this,e)||this;return i.features=r,i.coordinate=a,i.startCoordinate=n,i.mapBrowserEvent=o,i}return qm(e,t),e}(ga);uh.TranslateEvent=ph;var vA=function(t){function e(e){var r,a=this,n=e||{};if((a=t.call(this,n)||this).lastCoordinate_=null,a.startCoordinate_=null,a.features_=void 0!==n.features?n.features:null,n.layers){if("function"==typeof n.layers)r=n.layers;else{var o=n.layers;r=function(t){return $e(o,t)}}}else r=sa;return a.layerFilter_=r,a.filter_=n.filter?n.filter:sa,a.hitTolerance_=n.hitTolerance?n.hitTolerance:0,a.lastFeature_=null,a.addEventListener(D(mf.ACTIVE),a.handleActiveChanged_),a}return qm(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new T([this.lastFeature_]);return this.dispatchEvent(new ph(Ql.TRANSLATESTART,e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new T([this.lastFeature_]);return this.dispatchEvent(new ph(Ql.TRANSLATEEND,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],a=e[1]-this.lastCoordinate_[1],n=this.features_||new T([this.lastFeature_]);n.forEach(function(t){var e=t.getGeometry();e.translate(r,a),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new ph(Ql.TRANSLATING,n,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||$e(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(Ea);uh.default=vA;var yA=ok&&ok.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(t,e)};return function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),tm=function(r){function t(t){return(t=la({},t)).controls||(t.controls=pC()),t.interactions||(t.interactions=_u()),r.call(this,t)||this}return yA(t,r),t.prototype.createRenderer=function(){return new $l(this)},t}(Zh);ok.default=tm;var eB=.5;var qb=!0;var Jl={};var Il={};var nh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var gD=Il&&Il.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),vm=function(r){function e(e){var t=this,o=e||{},n=la({},o);return delete n.preload,delete n.useInterimTilesOnError,(t=r.call(this,n)||this).setPreload(void 0!==o.preload?o.preload:0),t.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),t}return gD(e,r),e.prototype.getPreload=function(){return this.get(nh.PRELOAD)},e.prototype.setPreload=function(r){this.set(nh.PRELOAD,r)},e.prototype.getUseInterimTilesOnError=function(){return this.get(nh.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(r){this.set(nh.USE_INTERIM_TILES_ON_ERROR,r)},e}(xi);Il.default=vm;var Gl={};var Cl=function(){function t(t,i,n,e){this.minX=t,this.maxX=i,this.minY=n,this.maxY=e}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function Bl(t,i,n,e,m){return void 0!==m?(m.minX=t,m.maxX=i,m.minY=n,m.maxY=e,m):new Cl(t,i,n,e)}var YF=Gl&&Gl.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Al=function(e){function t(t){var r=e.call(this,t)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=ja(),r.tmpTileRange_=new Cl(0,0,0,0),r}return YF(t,e),t.prototype.isDrawableTile=function(e){var t=this.getLayer(),r=e.getState(),i=t.getUseInterimTilesOnError();return r==aa.LOADED||r==aa.EMPTY||r==aa.ERROR&&!i},t.prototype.getTile=function(e,t,r,i){var o=i.pixelRatio,n=i.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(e,t,r,o,n);return s.getState()==aa.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(aa.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},t.prototype.loadedTileCallback=function(t,r,i){return!!this.isDrawableTile(i)&&e.prototype.loadedTileCallback.call(this,t,r,i)},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,t){var r=e.layerStatesArray[e.layerIndex],i=e.viewState,o=i.projection,n=i.resolution,a=i.center,s=i.rotation,l=e.pixelRatio,h=this.getLayer(),p=h.getSource(),$=p.getRevision(),d=p.getTileGridForProjection(o),u=d.getZForResolution(n,p.zDirection),c=d.getResolution(u),g=e.extent,T=r.extent&&Pb(r.extent,o);T&&(g=De(g,Pb(r.extent,o)));var m=p.getTilePixelRatio(l),f=Math.round(e.size[0]*m),v=Math.round(e.size[1]*m);if(s){var x=Math.round(Math.sqrt(f*f+v*v));f=x,v=x}var M=c*f/2/m,k=c*v/2/m,y=[a[0]-M,a[1]-k,a[0]+M,a[1]+k],R=d.getTileRangeForExtentAndZ(g,u),_={};_[u]={};var w=this.createLoadedTileFinder(p,o,_),C=this.tmpExtent,S=this.tmpTileRange_;this.newTiles_=!1;for(var E=R.minX;E<=R.maxX;++E)for(var j=R.minY;j<=R.maxY;++j){var P=this.getTile(u,E,j,e);if(this.isDrawableTile(P)){var b=ba(this);if(P.getState()==aa.LOADED){_[u][P.tileCoord.toString()]=P;var O=P.inTransition(b);this.newTiles_||!O&&-1!==this.renderedTiles.indexOf(P)||(this.newTiles_=!0)}if(1===P.getAlpha(b,e.time))continue}var I=d.getTileCoordChildTileRange(P.tileCoord,S,C),U=!1;I&&(U=w(u+1,I)),U||d.forEachTileCoordParentTileRange(P.tileCoord,w,S,C)}var A=c/n;lb(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/m,1/m,s,-f/2,-v/2);var L=this.createTransformString(this.pixelTransform);this.useContainer(t,L,r.opacity);var q=this.context,D=q.canvas;si(this.inversePixelTransform,this.pixelTransform),lb(this.tempTransform_,f/2,v/2,A,A,0,-f/2,-v/2),D.width!=f||D.height!=v?(D.width=f,D.height=v):this.containerReused||q.clearRect(0,0,f,v),T&&this.clipUnrotated(q,e,T),this.preRender(q,e),this.renderedTiles.length=0;var F,z,Y,Z=Object.keys(_).map(Number);Z.sort(Zb),1!==r.opacity||this.containerReused&&!p.getOpaque(e.viewState.projection)?(F=[],z=[]):Z=Z.reverse();for(var K=Z.length-1;K>=0;--K){var X=Z[K],G=p.getTilePixelSize(X,l,o),Q=d.getResolution(X)/c,W=G[0]*Q*A,N=G[1]*Q*A,B=d.getTileCoordForCoordAndZ(ab(y),X),H=d.getTileCoordExtent(B),J=da(this.tempTransform_,[m*(H[0]-y[0])/c,m*(y[3]-H[3])/c]),V=m*p.getGutterForProjection(o),ee=_[X];for(var te in ee){var re=(P=ee[te]).tileCoord,ie=J[0]-(B[1]-re[1])*W,oe=Math.round(ie+W),ne=J[1]-(B[2]-re[2])*N,ae=Math.round(ne+N),se=oe-(E=Math.round(ie)),le=ae-(j=Math.round(ne)),he=u===X;if(!(O=he&&1!==P.getAlpha(ba(this),e.time)))if(F){q.save(),Y=[E,j,E+se,j,E+se,j+le,E,j+le];for(var pe=0,$e=F.length;pe<$e;++pe)if(u!==X&&X<z[pe]){var de=F[pe];q.beginPath(),q.moveTo(Y[0],Y[1]),q.lineTo(Y[2],Y[3]),q.lineTo(Y[4],Y[5]),q.lineTo(Y[6],Y[7]),q.moveTo(de[6],de[7]),q.lineTo(de[4],de[5]),q.lineTo(de[2],de[3]),q.lineTo(de[0],de[1]),q.clip()}F.push(Y),z.push(X)}else q.clearRect(E,j,se,le);this.drawTileImage(P,e,E,j,se,le,V,he,r.opacity),F&&!O&&q.restore(),this.renderedTiles.push(P),this.updateUsedTiles(e.usedTiles,p,P)}}return this.renderedRevision=$,this.renderedResolution=c,this.extentChanged=!this.renderedExtent_||!Md(this.renderedExtent_,y),this.renderedExtent_=y,this.renderedPixelRatio=l,this.renderedProjection=o,this.manageTilePyramid(e,p,d,l,o,g,u,h.getPreload()),this.updateCacheSize_(e,p),this.scheduleExpireCache(e,p),this.postRender(q,e),r.extent&&q.restore(),L!==D.style.transform&&(D.style.transform=L),this.container},t.prototype.drawTileImage=function(e,t,r,i,o,n,a,s,l){var h=this.getTileImage(e);if(h){var p=ba(this),$=s?e.getAlpha(p,t.time):1,d=l*$,u=d!==this.context.globalAlpha;u&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(h,a,a,h.width-2*a,h.height-2*a,r,i,o,n),u&&this.context.restore(),1!==$?t.animate=!0:s&&e.endTransition(p)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var i=ba(e);i in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(r)}},t.prototype.updateUsedTiles=function(e,t,r){var i=ba(t);i in e||(e[i]={}),e[i][r.getKey()]=!0},t.prototype.updateCacheSize_=function(e,t){var r=ba(t),i=0;r in e.usedTiles&&(i+=Object.keys(e.usedTiles[r]).length),r in e.wantedTiles&&(i+=Object.keys(e.wantedTiles[r]).length);var o=t.tileCache;o.highWaterMark<i&&(o.highWaterMark=i)},t.prototype.manageTilePyramid=function(e,t,r,i,o,n,a,s,l){var h=ba(t);h in e.wantedTiles||(e.wantedTiles[h]={});var p,$,d,u,c,g,T=e.wantedTiles[h],m=e.tileQueue;for(g=r.getMinZoom();g<=a;++g)for($=r.getTileRangeForExtentAndZ(n,g,$),d=r.getResolution(g),u=$.minX;u<=$.maxX;++u)for(c=$.minY;c<=$.maxY;++c)a-g<=s?((p=t.getTile(g,u,c,i,o)).getState()==aa.IDLE&&(T[p.getKey()]=!0,m.isKeyQueued(p.getKey())||m.enqueue([p,h,r.getTileCoordCenter(p.tileCoord),d])),void 0!==l&&l(p)):t.useTile(g,u,c,o)},t}(hl);Al.prototype.getLayer,Gl.default=Al;var dG=Jl&&Jl.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xm=function(e){function r(r){return e.call(this,r)||this}return dG(r,e),r.prototype.createRenderer=function(){return new Al(this)},r}(vm);Jl.default=xm;function BI(e,r){var t=/\{z\}/g,p=/\{x\}/g,o=/\{y\}/g,$=/\{-y\}/g;return function(n,a,l){return n?e.replace(t,n[0].toString()).replace(p,n[1].toString()).replace(o,n[2].toString()).replace($,function(){var e=n[0],t=r.getFullTileRange(e);return m(t,55),(t.getHeight()-n[2]-1).toString()}):void 0}}function DI(e,r){for(var t=e.length,p=new Array(t),o=0;o<t;++o)p[o]=BI(e[o],r);return II(p)}function II(e){return 1===e.length?e[0]:function(r,t,p){if(r){var o=iK(r),$=ed(o,e.length);return e[$](r,t,p)}}}function KI(e,r,t){}function VI(e){var r=[],t=/\{([a-z])-([a-z])\}/.exec(e);if(t){var p=t[1].charCodeAt(0),o=t[2].charCodeAt(0),$=void 0;for($=p;$<=o;++$)r.push(e.replace(t[0],String.fromCharCode($)));return r}if(t=/\{(\d+)-(\d+)\}/.exec(e)){for(var n=parseInt(t[2],10),a=parseInt(t[1],10);a<=n;a++)r.push(e.replace(t[0],a.toString()));return r}return r.push(e),r}function ym(e,t,$,r){return void 0!==r?(r[0]=e,r[1]=t,r[2]=$,r):[e,t,$]}function jh(e,t,$){return e+"/"+t+"/"+$}function Am(e){return jh(e[0],e[1],e[2])}function JJ(e){return e.split("/").map(Number)}function iK(e){return(e[1]<<e[0])+e[2]}function bu(e,t){var $=e[0],r=e[1],a=e[2];if(t.getMinZoom()>$||$>t.getMaxZoom())return!1;var n,o=t.getExtent();return!(n=o?t.getTileRangeForExtentAndZ(o,$):t.getFullTileRange($))||n.containsXY(r,a)}var yl={};var wl={};var vl={};var uv=vl&&vl.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ul=function(t){function e(e,i,r){var n=t.call(this)||this,o=r||{};return n.tileCoord=e,n.state=i,n.interimTile=null,n.hifi=!0,n.key="",n.transition_=void 0===o.transition?250:o.transition,n.transitionStarts_={},n}return uv(e,t),e.prototype.changed=function(){this.dispatchEvent(f.CHANGE)},e.prototype.disposeInternal=function(){this.setState(aa.ABORT)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==aa.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==aa.LOADED){t.interimTile=null;break}t.getState()==aa.LOADING?e=t:t.getState()==aa.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==aa.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){c()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var r=e-i+1e3/60;return r>=this.transition_?1:ct(r/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(dd);vl.default=ul;var Kv=wl&&wl.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Dm=function(t){function e(e,i,s,n,r,a){var o=t.call(this,e,i,a)||this;return o.crossOrigin_=n,o.src_=s,o.image_=new Image,null!==n&&(o.image_.crossOrigin=n),o.unlisten_=null,o.tileLoadFunction_=r,o}return Kv(e,t),e.prototype.disposeInternal=function(){this.state==aa.LOADING&&(this.unlistenImage_(),this.image_=Em()),this.interimTile&&this.interimTile.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=aa.ERROR,this.unlistenImage_(),this.image_=Em(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=aa.LOADED:this.state=aa.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==aa.ERROR&&(this.state=aa.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==aa.IDLE&&(this.state=aa.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=hh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(ul);function Em(){var t=pa(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}wl.default=Dm;var sl={};var gw=sl&&sl.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),rl=function(e){function t(t){return e.call(this,t)||this}return gw(t,e),t.prototype.expireCache=function(e){for(;this.canExpireCache();){if(this.peekLast().getKey()in e)break;this.pop().dispose()}},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var e=this.peekFirstKey(),t=JJ(e)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Am(e.tileCoord)),e.dispose())}.bind(this))}},t}(dk);sl.default=rl;var ql={};function Dw(e,t,r,a){var o=gg(r,t,e),$=Ri(t,a,r),n=t.getMetersPerUnit();void 0!==n&&($*=n);var i=e.getMetersPerUnit();void 0!==i&&($/=i);var l=e.getExtent();if(!l||tt(l,o)){var s=Ri(e,$,o)/$;isFinite(s)&&s>0&&($/=s)}return $}function pl(e,t,r,a){var o=r-e,$=a-t,n=Math.sqrt(o*o+$*$);return[Math.round(r+o/n),Math.round(a+$/n)]}function Gx(e,t,r,a,o,$,n,i,l,s,c){var p=pa(Math.round(r*e),Math.round(r*t));if(0===l.length)return p.canvas;p.scale(r,r);var u=ja();l.forEach(function(e,t,r){qt(u,e.extent)});var g=L(u),v=db(u),U=pa(Math.round(r*g/a),Math.round(r*v/a)),m=r/a;l.forEach(function(e,t,r){var a=e.extent[0]-u[0],o=-(e.extent[3]-u[3]),$=L(e.extent),n=db(e.extent);U.drawImage(e.image,s,s,e.image.width-2*s,e.image.height-2*s,a*m,o*m,$*m,n*m)});var h=ab(n);return i.getTriangles().forEach(function(e,t,o){var n=e.source,i=e.target,l=n[0][0],s=n[0][1],c=n[1][0],g=n[1][1],v=n[2][0],m=n[2][1],d=(i[0][0]-h[0])/$,f=-(i[0][1]-h[1])/$,x=(i[1][0]-h[0])/$,P=-(i[1][1]-h[1])/$,C=(i[2][0]-h[0])/$,M=-(i[2][1]-h[1])/$,T=l,E=s;l=0,s=0,c-=T,g-=E,v-=T,m-=E;var j=FJ([[c,g,0,0,x-d],[v,m,0,0,C-d],[0,0,c,g,P-f],[0,0,v,m,M-f]]);if(j){p.save(),p.beginPath();var q=(d+x+C)/3,R=(f+P+M)/3,S=pl(q,R,d,f),b=pl(q,R,x,P),k=pl(q,R,C,M);p.moveTo(b[0],b[1]),p.lineTo(S[0],S[1]),p.lineTo(k[0],k[1]),p.clip(),p.transform(j[0],j[2],j[1],j[3],d,f),p.translate(u[0]-T,u[3]-E),p.scale(a/r,-a/r),p.drawImage(U.canvas,0,0),p.restore()}}),c&&(p.save(),p.strokeStyle="black",p.lineWidth=1,i.getTriangles().forEach(function(e,t,r){var a=e.target,o=(a[0][0]-h[0])/$,n=-(a[0][1]-h[1])/$,i=(a[1][0]-h[0])/$,l=-(a[1][1]-h[1])/$,s=(a[2][0]-h[0])/$,c=-(a[2][1]-h[1])/$;p.beginPath(),p.moveTo(i,l),p.lineTo(o,n),p.lineTo(s,c),p.closePath(),p.stroke()}),p.restore()),p.canvas}var Px=10,Gm=.25,zy=function(){function t(t,r,i,o,e){this.sourceProj_=t,this.targetProj_=r;var s={},a=se(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var r=t[0]+"/"+t[1];return s[r]||(s[r]=a(t)),s[r]},this.maxSourceExtent_=o,this.errorThresholdSquared_=e*e,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&L(o)==L(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?L(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?L(this.targetProj_.getExtent()):null;var n=ab(i),h=cd(i),$=Tc(i),u=Nb(i),d=this.transformInv_(n),_=this.transformInv_(h),c=this.transformInv_($),l=this.transformInv_(u);if(this.addQuad_(n,h,$,u,d,_,c,l,Px),this.wrapsXInSource_){var p=1/0;this.triangles_.forEach(function(t,r,i){p=Math.min(p,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-p>this.sourceWorldWidth_/2){var r=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];r[0][0]-p>this.sourceWorldWidth_/2&&(r[0][0]-=this.sourceWorldWidth_),r[1][0]-p>this.sourceWorldWidth_/2&&(r[1][0]-=this.sourceWorldWidth_),r[2][0]-p>this.sourceWorldWidth_/2&&(r[2][0]-=this.sourceWorldWidth_);var i=Math.min(r[0][0],r[1][0],r[2][0]);Math.max(r[0][0],r[1][0],r[2][0])-i<this.sourceWorldWidth_/2&&(t.source=r)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,r,i,o,e,s){this.triangles_.push({source:[o,e,s],target:[t,r,i]})},t.prototype.addQuad_=function(t,r,i,o,e,s,a,n,h){var $=F([e,s,a,n]),u=this.sourceWorldWidth_?L($)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&u>.5&&u<1,c=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var l=F([t,r,i,o]);c=L(l)/this.targetWorldWidth_>Gm||c}!_&&this.sourceProj_.isGlobal()&&u&&(c=u>Gm||c)}if(c||!this.maxSourceExtent_||fa($,this.maxSourceExtent_)){if(!(c||isFinite(e[0])&&isFinite(e[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(n[0])&&isFinite(n[1]))){if(!(h>0))return;c=!0}if(h>0){if(!c){var p=[(t[0]+i[0])/2,(t[1]+i[1])/2],m=this.transformInv_(p),f=void 0;if(_)f=(ed(e[0],d)+ed(a[0],d))/2-ed(m[0],d);else f=(e[0]+a[0])/2-m[0];var W=(e[1]+a[1])/2-m[1];c=f*f+W*W>this.errorThresholdSquared_}if(c){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var g=[(r[0]+i[0])/2,(r[1]+i[1])/2],R=this.transformInv_(g),B=[(o[0]+t[0])/2,(o[1]+t[1])/2],Y=this.transformInv_(B);this.addQuad_(t,r,g,B,e,s,R,Y,h-1),this.addQuad_(B,g,i,o,Y,R,a,n,h-1)}else{var v=[(t[0]+r[0])/2,(t[1]+r[1])/2],I=this.transformInv_(v),x=[(i[0]+o[0])/2,(i[1]+o[1])/2],E=this.transformInv_(x);this.addQuad_(t,v,x,o,e,I,E,n,h-1),this.addQuad_(v,r,i,x,I,s,a,E,h-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,o,e,a,n),this.addTriangle_(t,r,i,e,s,a)}},t.prototype.calculateSourceExtent=function(){var t=ja();return this.triangles_.forEach(function(r,i,o){var e=r.source;Ld(t,e[0]),Ld(t,e[1]),Ld(t,e[2])}),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var Fy=ql&&ql.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Hm=function(t){function e(e,r,i,o,l,s,$,n,a,p,d){var u=t.call(this,l,aa.IDLE)||this;u.renderEdges_=void 0!==d&&d,u.pixelRatio_=$,u.gutter_=n,u.canvas_=null,u.sourceTileGrid_=r,u.targetTileGrid_=o,u.wrappedTileCoord_=s||l,u.sourceTiles_=[],u.sourcesListenerKeys_=null,u.sourceZ_=0;var c=o.getTileCoordExtent(u.wrappedTileCoord_),O=u.targetTileGrid_.getExtent(),_=u.sourceTileGrid_.getExtent(),T=O?De(c,O):c;if(0===Ki(T))return u.state=aa.EMPTY,u;var h=e.getExtent();h&&(_=_?De(_,h):h);var W=o.getResolution(u.wrappedTileCoord_[0]),g=Ee(T),m=Dw(e,i,g,W);if(!isFinite(m)||m<=0)return u.state=aa.EMPTY,u;var f=void 0!==p?p:eB;if(u.triangulation_=new zy(e,i,T,_,m*f),0===u.triangulation_.getTriangles().length)return u.state=aa.EMPTY,u;u.sourceZ_=r.getZForResolution(m);var E=u.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(E[1]=I(E[1],_[1],_[3]),E[3]=I(E[3],_[1],_[3])):E=De(E,_)),Ki(E)){for(var v=r.getTileRangeForExtentAndZ(E,u.sourceZ_),S=v.minX;S<=v.maxX;S++)for(var y=v.minY;y<=v.maxY;y++){var x=a(u.sourceZ_,S,y,$);x&&u.sourceTiles_.push(x)}0===u.sourceTiles_.length&&(u.state=aa.EMPTY)}else u.state=aa.EMPTY;return u}return Fy(e,t),e.prototype.disposeInternal=function(){this.state==aa.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,i){e&&e.getState()==aa.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=aa.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),i="number"==typeof r?r:r[0],o="number"==typeof r?r:r[1],l=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),$=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Gx(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),l,$,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=aa.LOADED}this.changed()},e.prototype.load=function(){if(this.state==aa.IDLE){this.state=aa.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,i){var o=e.getState();if(o==aa.IDLE||o==aa.LOADING){t++;var l=d(e,f.CHANGE,function(r){var i=e.getState();i!=aa.LOADED&&i!=aa.ERROR&&i!=aa.EMPTY||(p(l),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(l)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,r){t.getState()==aa.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(p),this.sourcesListenerKeys_=null},e}(ul);ql.default=Hm;var jl={};var dh={};function Jm(e){var r=e.getDefaultTileGrid();return r||(r=Yz(e),e.setDefaultTileGrid(r)),r}function Dz(e,r,t){var x=r[0],o=e.getTileCoordCenter(r),$=gl(t);if(tt($,o))return r;var i=L($),n=Math.ceil(($[0]-o[0])/i);return o[0]+=i*n,e.getTileCoordForCoordAndZ(o,x)}function Fz(e,r,t,x){var o=void 0!==x?x:Be.TOP_LEFT,$=Km(e,r,t);return new Lm({extent:e,origin:HI(e,o),resolutions:$,tileSize:t})}function Pz(e){var r=e||{},t=r.extent||N("EPSG:3857").getExtent(),x={extent:t,minZoom:r.minZoom,tileSize:r.tileSize,resolutions:Km(t,r.maxZoom,r.tileSize)};return new Lm(x)}function Km(e,r,t){for(var x=void 0!==r?r:KJ,o=db(e),$=L(e),i=Tb(void 0!==t?t:Ui),n=Math.max($/i[0],o/i[1]),E=x+1,p=new Array(E),R=0;R<E;++R)p[R]=n/Math.pow(2,R);return p}function Yz(e,r,t,x){return Fz(gl(e),r,t,x)}function gl(e){var r=(e=N(e)).getExtent();if(!r){var t=180*Ta[Y.DEGREES]/e.getMetersPerUnit();r=La(-t,-t,t,t)}return r}var mA=[0,0,0],Lm=function(){function t(t){var i;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,m(fL(this.resolutions_,function(t,i){return i-t},!0),17),!t.origins)for(var e=0,o=this.resolutions_.length-1;e<o;++e)if(i){if(this.resolutions_[e]/this.resolutions_[e+1]!==i){i=void 0;break}}else i=this.resolutions_[e]/this.resolutions_[e+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,m(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=ab(r)),m(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,m(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:Ui,m(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,i){return new Cl(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):r&&this.calculateTileRanges_(r)}return t.prototype.forEachTileCoord=function(t,i,e){for(var o=this.getTileRangeForExtentAndZ(t,i),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,l=o.maxY;s<=l;++s)e([i,r,s])},t.prototype.forEachTileCoordParentTileRange=function(t,i,e,o){var r,n,s,l=null,p=t[0]-1;for(2===this.zoomFactor_?(n=t[1],s=t[2]):l=this.getTileCoordExtent(t,o);p>=this.minZoom;){if(2===this.zoomFactor_?(n=Math.floor(n/2),s=Math.floor(s/2),r=Bl(n,n,s,s,e)):r=this.getTileRangeForExtentAndZ(l,p,e),i(p,r))return!0;--p}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,i,e){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],r=2*t[2];return Bl(o,o+1,r,r+1,i)}var n=this.getTileCoordExtent(t,e);return this.getTileRangeForExtentAndZ(n,t[0]+1,i)}return null},t.prototype.getTileRangeExtent=function(t,i,e){var o=this.getOrigin(t),r=this.getResolution(t),n=Tb(this.getTileSize(t),this.tmpSize_),s=o[0]+i.minX*n[0]*r,l=o[0]+(i.maxX+1)*n[0]*r,p=o[1]+i.minY*n[1]*r,h=o[1]+(i.maxY+1)*n[1]*r;return La(s,p,l,h,e)},t.prototype.getTileRangeForExtentAndZ=function(t,i,e){var o=mA;this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,o);var r=o[1],n=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,o),Bl(r,o[1],n,o[2],e)},t.prototype.getTileCoordCenter=function(t){var i=this.getOrigin(t[0]),e=this.getResolution(t[0]),o=Tb(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*o[0]*e,i[1]-(t[2]+.5)*o[1]*e]},t.prototype.getTileCoordExtent=function(t,i){var e=this.getOrigin(t[0]),o=this.getResolution(t[0]),r=Tb(this.getTileSize(t[0]),this.tmpSize_),n=e[0]+t[1]*r[0]*o,s=e[1]-(t[2]+1)*r[1]*o,l=n+r[0]*o,p=s+r[1]*o;return La(n,s,l,p,i)},t.prototype.getTileCoordForCoordAndResolution=function(t,i,e){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,e)},t.prototype.getTileCoordForXYAndResolution_=function(t,i,e,o,r){var n=this.getZForResolution(e),s=e/this.getResolution(n),l=this.getOrigin(n),p=Tb(this.getTileSize(n),this.tmpSize_),h=o?.5:0,a=o?.5:0,u=Math.floor((t-l[0])/e+h),$=Math.floor((l[1]-i)/e+a),g=s*u/p[0],d=s*$/p[1];return o?(g=Math.ceil(g)-1,d=Math.ceil(d)-1):(g=Math.floor(g),d=Math.floor(d)),ym(n,g,d,r)},t.prototype.getTileCoordForXYAndZ_=function(t,i,e,o,r){var n=this.getOrigin(e),s=this.getResolution(e),l=Tb(this.getTileSize(e),this.tmpSize_),p=o?.5:0,h=o?.5:0,a=Math.floor((t-n[0])/s+p),u=Math.floor((n[1]-i)/s+h),$=a/l[0],g=u/l[1];return o?($=Math.ceil($)-1,g=Math.ceil(g)-1):($=Math.floor($),g=Math.floor(g)),ym(e,$,g,r)},t.prototype.getTileCoordForCoordAndZ=function(t,i,e){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,e)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,i){var e=cm(this.resolutions_,t,i||0);return I(e,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var i=this.resolutions_.length,e=new Array(i),o=this.minZoom;o<i;++o)e[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=e},t}();var Mm=dh&&dh.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nm=function(e){function t(t){var i=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX})||this;i.opaque_=void 0!==t.opaque&&t.opaque,i.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,i.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;var r=t.cacheSize;if(void 0===r){var o=[256,256],n=t.tileGrid;n&&Tb(n.getTileSize(n.getMinZoom()),o);var a="undefined"!=typeof screen,p=a?screen.availWidth||screen.width:1920,c=a?screen.availHeight||screen.height:1080;r=4*Math.ceil(p/o[0])*Math.ceil(c/o[1])}return i.tileCache=new rl(r),i.tmpSize=[0,0],i.key_=t.key||"",i.tileOptions={transition:t.transition},i.zDirection=t.zDirection?t.zDirection:0,i}return Mm(t,e),t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(e,t){var i=this.getTileCacheForProjection(e);i&&i.expireCache(t)},t.prototype.forEachLoadedTile=function(e,t,i,r){var o=this.getTileCacheForProjection(e);if(!o)return!1;for(var n,a,p,c=!0,l=i.minX;l<=i.maxX;++l)for(var $=i.minY;$<=i.maxY;++$)a=jh(t,l,$),p=!1,o.containsKey(a)&&(p=(n=o.get(a)).getState()===aa.LOADED)&&(p=!1!==r(n)),p||(c=!1);return c},t.prototype.getGutterForProjection=function(e){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},t.prototype.getOpaque=function(e){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},t.prototype.getTile=function(e,t,i,r,o){return c()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:Jm(e)},t.prototype.getTileCacheForProjection=function(e){var t=this.getProjection();return t&&!Pc(t,e)?null:this.tileCache},t.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(e,t,i){var r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(t),n=Tb(r.getTileSize(e),this.tmpSize);return 1==o?n:yC(n,o,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(e,t){var i=void 0!==t?t:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=Dz(r,e,i)),bu(e,r)?e:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.useTile=function(e,t,i,r){},t}(Ml),Om=function(e){function t(t,i){var r=e.call(this,t)||this;return r.tile=i,r}return Mm(t,e),t}(ga);dh.TileSourceEvent=Om,dh.default=Nm;var fl={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var VA=jl&&jl.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Qm=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.generateTileUrlFunction_=!e.tileUrlFunction,i.tileLoadFunction=e.tileLoadFunction,i.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(i):KI,i.urls=null,e.urls?i.setUrls(e.urls):e.url&&i.setUrl(e.url),i.tileLoadingKeys_={},i}return VA(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,r=ba(i),n=i.getState();n==aa.LOADING?(this.tileLoadingKeys_[r]=!0,e=fl.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=n==aa.ERROR?fl.TILELOADERROR:n==aa.LOADED||n==aa.ABORT?fl.TILELOADEND:void 0),null!=e&&this.dispatchEvent(new Om(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=VI(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(DI(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var r=jh(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(Nm);jl.default=Qm;var sB=yl&&yl.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rm=function(e){function t(t){var i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:wB,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,i.tileClass=void 0!==t.tileClass?t.tileClass:Dm,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return sB(t,e),t.prototype.canExpireCache=function(){if(!qb)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},t.prototype.expireCache=function(t,i){if(qb){var r=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==r?i:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[o];n.expireCache(n==r?i:{})}}else e.prototype.expireCache.call(this,t,i)},t.prototype.getGutterForProjection=function(e){return qb&&this.getProjection()&&e&&!Pc(this.getProjection(),e)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getOpaque=function(t){return!(qb&&this.getProjection()&&t&&!Pc(this.getProjection(),t))&&e.prototype.getOpaque.call(this,t)},t.prototype.getTileGridForProjection=function(t){if(!qb)return e.prototype.getTileGridForProjection.call(this,t);var i=this.getProjection();if(!this.tileGrid||i&&!Pc(i,t)){var r=ba(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Jm(t)),this.tileGridForProjection[r]}return this.tileGrid},t.prototype.getTileCacheForProjection=function(t){if(!qb)return e.prototype.getTileCacheForProjection.call(this,t);var i=this.getProjection();if(!i||Pc(i,t))return this.tileCache;var r=ba(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new rl(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},t.prototype.createTile_=function(e,t,i,r,o,n){var l=[e,t,i],c=this.getTileCoordForTileUrlFunction(l,o),a=c?this.tileUrlFunction(c,r,o):void 0,u=new this.tileClass(l,void 0!==a?aa.IDLE:aa.EMPTY,void 0!==a?a:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=n,u.addEventListener(f.CHANGE,this.handleTileChange.bind(this)),u},t.prototype.getTile=function(e,t,i,r,o){var n=this.getProjection();if(qb&&n&&o&&!Pc(n,o)){var l=this.getTileCacheForProjection(o),c=[e,t,i],a=void 0,u=Am(c);l.containsKey(u)&&(a=l.get(u));var s=this.getKey();if(a&&a.key==s)return a;var $=this.getTileGridForProjection(n),p=this.getTileGridForProjection(o),h=this.getTileCoordForTileUrlFunction(c,o),d=new Hm(n,$,o,p,c,h,this.getTilePixelRatio(r),this.getGutter(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,n)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=s,a?(d.interimTile=a,d.refreshInterimChain(),l.replace(u,d)):l.set(u,d),d}return this.getTileInternal(e,t,i,r,n||o)},t.prototype.getTileInternal=function(e,t,i,r,o){var n=null,l=jh(e,t,i),c=this.getKey();if(this.tileCache.containsKey(l)){if((n=this.tileCache.get(l)).key!=c){var a=n;n=this.createTile_(e,t,i,r,o,c),a.getState()==aa.IDLE?n.interimTile=a.interimTile:n.interimTile=a,n.refreshInterimChain(),this.tileCache.replace(l,n)}}else n=this.createTile_(e,t,i,r,o,c),this.tileCache.set(l,n);return n},t.prototype.setRenderReprojectionEdges=function(e){if(qb&&this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},t.prototype.setTileGridForProjection=function(e,t){if(qb){var i=N(e);if(i){var r=ba(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}},t}(Qm);function wB(e,t){e.getImage().src=t}yl.default=Rm;var el={};var HB=el&&el.__extends||function(){var t=function(r,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(r,o)};return function(r,o){function e(){this.constructor=r}t(r,o),r.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),Sm=function(t){function r(r){var o=r||{},e=void 0!==o.projection?o.projection:"EPSG:3857",i=void 0!==o.tileGrid?o.tileGrid:Pz({extent:gl(e),maxZoom:o.maxZoom,minZoom:o.minZoom,tileSize:o.tileSize});return t.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,opaque:o.opaque,projection:e,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:o.tileLoadFunction,tilePixelRatio:o.tilePixelRatio,tileUrlFunction:o.tileUrlFunction,url:o.url,urls:o.urls,wrapX:void 0===o.wrapX||o.wrapX,transition:o.transition,attributionsCollapsible:o.attributionsCollapsible,zDirection:o.zDirection})||this}return HB(r,t),r}(Rm);el.default=Sm;var ch={};var _C=ch&&ch.__extends||function(){var o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r])})(t,r)};return function(t,r){function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),Um="&#169; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors.";ch.ATTRIBUTION=Um;var Vm=function(o){function t(t){var r,e=t||{};r=void 0!==e.attributions?e.attributions:[Um];var n=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",i=void 0!==e.url?e.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return o.call(this,{attributions:r,cacheSize:e.cacheSize,crossOrigin:n,opaque:void 0===e.opaque||e.opaque,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:i,wrapX:e.wrapX,attributionsCollapsible:!1})||this}return _C(t,o),t}(Sm);ch.default=Vm;var HD=!0;try{new ImageData(10,10)}catch(_){HD=!1}var KD=document.createElement("canvas").getContext("2d");function OD(a,t,e){if(HD)return new ImageData(a,t,e);var $=KD.createImageData(t,e);return $.data.set(a),$}var QD=OD;var wE=QD;function Wm(e){var t=!0;try{new ImageData(10,10)}catch(a){t=!1}function r(e,r,a){return t?new ImageData(e,r,a):{data:e,width:r,height:a}}return function(t){var a,n,i=t.buffers,s=t.meta,o=t.imageOps,u=t.width,h=t.height,l=i.length,f=i[0].byteLength;if(o){var p=new Array(l);for(n=0;n<l;++n)p[n]=r(new Uint8ClampedArray(i[n]),u,h);a=e(p,s).data}else{a=new Uint8ClampedArray(f);var $=new Array(l),c=new Array(l);for(n=0;n<l;++n)$[n]=new Uint8ClampedArray(i[n]),c[n]=[0,0,0,0];for(var _=0;_<f;_+=4){for(var v=0;v<l;++v){var g=$[v];c[v][0]=g[_],c[v][1]=g[_+1],c[v][2]=g[_+2],c[v][3]=g[_+3]}var d=e(c,s);a[_]=d[0],a[_+1]=d[1],a[_+2]=d[2],a[_+3]=d[3]}}return a.buffer}}function NE(e,t){var r=Object.keys(e.lib||{}).map(function(t){return"var "+t+" = "+e.lib[t].toString()+";"}).concat(["var __minion__ = ("+Wm.toString()+")(",e.operation.toString(),");","self.addEventListener(\"message\", function(event) {","  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),a=new Blob(r,{type:"text/javascript"}),n=URL.createObjectURL(a),i=new Worker(n);return i.addEventListener("message",t),i}function OE(e,t){var r=Wm(e.operation);return{postMessage:function(e){setTimeout(function(){t({data:{buffer:r(e),meta:e.meta}})},0)}}}function Wd(e){var t;this._imageOps=!!e.imageOps;var r=[];if(t=0===e.threads?0:this._imageOps?1:e.threads||1)for(var a=0;a<t;++a)r[a]=NE(e,this._onWorkerMessage.bind(this,a));else r[0]=OE(e,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=e.queue||1/0,this._running=0,this._dataLookup={},this._job=null}Wd.prototype.process=function(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()},Wd.prototype.destroy=function(){for(var e in this)this[e]=null;this._destroyed=!0},Wd.prototype._enqueue=function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},Wd.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var e=this._job=this._queue.shift(),t=e.inputs[0].width,r=e.inputs[0].height,a=e.inputs.map(function(e){return e.data.buffer}),n=this._workers.length;if(this._running=n,1===n)this._workers[0].postMessage({buffers:a,meta:e.meta,imageOps:this._imageOps,width:t,height:r},a);else for(var i=e.inputs[0].data.length,s=4*Math.ceil(i/4/n),o=0;o<n;++o){for(var u=o*s,h=[],l=0,f=a.length;l<f;++l)h.push(a[o].slice(u,u+s));this._workers[o].postMessage({buffers:h,meta:e.meta,imageOps:this._imageOps,width:t,height:r},h)}}},Wd.prototype._onWorkerMessage=function(e,t){this._destroyed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())},Wd.prototype._resolveJob=function(){var e,t,r=this._job,a=this._workers.length;if(1===a)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var n=r.inputs[0].data.length;e=new Uint8ClampedArray(n),t=new Array(n);for(var i=4*Math.ceil(n/4/a),s=0;s<a;++s){var o=this._dataLookup[s].buffer,u=s*i;e.set(new Uint8ClampedArray(o),u),t[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},r.callback(null,wE(e,r.inputs[0].width,r.inputs[0].height),t),this._dispatch()};var xa={};var JF=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,r){var o;if(r){var e=r.dataProjection?N(r.dataProjection):this.readProjection(t);r.extent&&e&&e.getUnits()===Y.TILE_PIXELS&&(e=N(e)).setWorldExtent(r.extent),o={dataProjection:e,featureProjection:r.featureProjection}}return this.adaptOptions(o)},t.prototype.adaptOptions=function(t){return la({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return c()},t.prototype.readFeature=function(t,r){return c()},t.prototype.readFeatures=function(t,r){return c()},t.prototype.readGeometry=function(t,r){return c()},t.prototype.readProjection=function(t){return c()},t.prototype.writeFeature=function(t,r){return c()},t.prototype.writeFeatures=function(t,r){return c()},t.prototype.writeGeometry=function(t,r){return c()},t}();function Zm(t,r,o){var e,n=o?N(o.featureProjection):null,i=o?N(o.dataProjection):null;if(e=n&&i&&!Pc(n,i)?(r?t.clone():t).transform(r?n:i,r?i:n):t,r&&o&&void 0!==o.decimals){var $=Math.pow(10,o.decimals);e===t&&(e=t.clone()),e.applyTransform(function(t){for(var r=0,o=t.length;r<o;++r)t[r]=Math.round(t[r]*$)/$;return t})}return e}var Xk={};var TF=Xk&&Xk.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),$m=function(t){function r(){return t.call(this)||this}return TF(r,t),r.prototype.getType=function(){return Yd.TEXT},r.prototype.readFeature=function(t,r){return this.readFeatureFromText($g(t),this.adaptOptions(r))},r.prototype.readFeatureFromText=function(t,r){return c()},r.prototype.readFeatures=function(t,r){return this.readFeaturesFromText($g(t),this.adaptOptions(r))},r.prototype.readFeaturesFromText=function(t,r){return c()},r.prototype.readGeometry=function(t,r){return this.readGeometryFromText($g(t),this.adaptOptions(r))},r.prototype.readGeometryFromText=function(t,r){return c()},r.prototype.readProjection=function(t){return this.readProjectionFromText($g(t))},r.prototype.readProjectionFromText=function(t){return this.dataProjection},r.prototype.writeFeature=function(t,r){return this.writeFeatureText(t,this.adaptOptions(r))},r.prototype.writeFeatureText=function(t,r){return c()},r.prototype.writeFeatures=function(t,r){return this.writeFeaturesText(t,this.adaptOptions(r))},r.prototype.writeFeaturesText=function(t,r){return c()},r.prototype.writeGeometry=function(t,r){return this.writeGeometryText(t,this.adaptOptions(r))},r.prototype.writeGeometryText=function(t,r){return c()},r}(JF);function $g(t){return"string"==typeof t?t:""}Xk.default=$m;function an(r,v,$,o,p,t){var X,e;void 0!==p?(X=p,e=void 0!==t?t:0):(X=[],e=0);for(var f=v;f<$;){var i=r[f++];X[e++]=r[f++],X[e++]=i;for(var a=2;a<o;++a)X[e++]=r[f++]}return X.length=e,X}var QH=xa&&xa.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mI=function(e){function t(t){var r=e.call(this)||this,n=t||{};return r.dataProjection=N("EPSG:4326"),r.factor_=n.factor?n.factor:1e5,r.geometryLayout_=n.geometryLayout?n.geometryLayout:B.XY,r}return QH(t,e),t.prototype.readFeatureFromText=function(e,t){var r=this.readGeometryFromText(e,t);return new ra(r)},t.prototype.readFeaturesFromText=function(e,t){return[this.readFeatureFromText(e,t)]},t.prototype.readGeometryFromText=function(e,t){var r=Fg(this.geometryLayout_),n=cn(e,r,this.factor_);an(n,0,n.length,r,n);var o=wd(n,0,n.length,r),$=new Gb(o,this.geometryLayout_);return Zm($,!1,this.adaptOptions(t))},t.prototype.writeFeatureText=function(e,t){var r=e.getGeometry();return r?this.writeGeometryText(r,t):(m(!1,40),"")},t.prototype.writeFeaturesText=function(e,t){return this.writeFeatureText(e[0],t)},t.prototype.writeGeometryText=function(e,t){var r=(e=Zm(e,!0,this.adaptOptions(t))).getFlatCoordinates(),n=e.getStride();return an(r,0,r.length,n,r),bn(r,n,this.factor_)},t}($m);function bn(e,t,r){var n,o=r||1e5,$=new Array(t);for(n=0;n<t;++n)$[n]=0;for(var p=0,a=e.length;p<a;)for(n=0;n<t;++n,++p){var i=e[p],s=i-$[n];$[n]=i,e[p]=s}return dn(e,o)}function cn(e,t,r){var n,o=r||1e5,$=new Array(t);for(n=0;n<t;++n)$[n]=0;for(var p=en(e,o),a=0,i=p.length;a<i;)for(n=0;n<t;++n,++a)$[n]+=p[a],p[a]=$[n];return p}function dn(e,t){for(var r=t||1e5,n=0,o=e.length;n<o;++n)e[n]=Math.round(e[n]*r);return fn(e)}function en(e,t){for(var r=t||1e5,n=gn(e),o=0,$=n.length;o<$;++o)n[o]/=r;return n}function fn(e){for(var t=0,r=e.length;t<r;++t){var n=e[t];e[t]=n<0?~(n<<1):n<<1}return hn(e)}function gn(e){for(var t=jn(e),r=0,n=t.length;r<n;++r){var o=t[r];t[r]=1&o?~(o>>1):o>>1}return t}function hn(e){for(var t="",r=0,n=e.length;r<n;++r)t+=kn(e[r]);return t}function jn(e){for(var t=[],r=0,n=0,o=0,$=e.length;o<$;++o){var p=e.charCodeAt(o)-63;r|=(31&p)<<n,p<32?(t.push(r),r=0,n=0):n+=5}return t}function kn(e){for(var t,r="";e>=32;)t=63+(32|31&e),r+=String.fromCharCode(t),e>>=5;return t=e+63,r+=String.fromCharCode(t)}xa.encodeDeltas=bn,xa.decodeDeltas=cn,xa.encodeFloats=dn,xa.decodeFloats=en,xa.encodeSignedIntegers=fn,xa.decodeSignedIntegers=gn,xa.encodeUnsignedIntegers=hn,xa.decodeUnsignedIntegers=jn,xa.encodeUnsignedInteger=kn,xa.default=mI;var EJ={};var ln,dK=false;function mn(){if(dK)return;dK=true;ln={};ln=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}}}var JK,RK=false;function TK(){if(RK)return;RK=true;JK={};JK=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}}var ma,$K,cL,Rd,Yt=false;function nn(e){return"[object Array]"===Rd.call(e)}function fu(e){return"[object ArrayBuffer]"===Rd.call(e)}function hu(e){return"undefined"!=typeof FormData&&e instanceof FormData}function iu(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function lu(e){return"string"==typeof e}function ou(e){return"number"==typeof e}function Gu(e){return void 0===e}function on(e){return null!==e&&"object"==typeof e}function Ju(e){return"[object Date]"===Rd.call(e)}function Lu(e){return"[object File]"===Rd.call(e)}function Mu(e){return"[object Blob]"===Rd.call(e)}function pn(e){return"[object Function]"===Rd.call(e)}function Tu(e){return on(e)&&pn(e.pipe)}function Vu(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function lv(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function mv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document}function Pg(e,r){if(null!=e)if("object"!=typeof e&&(e=[e]),nn(e))for(var $=0,a=e.length;$<a;$++)r.call(null,e[$],$,e);else for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.call(null,e[t],t,e)}function qn(){var e={};function r(r,$){"object"==typeof e[$]&&"object"==typeof r?e[$]=qn(e[$],r):e[$]=r}for(var $=0,a=arguments.length;$<a;$++)Pg(arguments[$],r);return e}function Ik(){var e={};function r(r,$){"object"==typeof e[$]&&"object"==typeof r?e[$]=Ik(e[$],r):e[$]="object"==typeof r?Ik({},r):r}for(var $=0,a=arguments.length;$<a;$++)Pg(arguments[$],r);return e}function sv(e,r,$){return Pg(r,function(r,a){e[a]=$&&"function"==typeof r?$K(r,$):r}),e}function _(){if(Yt)return;Yt=true;ma={};$K=(mn(),ln);cL=(TK(),JK);Rd=Object.prototype.toString;ma={isArray:nn,isArrayBuffer:fu,isBuffer:cL,isFormData:hu,isArrayBufferView:iu,isString:lu,isNumber:ou,isObject:on,isUndefined:Gu,isDate:Ju,isFile:Lu,isBlob:Mu,isFunction:pn,isStream:Tu,isURLSearchParams:Vu,isStandardBrowserEnv:mv,forEach:Pg,merge:qn,deepMerge:Ik,extend:sv,trim:lv}}var Fk,Od,Bv=false;function sn(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dk(){if(Bv)return;Bv=true;Fk={};Od=(_(),ma);Fk=function(e,r,$){if(!r)return e;var i;if($)i=$(r);else if(Od.isURLSearchParams(r))i=r.toString();else{var a=[];Od.forEach(r,function(e,r){null!=e&&(Od.isArray(e)?r+="[]":e=[e],Od.forEach(e,function(e){Od.isDate(e)?e=e.toISOString():Od.isObject(e)&&(e=JSON.stringify(e)),a.push(sn(r)+"="+sn(e))}))}),i=a.join("&")}if(i){var p=e.indexOf("#");-1!==p&&(e=e.slice(0,p)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}}var tn={},Pv=(_(),ma);function Kg(){this.handlers=[]}Kg.prototype.use=function(e,r){return this.handlers.push({fulfilled:e,rejected:r}),this.handlers.length-1},Kg.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Kg.prototype.forEach=function(e){Pv.forEach(this.handlers,function(r){null!==r&&e(r)})},tn=Kg;var yk={},Tv=(_(),ma);yk=function($,r,t){return Tv.forEach(t,function(t){$=t($,r)}),$};var vn={};vn=function(r){return!(!r||!r.__CANCEL__)};var wn={},fw=(_(),ma);wn=function(e,$){fw.forEach(e,function(r,t){t!==$&&t.toUpperCase()===$.toUpperCase()&&(e[$]=r,delete e[t])})};var xn,hw=false;function yn(){if(hw)return;hw=true;xn={};xn=function(e,i,s,t,n){return e.config=i,s&&(e.code=s),e.request=t,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}}var xk,ow,qw=false;function vk(){if(qw)return;qw=true;xk={};ow=(yn(),xn);xk=function(r,e,$,n,a){var o=new Error(r);return ow(o,e,$,n,a)}}var An,Jw,Lw=false;function Bn(){if(Lw)return;Lw=true;An={};Jw=(vk(),xk);An=function(t,r,e){var a=e.config.validateStatus;!a||a(e.status)?t(e):r(Jw("Request failed with status code "+e.status,e.config,null,e.request,e))}}var U,Zw,_w,bx,Hg,Cn,qk,ay,by,cy,ey,jy,my,ry=false;function jk(){if(void 0!==Hg)return Hg;if(q.XMLHttpRequest){Hg=new q.XMLHttpRequest;try{Hg.open("GET",q.XDomainRequest?"/":"https://example.com")}catch(e){Hg=null}}else Hg=null;return Hg}function ik(r){var $=jk();if(!$)return!1;try{return $.responseType=r,$.responseType===r}catch(e){}return!1}function Vc(r){return"function"==typeof r}function Gn(){if(ry)return;ry=true;U={};Zw=Vc(q.fetch)&&Vc(q.ReadableStream);U.fetch=Zw;_w=Vc(q.WritableStream);U.writableStream=_w;bx=Vc(q.AbortController);U.abortController=bx;Cn=!1;U.blobConstructor=Cn;try{new Blob([new ArrayBuffer(1)]),Cn=!0,U.blobConstructor=Cn}catch(e){}qk=void 0!==q.ArrayBuffer;ay=qk&&Vc(q.ArrayBuffer.prototype.slice);by=U.fetch||qk&&ik("arraybuffer");U.arraybuffer=by;cy=!U.fetch&&ay&&ik("ms-stream");U.msstream=cy;ey=!U.fetch&&qk&&ik("moz-chunked-arraybuffer");U.mozchunkedarraybuffer=ey;jy=U.fetch||!!jk()&&Vc(jk().overrideMimeType);U.overrideMimeType=jy;my=Vc(q.VBArray);U.vbArray=my,Hg=null}var Yb,Iy=false;function Xb(){if(Iy)return;Iy=true;Yb={};Yb="function"==typeof Object.create?function(t,o){o&&(t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,o){if(o){t.super_=o;var e=function(){};e.prototype=o.prototype,t.prototype=new e,t.prototype.constructor=t}}}var Jd,Id,Aa,E,ue,Qc,Rj,Mn,Hz=false;function Qj(){throw new Error("setTimeout has not been defined")}function Pj(){throw new Error("clearTimeout has not been defined")}function Nn($){if(Jd===setTimeout)return setTimeout($,0);if((Jd===Qj||!Jd)&&setTimeout)return Jd=setTimeout,setTimeout($,0);try{return Jd($,0)}catch(e){try{return Jd.call(null,$,0)}catch(e){return Jd.call(this,$,0)}}}function Rz($){if(Id===clearTimeout)return clearTimeout($);if((Id===Pj||!Id)&&clearTimeout)return Id=clearTimeout,clearTimeout($);try{return Id($)}catch(e){try{return Id.call(null,$)}catch(e){return Id.call(this,$)}}}function Sz(){Rj&&ue&&(Rj=!1,ue.length?Qc=ue.concat(Qc):Mn=-1,Qc.length&&On())}function On(){if(!Rj){var $=Nn(Sz);Rj=!0;for(var e=Qc.length;e;){for(ue=Qc,Qc=[];++Mn<e;)ue&&ue[Mn].run();Mn=-1,e=Qc.length}ue=null,Rj=!1,Rz($)}}function Pn($,e){this.fun=$,this.array=e}function Ib(){}function va(){if(Hz)return;Hz=true;Aa={};E=Aa={};!function(){try{Jd="function"==typeof setTimeout?setTimeout:Qj}catch($){Jd=Qj}try{Id="function"==typeof clearTimeout?clearTimeout:Pj}catch($){Id=Pj}}();Qc=[];Rj=!1;Mn=-1;E.nextTick=function($){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Qc.push(new Pn($,e)),1!==Qc.length||Rj||Nn(On)},Pn.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=Ib,E.addListener=Ib,E.once=Ib,E.off=Ib,E.removeListener=Ib,E.removeAllListeners=Ib,E.emit=Ib,E.prependListener=Ib,E.prependOnceListener=Ib,E.listeners=function($){return[]},E.binding=function($){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function($){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}}var mg,Pa,kA=false;function lA(r,e,$,i){if("function"!=typeof r)throw new TypeError("\"callback\" argument must be a function");var n,c,s=arguments.length;switch(s){case 0:case 1:return Pa.nextTick(r);case 2:return Pa.nextTick(function(){r.call(null,e)});case 3:return Pa.nextTick(function(){r.call(null,e,$)});case 4:return Pa.nextTick(function(){r.call(null,e,$,i)});default:for(n=new Array(s-1),c=0;c<n.length;)n[c++]=arguments[c];return Pa.nextTick(function(){r.apply(null,n)});}}function jg(){if(kA)return;kA=true;mg={};Pa=(va(),Aa);mg=void 0===Pa||!Pa.version||0===Pa.version.indexOf("v0.")||0===Pa.version.indexOf("v1.")&&0!==Pa.version.indexOf("v1.8.")?{nextTick:lA}:Pa}var Sn,oA,rA=false;function Tn(){if(rA)return;rA=true;Sn={};oA={}.toString;Sn=Array.isArray||function(r){return"[object Array]"==oA.call(r)}}var tA,Un,Cd,Cj,Wn,CA,LA=false;function NA(e){console&&console.warn&&console.warn(e)}function r(){r.init.call(this)}function Xn(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function Yn(e,t,r,n){var i,o,s;if("function"!=typeof r)throw new TypeError("The \"listener\" argument must be of type Function. Received type "+typeof r);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=Xn(e))>0&&s.length>i&&!s.warned){s.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=e,$.type=t,$.count=s.length,NA($)}return e}function fB(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,Cj(this.listener,this.target,e))}function Zn(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=fB.bind(n);return i.listener=r,n.wrapFn=i,i}function $n(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?GB(i):ao(i,i.length)}function _n(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function ao(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function BB(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function GB(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function bo(){if(LA)return;LA=true;Un={};Cd="object"==typeof Reflect?Reflect:null;Cj=Cd&&"function"==typeof Cd.apply?Cd.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};tA=Cd&&"function"==typeof Cd.ownKeys?Cd.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};Wn=Number.isNaN||function(e){return e!=e};Un=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;CA=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return CA},set:function(e){if("number"!=typeof e||e<0||Wn(e))throw new RangeError("The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received "+e+".");CA=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Wn(e))throw new RangeError("The value of \"n\" is out of range. It must be a non-negative number. Received "+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return Xn(this)},r.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var $=i[e];if(void 0===$)return!1;if("function"==typeof $)Cj($,this,t);else{var v=$.length,a=ao($,v);for(r=0;r<v;++r)Cj(a[r],this,t)}return!0},r.prototype.addListener=function(e,t){return Yn(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return Yn(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError("The \"listener\" argument must be of type Function. Received type "+typeof t);return this.on(e,Zn(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError("The \"listener\" argument must be of type Function. Received type "+typeof t);return this.prependListener(e,Zn(this,e,t)),this},r.prototype.removeListener=function(e,t){var r,n,i,o,s;if("function"!=typeof t)throw new TypeError("The \"listener\" argument must be of type Function. Received type "+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():BB(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},r.prototype.listeners=function(e){return $n(this,e,!0)},r.prototype.rawListeners=function(e){return $n(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_n.call(e,t)},r.prototype.listenerCount=_n,r.prototype.eventNames=function(){return this._eventsCount>0?tA(this._events):[]}}var fg,NB,XB,$B,_B=false;function eo($){var r=$.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=$.indexOf("=");return-1===o&&(o=r),[o,o===r?0:4-o%4]}function gC($){var r=eo($),o=r[0],e=r[1];return 3*(o+e)/4-e}function lC($,r,o){return 3*(r+o)/4-o}function qC($){var r,o,e=eo($),y=e[0],a=e[1],l=new $FRly$var$Arr(lC($,y,a)),t=0,v=a>0?y-4:y;for(o=0;o<v;o+=4)r=$FRly$var$revLookup[$.charCodeAt(o)]<<18|$FRly$var$revLookup[$.charCodeAt(o+1)]<<12|$FRly$var$revLookup[$.charCodeAt(o+2)]<<6|$FRly$var$revLookup[$.charCodeAt(o+3)],l[t++]=r>>16&255,l[t++]=r>>8&255,l[t++]=255&r;return 2===a&&(r=$FRly$var$revLookup[$.charCodeAt(o)]<<2|$FRly$var$revLookup[$.charCodeAt(o+1)]>>4,l[t++]=255&r),1===a&&(r=$FRly$var$revLookup[$.charCodeAt(o)]<<10|$FRly$var$revLookup[$.charCodeAt(o+1)]<<4|$FRly$var$revLookup[$.charCodeAt(o+2)]>>2,l[t++]=r>>8&255,l[t++]=255&r),l}function rC($){return $FRly$var$lookup[$>>18&63]+$FRly$var$lookup[$>>12&63]+$FRly$var$lookup[$>>6&63]+$FRly$var$lookup[63&$]}function sC($,r,o){for(var e,y=[],a=r;a<o;a+=3)e=($[a]<<16&16711680)+($[a+1]<<8&65280)+(255&$[a+2]),y.push(rC(e));return y.join("")}function wC($){for(var r,o=$.length,e=o%3,y=[],a=0,l=o-e;a<l;a+=16383)y.push(sC($,a,a+16383>l?l:a+16383));return 1===e?(r=$[o-1],y.push($FRly$var$lookup[r>>2]+$FRly$var$lookup[r<<4&63]+"==")):2===e&&(r=($[o-2]<<8)+$[o-1],y.push($FRly$var$lookup[r>>10]+$FRly$var$lookup[r>>4&63]+$FRly$var$lookup[r<<2&63]+"=")),y.join("")}function AC(){if(_B)return;_B=true;fg={};NB=gC;fg.byteLength=NB;XB=qC;fg.toByteArray=XB;$B=wC;fg.fromByteArray=$B;for(var $FRly$var$lookup=[],$FRly$var$revLookup=[],$FRly$var$Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,$FRly$var$code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$FRly$var$i=0,$FRly$var$len=$FRly$var$code.length;$FRly$var$i<$FRly$var$len;++$FRly$var$i)$FRly$var$lookup[$FRly$var$i]=$FRly$var$code[$FRly$var$i],$FRly$var$revLookup[$FRly$var$code.charCodeAt($FRly$var$i)]=$FRly$var$i;$FRly$var$revLookup["-".charCodeAt(0)]=62,$FRly$var$revLookup["_".charCodeAt(0)]=63}var vj,RC,SC,TC=false;function UC(){if(TC)return;TC=true;vj={};RC=function(t,r,o,a,$){var e,p,h=8*$-a-1,M=(1<<h)-1,w=M>>1,u=-7,f=o?$-1:0,i=o?-1:1,j=t[r+f];for(f+=i,e=j&(1<<-u)-1,j>>=-u,u+=h;u>0;e=256*e+t[r+f],f+=i,u-=8);for(p=e&(1<<-u)-1,e>>=-u,u+=a;u>0;p=256*p+t[r+f],f+=i,u-=8);if(0===e)e=1-w;else{if(e===M)return p?NaN:1/0*(j?-1:1);p+=Math.pow(2,a),e-=w}return(j?-1:1)*p*Math.pow(2,e-a)};vj.read=RC;SC=function(t,r,o,a,$,e){var p,h,M,w=8*e-$-1,u=(1<<w)-1,f=u>>1,i=23===$?Math.pow(2,-24)-Math.pow(2,-77):0,j=a?0:e-1,s=a?1:-1,x=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,p=u):(p=Math.floor(Math.log(r)/Math.LN2),r*(M=Math.pow(2,-p))<1&&(p--,M*=2),(r+=p+f>=1?i/M:i*Math.pow(2,1-f))*M>=2&&(p++,M/=2),p+f>=u?(h=0,p=u):p+f>=1?(h=(r*M-1)*Math.pow(2,$),p+=f):(h=r*Math.pow(2,f-1)*Math.pow(2,$),p=0));$>=8;t[o+j]=255&h,j+=s,h/=256,$-=8);for(p=p<<$|h,w+=$;w>0;t[o+j]=255&p,j+=s,p/=256,w-=8);t[o+j-s]|=128*x};vj.write=SC}var Z,rj,Ad,fo,bD,cD,go,fD,ho,lD,qD=false;function tD(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===r.foo()&&"function"==typeof r.subarray&&0===r.subarray(1,1).byteLength}catch(e){return!1}}function _f(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function yb(r,e){if(_f()<e)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e)).__proto__=b.prototype:(null===r&&(r=new b(e)),r.length=e),r}function b(r,e,t){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(r,e,t);if("number"==typeof r){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return kj(this,r)}return io(this,r,e,t)}function io(r,e,t,a){if("number"==typeof e)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?TD(r,e,t,a):"string"==typeof e?PD(r,e,t):kE(r,e)}function jo(r){if("number"!=typeof r)throw new TypeError("\"size\" argument must be a number");if(r<0)throw new RangeError("\"size\" argument must not be negative")}function ND(r,e,t,a){return jo(e),e<=0?yb(r,e):void 0!==t?"string"==typeof a?yb(r,e).fill(t,a):yb(r,e).fill(t):yb(r,e)}function kj(r,e){if(jo(e),r=yb(r,e<0?0:0|hj(e)),!b.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}function PD(r,e,t){if("string"==typeof t&&""!==t||(t="utf8"),!b.isEncoding(t))throw new TypeError("\"encoding\" must be a valid string encoding");var a=0|mo(e,t),$=(r=yb(r,a)).write(e,t);return $!==a&&(r=r.slice(0,$)),r}function ij(r,e){var t=e.length<0?0:0|hj(e.length);r=yb(r,t);for(var a=0;a<t;a+=1)r[a]=255&e[a];return r}function TD(r,e,t,a){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(a||0))throw new RangeError("'length' is out of bounds");return e=void 0===t&&void 0===a?new Uint8Array(e):void 0===a?new Uint8Array(e,t):new Uint8Array(e,t,a),b.TYPED_ARRAY_SUPPORT?(r=e).__proto__=b.prototype:r=ij(r,e),r}function kE(r,e){if(b.isBuffer(e)){var t=0|hj(e.length);return 0===(r=yb(r,t)).length?r:(e.copy(r,0,0,t),r)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||bG(e.length)?yb(r,0):ij(r,e);if("Buffer"===e.type&&fo(e.data))return ij(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function hj(r){if(r>=_f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_f().toString(16)+" bytes");return 0|r}function uE(r){return+r!=r&&(r=0),b.alloc(+r)}function mo(r,e){if(b.isBuffer(r))return r.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;"string"!=typeof r&&(r=""+r);var t=r.length;if(0===t)return 0;for(var a=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Rf(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return xo(r).length;default:if(a)return Rf(r).length;e=(""+e).toLowerCase(),a=!0;}}function KE(r,e,t){var a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(e>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return tF(this,e,t);case"utf8":case"utf-8":return ro(this,e,t);case"ascii":return rF(this,e,t);case"latin1":case"binary":return sF(this,e,t);case"base64":return dF(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vF(this,e,t);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),a=!0;}}function Hc(r,e,t){var a=r[e];r[e]=r[t],r[t]=a}function oo(r,e,t,a,$){if(0===r.length)return-1;if("string"==typeof t?(a=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=$?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if($)return-1;t=r.length-1}else if(t<0){if(!$)return-1;t=0}if("string"==typeof e&&(e=b.from(e,a)),b.isBuffer(e))return 0===e.length?-1:po(r,e,t,a,$);if("number"==typeof e)return e&=255,b.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?$?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):po(r,[e],t,a,$);throw new TypeError("val must be string, number or Buffer")}function po(r,e,t,a,$){var n,f=1,i=r.length,o=e.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(r.length<2||e.length<2)return-1;f=2,i/=2,o/=2,t/=2}function u(r,e){return 1===f?r[e]:r.readUInt16BE(e*f)}if($){var B=-1;for(n=t;n<i;n++)if(u(r,n)===u(e,-1===B?0:n-B)){if(-1===B&&(B=n),n-B+1===o)return B*f}else-1!==B&&(n-=n-B),B=-1}else for(t+o>i&&(t=i-o),n=t;n>=0;n--){for(var s=!0,h=0;h<o;h++)if(u(r,n+h)!==u(e,h)){s=!1;break}if(s)return n}return-1}function PE(r,e,t,a){t=Number(t)||0;var $=r.length-t;a?(a=Number(a))>$&&(a=$):a=$;var n=e.length;if(n%2!=0)throw new TypeError("Invalid hex string");a>n/2&&(a=n/2);for(var f=0;f<a;++f){var i=parseInt(e.substr(2*f,2),16);if(isNaN(i))return f;r[t+f]=i}return f}function SE(r,e,t,a){return Qf(Rf(e,r.length-t),r,t,a)}function qo(r,e,t,a){return Qf(ZF(e),r,t,a)}function WE(r,e,t,a){return qo(r,e,t,a)}function aF(r,e,t,a){return Qf(xo(e),r,t,a)}function bF(r,e,t,a){return Qf($F(e,r.length-t),r,t,a)}function dF(r,e,t){return 0===e&&t===r.length?rj.fromByteArray(r):rj.fromByteArray(r.slice(e,t))}function ro(r,e,t){t=Math.min(r.length,t);for(var a=[],$=e;$<t;){var n,f,i,o,u=r[$],B=null,s=u>239?4:u>223?3:u>191?2:1;if($+s<=t)switch(s){case 1:u<128&&(B=u);break;case 2:128==(192&(n=r[$+1]))&&(o=(31&u)<<6|63&n)>127&&(B=o);break;case 3:n=r[$+1],f=r[$+2],128==(192&n)&&128==(192&f)&&(o=(15&u)<<12|(63&n)<<6|63&f)>2047&&(o<55296||o>57343)&&(B=o);break;case 4:n=r[$+1],f=r[$+2],i=r[$+3],128==(192&n)&&128==(192&f)&&128==(192&i)&&(o=(15&u)<<18|(63&n)<<12|(63&f)<<6|63&i)>65535&&o<1114112&&(B=o);}null===B?(B=65533,s=1):B>65535&&(B-=65536,a.push(B>>>10&1023|55296),B=56320|1023&B),a.push(B),$+=s}return pF(a)}function pF(r){var e=r.length;if(e<=ho)return String.fromCharCode.apply(String,r);for(var t="",a=0;a<e;)t+=String.fromCharCode.apply(String,r.slice(a,a+=ho));return t}function rF(r,e,t){var a="";t=Math.min(r.length,t);for(var $=e;$<t;++$)a+=String.fromCharCode(127&r[$]);return a}function sF(r,e,t){var a="";t=Math.min(r.length,t);for(var $=e;$<t;++$)a+=String.fromCharCode(r[$]);return a}function tF(r,e,t){var a=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>a)&&(t=a);for(var $="",n=e;n<t;++n)$+=XF(r[n]);return $}function vF(r,e,t){for(var a=r.slice(e,t),$="",n=0;n<a.length;n+=2)$+=String.fromCharCode(a[n]+256*a[n+1]);return $}function Q(r,e,t){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}function ka(r,e,t,a,$,n){if(!b.isBuffer(r))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(e>$||e<n)throw new RangeError("\"value\" argument is out of bounds");if(t+a>r.length)throw new RangeError("Index out of range")}function Uf(r,e,t,a){e<0&&(e=65535+e+1);for(var $=0,n=Math.min(r.length-t,2);$<n;++$)r[t+$]=(e&255<<8*(a?$:1-$))>>>8*(a?$:1-$)}function Sf(r,e,t,a){e<0&&(e=4294967295+e+1);for(var $=0,n=Math.min(r.length-t,4);$<n;++$)r[t+$]=e>>>8*(a?$:3-$)&255}function to(r,e,t,a,$,n){if(t+a>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function uo(r,e,t,a,$){return $||to(r,e,t,4,3.4028234663852886e38,-3.4028234663852886e38),Ad.write(r,e,t,a,23,4),t+4}function vo(r,e,t,a,$){return $||to(r,e,t,8,1.7976931348623157e308,-1.7976931348623157e308),Ad.write(r,e,t,a,52,8),t+8}function VF(r){if((r=WF(r).replace(lD,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}function WF(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function XF(r){return r<16?"0"+r.toString(16):r.toString(16)}function Rf(r,e){var t;e=e||1/0;for(var a=r.length,$=null,n=[],f=0;f<a;++f){if((t=r.charCodeAt(f))>55295&&t<57344){if(!$){if(t>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(f+1===a){(e-=3)>-1&&n.push(239,191,189);continue}$=t;continue}if(t<56320){(e-=3)>-1&&n.push(239,191,189),$=t;continue}t=65536+($-55296<<10|t-56320)}else $&&(e-=3)>-1&&n.push(239,191,189);if($=null,t<128){if((e-=1)<0)break;n.push(t)}else if(t<2048){if((e-=2)<0)break;n.push(t>>6|192,63&t|128)}else if(t<65536){if((e-=3)<0)break;n.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return n}function ZF(r){for(var e=[],t=0;t<r.length;++t)e.push(255&r.charCodeAt(t));return e}function $F(r,e){for(var t,a,$,n=[],f=0;f<r.length&&!((e-=2)<0);++f)a=(t=r.charCodeAt(f))>>8,$=t%256,n.push($),n.push(a);return n}function xo(r){return rj.toByteArray(VF(r))}function Qf(r,e,t,a){for(var $=0;$<a&&!($+t>=e.length||$>=r.length);++$)e[$+t]=r[$];return $}function bG(r){return r!=r}function Ma(){if(qD)return;qD=true;Z={};rj=(AC(),fg);Ad=(UC(),vj);fo=(Tn(),Sn);bD=b;Z.Buffer=bD;cD=uE;Z.SlowBuffer=cD;go=50;Z.INSPECT_MAX_BYTES=go,b.TYPED_ARRAY_SUPPORT=void 0!==q.TYPED_ARRAY_SUPPORT?q.TYPED_ARRAY_SUPPORT:tD();fD=_f();Z.kMaxLength=fD,b.poolSize=8192,b._augment=function(r){return r.__proto__=b.prototype,r},b.from=function(r,e,t){return io(null,r,e,t)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0})),b.alloc=function(r,e,t){return ND(null,r,e,t)},b.allocUnsafe=function(r){return kj(null,r)},b.allocUnsafeSlow=function(r){return kj(null,r)},b.isBuffer=function(r){return!(null==r||!r._isBuffer)},b.compare=function(r,e){if(!b.isBuffer(r)||!b.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(r===e)return 0;for(var t=r.length,a=e.length,$=0,n=Math.min(t,a);$<n;++$)if(r[$]!==e[$]){t=r[$],a=e[$];break}return t<a?-1:a<t?1:0},b.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},b.concat=function(r,e){if(!fo(r))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===r.length)return b.alloc(0);var t;if(void 0===e)for(e=0,t=0;t<r.length;++t)e+=r[t].length;var a=b.allocUnsafe(e),$=0;for(t=0;t<r.length;++t){var n=r[t];if(!b.isBuffer(n))throw new TypeError("\"list\" argument must be an Array of Buffers");n.copy(a,$),$+=n.length}return a},b.byteLength=mo,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)Hc(this,e,e+1);return this},b.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)Hc(this,e,e+3),Hc(this,e+1,e+2);return this},b.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)Hc(this,e,e+7),Hc(this,e+1,e+6),Hc(this,e+2,e+5),Hc(this,e+3,e+4);return this},b.prototype.toString=function(){var r=0|this.length;return 0===r?"":0===arguments.length?ro(this,0,r):KE.apply(this,arguments)},b.prototype.equals=function(r){if(!b.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===b.compare(this,r)},b.prototype.inspect=function(){var r="",e=go;return this.length>0&&(r=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(r+=" ... ")),"<Buffer "+r+">"},b.prototype.compare=function(r,e,t,a,$){if(!b.isBuffer(r))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===t&&(t=r?r.length:0),void 0===a&&(a=0),void 0===$&&($=this.length),e<0||t>r.length||a<0||$>this.length)throw new RangeError("out of range index");if(a>=$&&e>=t)return 0;if(a>=$)return-1;if(e>=t)return 1;if(this===r)return 0;for(var n=($>>>=0)-(a>>>=0),f=(t>>>=0)-(e>>>=0),i=Math.min(n,f),o=this.slice(a,$),u=r.slice(e,t),B=0;B<i;++B)if(o[B]!==u[B]){n=o[B],f=u[B];break}return n<f?-1:f<n?1:0},b.prototype.includes=function(r,e,t){return-1!==this.indexOf(r,e,t)},b.prototype.indexOf=function(r,e,t){return oo(this,r,e,t,!0)},b.prototype.lastIndexOf=function(r,e,t){return oo(this,r,e,t,!1)},b.prototype.write=function(r,e,t,a){if(void 0===e)a="utf8",t=this.length,e=0;else if(void 0===t&&"string"==typeof e)a=e,t=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(t)?(t|=0,void 0===a&&(a="utf8")):(a=t,t=void 0)}var $=this.length-e;if((void 0===t||t>$)&&(t=$),r.length>0&&(t<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var n=!1;;)switch(a){case"hex":return PE(this,r,e,t);case"utf8":case"utf-8":return SE(this,r,e,t);case"ascii":return qo(this,r,e,t);case"latin1":case"binary":return WE(this,r,e,t);case"base64":return aF(this,r,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bF(this,r,e,t);default:if(n)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),n=!0;}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};ho=4096;b.prototype.slice=function(r,e){var t,a=this.length;if((r=~~r)<0?(r+=a)<0&&(r=0):r>a&&(r=a),(e=void 0===e?a:~~e)<0?(e+=a)<0&&(e=0):e>a&&(e=a),e<r&&(e=r),b.TYPED_ARRAY_SUPPORT)(t=this.subarray(r,e)).__proto__=b.prototype;else{var $=e-r;t=new b($,void 0);for(var n=0;n<$;++n)t[n]=this[n+r]}return t},b.prototype.readUIntLE=function(r,e,t){r|=0,e|=0,t||Q(r,e,this.length);for(var a=this[r],$=1,n=0;++n<e&&($*=256);)a+=this[r+n]*$;return a},b.prototype.readUIntBE=function(r,e,t){r|=0,e|=0,t||Q(r,e,this.length);for(var a=this[r+--e],$=1;e>0&&($*=256);)a+=this[r+--e]*$;return a},b.prototype.readUInt8=function(r,e){return e||Q(r,1,this.length),this[r]},b.prototype.readUInt16LE=function(r,e){return e||Q(r,2,this.length),this[r]|this[r+1]<<8},b.prototype.readUInt16BE=function(r,e){return e||Q(r,2,this.length),this[r]<<8|this[r+1]},b.prototype.readUInt32LE=function(r,e){return e||Q(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},b.prototype.readUInt32BE=function(r,e){return e||Q(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},b.prototype.readIntLE=function(r,e,t){r|=0,e|=0,t||Q(r,e,this.length);for(var a=this[r],$=1,n=0;++n<e&&($*=256);)a+=this[r+n]*$;return a>=($*=128)&&(a-=Math.pow(2,8*e)),a},b.prototype.readIntBE=function(r,e,t){r|=0,e|=0,t||Q(r,e,this.length);for(var a=e,$=1,n=this[r+--a];a>0&&($*=256);)n+=this[r+--a]*$;return n>=($*=128)&&(n-=Math.pow(2,8*e)),n},b.prototype.readInt8=function(r,e){return e||Q(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},b.prototype.readInt16LE=function(r,e){e||Q(r,2,this.length);var t=this[r]|this[r+1]<<8;return 32768&t?4294901760|t:t},b.prototype.readInt16BE=function(r,e){e||Q(r,2,this.length);var t=this[r+1]|this[r]<<8;return 32768&t?4294901760|t:t},b.prototype.readInt32LE=function(r,e){return e||Q(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},b.prototype.readInt32BE=function(r,e){return e||Q(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},b.prototype.readFloatLE=function(r,e){return e||Q(r,4,this.length),Ad.read(this,r,!0,23,4)},b.prototype.readFloatBE=function(r,e){return e||Q(r,4,this.length),Ad.read(this,r,!1,23,4)},b.prototype.readDoubleLE=function(r,e){return e||Q(r,8,this.length),Ad.read(this,r,!0,52,8)},b.prototype.readDoubleBE=function(r,e){return e||Q(r,8,this.length),Ad.read(this,r,!1,52,8)},b.prototype.writeUIntLE=function(r,e,t,a){(r=+r,e|=0,t|=0,a)||ka(this,r,e,t,Math.pow(2,8*t)-1,0);var $=1,n=0;for(this[e]=255&r;++n<t&&($*=256);)this[e+n]=r/$&255;return e+t},b.prototype.writeUIntBE=function(r,e,t,a){(r=+r,e|=0,t|=0,a)||ka(this,r,e,t,Math.pow(2,8*t)-1,0);var $=t-1,n=1;for(this[e+$]=255&r;--$>=0&&(n*=256);)this[e+$]=r/n&255;return e+t},b.prototype.writeUInt8=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,1,255,0),b.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[e]=255&r,e+1},b.prototype.writeUInt16LE=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8):Uf(this,r,e,!0),e+2},b.prototype.writeUInt16BE=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=255&r):Uf(this,r,e,!1),e+2},b.prototype.writeUInt32LE=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=255&r):Sf(this,r,e,!0),e+4},b.prototype.writeUInt32BE=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r):Sf(this,r,e,!1),e+4},b.prototype.writeIntLE=function(r,e,t,a){if(r=+r,e|=0,!a){var $=Math.pow(2,8*t-1);ka(this,r,e,t,$-1,-$)}var n=0,f=1,i=0;for(this[e]=255&r;++n<t&&(f*=256);)r<0&&0===i&&0!==this[e+n-1]&&(i=1),this[e+n]=(r/f>>0)-i&255;return e+t},b.prototype.writeIntBE=function(r,e,t,a){if(r=+r,e|=0,!a){var $=Math.pow(2,8*t-1);ka(this,r,e,t,$-1,-$)}var n=t-1,f=1,i=0;for(this[e+n]=255&r;--n>=0&&(f*=256);)r<0&&0===i&&0!==this[e+n+1]&&(i=1),this[e+n]=(r/f>>0)-i&255;return e+t},b.prototype.writeInt8=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,1,127,-128),b.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[e]=255&r,e+1},b.prototype.writeInt16LE=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8):Uf(this,r,e,!0),e+2},b.prototype.writeInt16BE=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=255&r):Uf(this,r,e,!1),e+2},b.prototype.writeInt32LE=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[e]=255&r,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24):Sf(this,r,e,!0),e+4},b.prototype.writeInt32BE=function(r,e,t){return r=+r,e|=0,t||ka(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),b.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r):Sf(this,r,e,!1),e+4},b.prototype.writeFloatLE=function(r,e,t){return uo(this,r,e,!0,t)},b.prototype.writeFloatBE=function(r,e,t){return uo(this,r,e,!1,t)},b.prototype.writeDoubleLE=function(r,e,t){return vo(this,r,e,!0,t)},b.prototype.writeDoubleBE=function(r,e,t){return vo(this,r,e,!1,t)},b.prototype.copy=function(r,e,t,a){if(t||(t=0),a||0===a||(a=this.length),e>=r.length&&(e=r.length),e||(e=0),a>0&&a<t&&(a=t),a===t)return 0;if(0===r.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),r.length-e<a-t&&(a=r.length-e+t);var $,n=a-t;if(this===r&&t<e&&e<a)for($=n-1;$>=0;--$)r[$+e]=this[$+t];else if(n<1e3||!b.TYPED_ARRAY_SUPPORT)for($=0;$<n;++$)r[$+e]=this[$+t];else Uint8Array.prototype.set.call(r,this.subarray(t,t+n),e);return n},b.prototype.fill=function(r,e,t,a){if("string"==typeof r){if("string"==typeof e?(a=e,e=0,t=this.length):"string"==typeof t&&(a=t,t=this.length),1===r.length){var $=r.charCodeAt(0);$<256&&(r=$)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!b.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof r&&(r&=255);if(e<0||this.length<e||this.length<t)throw new RangeError("Out of range index");if(t<=e)return this;var n;if(e>>>=0,t=void 0===t?this.length:t>>>0,r||(r=0),"number"==typeof r)for(n=e;n<t;++n)this[n]=r;else{var f=b.isBuffer(r)?r:Rf(new b(r,a).toString()),i=f.length;for(n=0;n<t-e;++n)this[n+e]=f[n%i]}return this};lD=/[^+\/0-9A-Za-z-_]/g}var K,eG,gG,hG,iG,jG,kG,lG,mG,nG,oG,pG,qG,rG,sG,tG,vG,wG=false;function xG($){return Array.isArray?Array.isArray($):"[object Array]"===Nf($)}function yG($){return"boolean"==typeof $}function EG($){return null===$}function FG($){return null==$}function SG($){return"number"==typeof $}function UG($){return"string"==typeof $}function VG($){return"symbol"==typeof $}function WG($){return void 0===$}function XG($){return"[object RegExp]"===Nf($)}function $G($){return"object"==typeof $&&null!==$}function nH($){return"[object Date]"===Nf($)}function oH($){return"[object Error]"===Nf($)||$ instanceof Error}function qH($){return"function"==typeof $}function tH($){return null===$||"boolean"==typeof $||"number"==typeof $||"string"==typeof $||"symbol"==typeof $||void 0===$}function Nf($){return Object.prototype.toString.call($)}function hf(){if(wG)return;wG=true;K={};eG=(Ma(),Z).Buffer;gG=xG;K.isArray=gG;hG=yG;K.isBoolean=hG;iG=EG;K.isNull=iG;jG=FG;K.isNullOrUndefined=jG;kG=SG;K.isNumber=kG;lG=UG;K.isString=lG;mG=VG;K.isSymbol=mG;nG=WG;K.isUndefined=nG;oG=XG;K.isRegExp=oG;pG=$G;K.isObject=pG;qG=nH;K.isDate=qG;rG=oH;K.isError=rG;sG=qH;K.isFunction=sG;tG=tH;K.isPrimitive=tG;vG=eG.isBuffer;K.isBuffer=vG}var LH,MH=false;function PH(r,a){if(Qi("noDeprecation"))return r;var e=!1;return function(){if(!e){if(Qi("throwDeprecation"))throw new Error(a);Qi("traceDeprecation")?console.trace(a):console.warn(a),e=!0}return r.apply(this,arguments)}}function Qi(r){try{if(!q.localStorage)return!1}catch(e){return!1}var a=q.localStorage[r];return null!=a&&"true"===String(a).toLowerCase()}function TH(){if(MH)return;MH=true;LH={};LH=PH}var vd,Jf,nb,zI=false;function Co(r,$){for(var f in r)$[f]=r[f]}function ud(r,$,f){return nb(r,$,f)}function Gf(){if(zI)return;zI=true;vd={};Jf=(Ma(),Z);nb=Jf.Buffer;if(nb.from&&nb.alloc&&nb.allocUnsafe&&nb.allocUnsafeSlow)vd=Jf;else{Co(Jf,vd);var $gIY$export$Buffer=ud;vd.Buffer=$gIY$export$Buffer}Co(nb,ud),ud.from=function(r,$,f){if("number"==typeof r)throw new TypeError("Argument must not be a number");return nb(r,$,f)},ud.alloc=function(r,$,f){if("number"!=typeof r)throw new TypeError("Argument must be a number");var e=nb(r);return void 0!==$?"string"==typeof f?e.fill($,f):e.fill($):e.fill(0),e},ud.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return nb(r)},ud.allocUnsafeSlow=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return Jf.SlowBuffer(r)}}var Eo,Fo,NI=false;function OI(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return a||i?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||Fo.nextTick(Go,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(Fo.nextTick(Go,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)}function QI(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Go(t,e){t.emit("error",e)}function Ho(){if(NI)return;NI=true;Eo={};Fo=(jg(),mg);Eo={destroy:OI,undestroy:QI}}var oc,Jo,aJ,Ko,Lo,Ei,NJ=false;function pb(e){if(!(this instanceof pb))return new pb(e);Lo.call(this,e),Ei.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",WJ)}function WJ(){this.allowHalfOpen||this._writableState.ended||Jo.nextTick(ZJ,this)}function ZJ(e){e.end()}function rc(){if(NJ)return;NJ=true;oc={};Jo=(jg(),mg);aJ=Object.keys||function(e){var $=[];for(var r in e)$.push(r);return $};oc=pb;Ko=(hf(),K);Ko.inherits=(Xb(),Yb);Lo=(Bp(),jp);Ei=(li(),Ai);Ko.inherits(pb,Lo);for(var $gYn$var$keys=aJ(Ei.prototype),$gYn$var$v=0;$gYn$var$v<$gYn$var$keys.length;$gYn$var$v++){var $gYn$var$method=$gYn$var$keys[$gYn$var$v];pb.prototype[$gYn$var$method]||(pb.prototype[$gYn$var$method]=Ei.prototype[$gYn$var$method])}Object.defineProperty(pb.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(pb.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),pb.prototype._destroy=function(e,$){this.push(null),this.end(),Jo.nextTick($,e)}}var Ai,No,uc,zf,IK,Oo,LK,Po,xf,UK,Ro,So,aL=false;function To(e){var r=this;this.next=null,this.entry=null,this.finish=function(){nu(r,e)}}function iL(e){return xf.from(e)}function mL(e){return xf.isBuffer(e)||e instanceof UK}function pL(){}function Qe(e,r){zf=zf||(rc(),oc),e=e||{};var t=r instanceof zf;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:t&&(n||0===n)?n:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=!1===e.decodeStrings;this.decodeStrings=!$,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){eu(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new To(this)}function G(e){if(zf=zf||(rc(),oc),!(Ro.call(G,this)||this instanceof zf))return new G(e);this._writableState=new Qe(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Po.call(this)}function vL(e,r){var t=new Error("write after end");e.emit("error",t),uc.nextTick(r,t)}function $t(e,r,t,i){var n=!0,a=!1;return null===t?a=new TypeError("May not write null values to stream"):"string"==typeof t||void 0===t||r.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),uc.nextTick(i,a),n=!1),n}function _t(e,r,t){return e.objectMode||!1===e.decodeStrings||"string"!=typeof r||(r=xf.from(r,t)),r}function au(e,r,t,i,n,a){if(!t){var $=_t(r,i,n);i!==$&&(t=!0,n="buffer",i=$)}var p=r.objectMode?1:i.length;r.length+=p;var o=r.length<r.highWaterMark;if(o||(r.needDrain=!0),r.writing||r.corked){var s=r.lastBufferedRequest;r.lastBufferedRequest={chunk:i,encoding:n,isBuf:t,callback:a,next:null},s?s.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else oi(e,r,!1,p,i,n,a);return o}function oi(e,r,t,i,n,a,$){r.writelen=i,r.writecb=$,r.writing=!0,r.sync=!0,t?e._writev(n,r.onwrite):e._write(n,a,r.onwrite),r.sync=!1}function cu(e,r,t,i,n){--r.pendingcb,t?(uc.nextTick(n,i),uc.nextTick(Me,e,r),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),Me(e,r))}function du(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function eu(e,r){var t=e._writableState,i=t.sync,n=t.writecb;if(du(t),r)cu(e,t,i,r,n);else{var a=Zo(t);a||t.corked||t.bufferProcessing||!t.bufferedRequest||Yo(e,t),i?IK(Xo,e,t,a,n):Xo(e,t,a,n)}}function Xo(e,r,t,i){t||gu(e,r),r.pendingcb--,i(),Me(e,r)}function gu(e,r){0===r.length&&r.needDrain&&(r.needDrain=!1,e.emit("drain"))}function Yo(e,r){r.bufferProcessing=!0;var t=r.bufferedRequest;if(e._writev&&t&&t.next){var i=r.bufferedRequestCount,n=new Array(i),a=r.corkedRequestsFree;a.entry=t;for(var $=0,p=!0;t;)n[$]=t,t.isBuf||(p=!1),t=t.next,$+=1;n.allBuffers=p,oi(e,r,!0,r.length,n,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new To(r),r.bufferedRequestCount=0}else{for(;t;){var o=t.chunk,s=t.encoding,f=t.callback;if(oi(e,r,!1,r.objectMode?1:o.length,o,s,f),t=t.next,r.bufferedRequestCount--,r.writing)break}null===t&&(r.lastBufferedRequest=null)}r.bufferedRequest=t,r.bufferProcessing=!1}function Zo(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function ju(e,r){e._final(function(t){r.pendingcb--,t&&e.emit("error",t),r.prefinished=!0,e.emit("prefinish"),Me(e,r)})}function ku(e,r){r.prefinished||r.finalCalled||("function"==typeof e._final?(r.pendingcb++,r.finalCalled=!0,uc.nextTick(ju,e,r)):(r.prefinished=!0,e.emit("prefinish")))}function Me(e,r){var t=Zo(r);return t&&(ku(e,r),0===r.pendingcb&&(r.finished=!0,e.emit("finish"))),t}function mu(e,r,t){r.ending=!0,Me(e,r),t&&(r.finished?uc.nextTick(t):e.once("finish",t)),r.ended=!0,e.writable=!1}function nu(e,r,t){var i=e.entry;for(e.entry=null;i;){var n=i.callback;r.pendingcb--,n(t),i=i.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}function li(){if(aL)return;aL=true;Ai={};No=(va(),Aa);uc=(jg(),mg);Ai=G;IK=!No.browser&&["v0.10","v0.9."].indexOf(No.version.slice(0,5))>-1?setImmediate:uc.nextTick;G.WritableState=Qe;Oo=(hf(),K);Oo.inherits=(Xb(),Yb);LK={deprecate:(TH(),LH)};Po=(cp(),bp);xf=(Gf(),vd).Buffer;UK=q.Uint8Array||function(){};So=(Ho(),Eo);Oo.inherits(G,Po),Qe.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r},function(){try{Object.defineProperty(Qe.prototype,"buffer",{get:LK.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Ro=Function.prototype[Symbol.hasInstance],Object.defineProperty(G,Symbol.hasInstance,{value:function(e){return!!Ro.call(this,e)||this===G&&e&&e._writableState instanceof Qe}})):Ro=function(e){return e instanceof this},G.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},G.prototype.write=function(e,r,t){var i=this._writableState,n=!1,a=!i.objectMode&&mL(e);return a&&!xf.isBuffer(e)&&(e=iL(e)),"function"==typeof r&&(t=r,r=null),a?r="buffer":r||(r=i.defaultEncoding),"function"!=typeof t&&(t=pL),i.ended?vL(this,t):(a||$t(this,i,e,t))&&(i.pendingcb++,n=au(this,i,a,e,r,t)),n},G.prototype.cork=function(){this._writableState.corked++},G.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Yo(this,e))},G.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(G.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),G.prototype._write=function(e,r,t){t(new Error("_write() is not implemented"))},G.prototype._writev=null,G.prototype.end=function(e,r,t){var i=this._writableState;"function"==typeof e?(t=e,e=null,r=null):"function"==typeof r&&(t=r,r=null),null!=e&&this.write(e,r),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||mu(this,i,t)},Object.defineProperty(G.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),G.prototype.destroy=So.destroy,G.prototype._undestroy=So.undestroy,G.prototype._destroy=function(e,r){this.end(),r(e)}}var pu,qu=false;function ru(){if(qu)return;qu=true;pu={};pu=(li(),Ai)}var su,tu=false;function uu(){if(tu)return;tu=true;su={};su=(rc(),oc)}var vu,wu=false;function xu(){if(wu)return;wu=true;vu={};vu=(ee(),Da).Transform}var yu,zu=false;function Au(){if(zu)return;zu=true;yu={};yu=(ee(),Da).PassThrough}var ki,ji,Du,Eu=false;function Xa(){ji.call(this)}function gi(){if(Eu)return;Eu=true;ki={};ki=Xa;ji=(bo(),Un).EventEmitter;Du=(Xb(),Yb);Du(Xa,ji),Xa.Readable=(ee(),Da),Xa.Writable=(ru(),pu),Xa.Duplex=(uu(),su),Xa.Transform=(xu(),vu),Xa.PassThrough=(Au(),yu),Xa.Stream=Xa,Xa.prototype.pipe=function(e,r){var a=this;function $(r){e.writable&&!1===e.write(r)&&a.pause&&a.pause()}function t(){a.readable&&a.resume&&a.resume()}a.on("data",$),e.on("drain",t),e._isStdio||r&&!1===r.end||(a.on("end",o),a.on("close",i));var n=!1;function o(){n||(n=!0,e.end())}function i(){n||(n=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(m(),0===ji.listenerCount(this,"error"))throw e}function m(){a.removeListener("data",$),e.removeListener("drain",t),a.removeListener("end",o),a.removeListener("close",i),a.removeListener("error",s),e.removeListener("error",s),a.removeListener("end",m),a.removeListener("close",m),e.removeListener("close",m)}return a.on("error",s),e.on("error",s),a.on("end",m),a.on("close",m),e.on("close",m),e.emit("pipe",a),e}}var bp,Iu=false;function cp(){if(Iu)return;Iu=true;bp={};bp=(gi(),ki)}var Ku=false;function dp(){if(Ku)return;Ku=true}var ep,fp,Ke,Pu=false;function Qu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ru(t,e,a){t.copy(e,a)}function Su(){if(Pu)return;Pu=true;ep={};fp=(Gf(),vd).Buffer;Ke=(dp(),{});ep=function(){function t(){Qu(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,a=""+e.data;e=e.next;)a+=t+e.data;return a},t.prototype.concat=function(t){if(0===this.length)return fp.alloc(0);if(1===this.length)return this.head.data;for(var e=fp.allocUnsafe(t>>>0),a=this.head,i=0;a;)Ru(a.data,e,i),i+=a.data.length,a=a.next;return e},t}(),Ke&&Ke.inspect&&Ke.inspect.custom&&(ep.prototype[Ke.inspect.custom]=function(){var t=Ke.inspect({length:this.length});return this.constructor.name+" "+t})}var di,bi,hp,Wu,Xu=false;function Yu(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0;}}function Zu(t){var e=Yu(t);if("string"!=typeof e&&(bi.isEncoding===hp||!hp(t)))throw new Error("Unknown encoding: "+t);return e||t}function Ge(t){var e;switch(this.encoding=Zu(t),this.encoding){case"utf16le":this.text=fv,this.end=gv,e=4;break;case"utf8":this.fillLast=cv,e=4;break;case"base64":this.text=hv,this.end=iv,e=3;break;default:return this.write=jv,void(this.end=kv);}this.lastNeed=0,this.lastTotal=0,this.lastChar=bi.allocUnsafe(e)}function Yh(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function av(t,e,i){var r=e.length-1;if(r<i)return 0;var a=Yh(e[r]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--r<i||-2===a?0:(a=Yh(e[r]))>=0?(a>0&&(t.lastNeed=a-2),a):--r<i||-2===a?0:(a=Yh(e[r]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function bv(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\uFFFD"}}function cv(t){var e=this.lastTotal-this.lastNeed,i=bv(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function dv(t,e){var i=av(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function ev(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function fv(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function gv(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function hv(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function iv(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function jv(t){return t.toString(this.encoding)}function kv(t){return t&&t.length?this.write(t):""}function ip(){if(Xu)return;Xu=true;di={};bi=(Gf(),vd).Buffer;hp=bi.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}};Wu=Ge;di.StringDecoder=Wu,Ge.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},Ge.prototype.end=ev,Ge.prototype.text=dv,Ge.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}}var jp,kp,qd,lp,qv,zL,np,Wh,Ae,vv,pp,Th,w,sh,Av,rp,Oh,sp,Ev=false;function Fv(e){return Ae.from(e)}function Gv(e){return Ae.isBuffer(e)||e instanceof vv}function Hv(e,a,r){if("function"==typeof e.prependListener)return e.prependListener(a,r);e._events&&e._events[a]?qv(e._events[a])?e._events[a].unshift(r):e._events[a]=[r,e._events[a]]:e.on(a,r)}function tp(e,a){e=e||{};var r=a instanceof(lp=lp||(rc(),oc));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var t=e.highWaterMark,n=e.readableHighWaterMark,$=this.objectMode?16:16384;this.highWaterMark=t||0===t?t:r&&(n||0===n)?n:$,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Av,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(sh||(sh=(ip(),di).StringDecoder),this.decoder=new sh(e.encoding),this.encoding=e.encoding)}function y(e){if(lp=lp||(rc(),oc),!(this instanceof y))return new y(e);this._readableState=new tp(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Wh.call(this)}function up(e,a,r,t,n){var $,o=e._readableState;null===a?(o.reading=!1,Qv(e,o)):(n||($=Mv(o,a)),$?e.emit("error",$):o.objectMode||a&&a.length>0?("string"==typeof a||o.objectMode||Object.getPrototypeOf(a)===Ae.prototype||(a=Fv(a)),t?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Kh(e,o,a,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(a=o.decoder.write(a),o.objectMode||0!==a.length?Kh(e,o,a,!1):yp(e,o)):Kh(e,o,a,!1))):t||(o.reading=!1));return Nv(o)}function Kh(e,a,r,t){a.flowing&&0===a.length&&!a.sync?(e.emit("data",r),e.read(0)):(a.length+=a.objectMode?1:r.length,t?a.buffer.unshift(r):a.buffer.push(r),a.needReadable&&kh(e)),yp(e,a)}function Mv(e,a){var r;return Gv(a)||"string"==typeof a||void 0===a||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function Nv(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function Ov(e){return e>=sp?e=sp:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function vp(e,a){return e<=0||0===a.length&&a.ended?0:a.objectMode?1:e!=e?a.flowing&&a.length?a.buffer.head.data.length:a.length:(e>a.highWaterMark&&(a.highWaterMark=Ov(e)),e<=a.length?e:a.ended?a.length:(a.needReadable=!0,0))}function Qv(e,a){if(!a.ended){if(a.decoder){var r=a.decoder.end();r&&r.length&&(a.buffer.push(r),a.length+=a.objectMode?1:r.length)}a.ended=!0,kh(e)}}function kh(e){var a=e._readableState;a.needReadable=!1,a.emittedReadable||(w("emitReadable",a.flowing),a.emittedReadable=!0,a.sync?qd.nextTick(xp,e):xp(e))}function xp(e){w("emit readable"),e.emit("readable"),Hh(e)}function yp(e,a){a.readingMore||(a.readingMore=!0,qd.nextTick(Uv,e,a))}function Uv(e,a){for(var r=a.length;!a.reading&&!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(w("maybeReadMore read 0"),e.read(0),r!==a.length);)r=a.length;a.readingMore=!1}function Vv(e){return function(){var a=e._readableState;w("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,0===a.awaitDrain&&np(e,"data")&&(a.flowing=!0,Hh(e))}}function Wv(e){w("readable nexttick read 0"),e.read(0)}function Xv(e,a){a.resumeScheduled||(a.resumeScheduled=!0,qd.nextTick(Yv,e,a))}function Yv(e,a){a.reading||(w("resume read 0"),e.read(0)),a.resumeScheduled=!1,a.awaitDrain=0,e.emit("resume"),Hh(e),a.flowing&&!a.reading&&e.read(0)}function Hh(e){var a=e._readableState;for(w("flow",a.flowing);a.flowing&&null!==e.read(););}function zp(e,a){return 0===a.length?null:(a.objectMode?r=a.buffer.shift():!e||e>=a.length?(r=a.decoder?a.buffer.join(""):1===a.buffer.length?a.buffer.head.data:a.buffer.concat(a.length),a.buffer.clear()):r=_v(e,a.buffer,a.decoder),r);var r}function _v(e,a,r){var t;return e<a.head.data.length?(t=a.head.data.slice(0,e),a.head.data=a.head.data.slice(e)):t=e===a.head.data.length?a.shift():r?aw(e,a):bw(e,a),t}function aw(e,a){var r=a.head,t=1,n=r.data;for(e-=n.length;r=r.next;){var $=r.data,o=e>$.length?$.length:e;if(o===$.length?n+=$:n+=$.slice(0,e),0===(e-=o)){o===$.length?(++t,r.next?a.head=r.next:a.head=a.tail=null):(a.head=r,r.data=$.slice(o));break}++t}return a.length-=t,n}function bw(e,a){var r=Ae.allocUnsafe(e),t=a.head,n=1;for(t.data.copy(r),e-=t.data.length;t=t.next;){var $=t.data,o=e>$.length?$.length:e;if($.copy(r,r.length-e,0,o),0===(e-=o)){o===$.length?(++n,t.next?a.head=t.next:a.head=a.tail=null):(a.head=t,t.data=$.slice(o));break}++n}return a.length-=n,r}function Gh(e){var a=e._readableState;if(a.length>0)throw new Error("\"endReadable()\" called on non-empty stream");a.endEmitted||(a.ended=!0,qd.nextTick(dw,a,e))}function dw(e,a){e.endEmitted||0!==e.length||(e.endEmitted=!0,a.readable=!1,a.emit("end"))}function Ap(e,a){for(var r=0,t=e.length;r<t;r++)if(e[r]===a)return r;return-1}function Bp(){if(Ev)return;Ev=true;jp={};kp=(va(),Aa);qd=(jg(),mg);jp=y;qv=(Tn(),Sn);y.ReadableState=tp;zL=(bo(),Un).EventEmitter;np=function(e,a){return e.listeners(a).length};Wh=(cp(),bp);Ae=(Gf(),vd).Buffer;vv=q.Uint8Array||function(){};pp=(hf(),K);pp.inherits=(Xb(),Yb);Th=(dp(),{});w=void 0;w=Th&&Th.debuglog?Th.debuglog("stream"):function(){};Av=(Su(),ep);rp=(Ho(),Eo);pp.inherits(y,Wh);Oh=["error","close","destroy","pause","resume"];Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=rp.destroy,y.prototype._undestroy=rp.undestroy,y.prototype._destroy=function(e,a){this.push(null),a(e)},y.prototype.push=function(e,a){var r,t=this._readableState;return t.objectMode?r=!0:"string"==typeof e&&((a=a||t.defaultEncoding)!==t.encoding&&(e=Ae.from(e,a),a=""),r=!0),up(this,e,a,!1,r)},y.prototype.unshift=function(e){return up(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return sh||(sh=(ip(),di).StringDecoder),this._readableState.decoder=new sh(e),this._readableState.encoding=e,this};sp=8388608;y.prototype.read=function(e){w("read",e),e=parseInt(e,10);var a=this._readableState,r=e;if(0!==e&&(a.emittedReadable=!1),0===e&&a.needReadable&&(a.length>=a.highWaterMark||a.ended))return w("read: emitReadable",a.length,a.ended),0===a.length&&a.ended?Gh(this):kh(this),null;if(0===(e=vp(e,a))&&a.ended)return 0===a.length&&Gh(this),null;var t,n=a.needReadable;return w("need readable",n),(0===a.length||a.length-e<a.highWaterMark)&&w("length less than watermark",n=!0),a.ended||a.reading?w("reading or ended",n=!1):n&&(w("do read"),a.reading=!0,a.sync=!0,0===a.length&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(e=vp(r,a))),null===(t=e>0?zp(e,a):null)?(a.needReadable=!0,e=0):a.length-=e,0===a.length&&(a.ended||(a.needReadable=!0),r!==e&&a.ended&&Gh(this)),null!==t&&this.emit("data",t),t},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,a){var r=this,t=this._readableState;switch(t.pipesCount){case 0:t.pipes=e;break;case 1:t.pipes=[t.pipes,e];break;default:t.pipes.push(e);}t.pipesCount+=1,w("pipe count=%d opts=%j",t.pipesCount,a);var n=(!a||!1!==a.end)&&e!==kp.stdout&&e!==kp.stderr?o:p;function $(a,n){w("onunpipe"),a===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,w("cleanup"),e.removeListener("close",v),e.removeListener("finish",h),e.removeListener("drain",i),e.removeListener("error",s),e.removeListener("unpipe",$),r.removeListener("end",o),r.removeListener("end",p),r.removeListener("data",u),d=!0,!t.awaitDrain||e._writableState&&!e._writableState.needDrain||i())}function o(){w("onend"),e.end()}t.endEmitted?qd.nextTick(n):r.once("end",n),e.on("unpipe",$);var i=Vv(r);e.on("drain",i);var d=!1;var l=!1;function u(a){w("ondata"),l=!1,!1!==e.write(a)||l||((1===t.pipesCount&&t.pipes===e||t.pipesCount>1&&-1!==Ap(t.pipes,e))&&!d&&(w("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function s(a){w("onerror",a),p(),e.removeListener("error",s),0===np(e,"error")&&e.emit("error",a)}function v(){e.removeListener("finish",h),p()}function h(){w("onfinish"),e.removeListener("close",v),p()}function p(){w("unpipe"),r.unpipe(e)}return r.on("data",u),Hv(e,"error",s),e.once("close",v),e.once("finish",h),e.emit("pipe",r),t.flowing||(w("pipe resume"),r.resume()),e},y.prototype.unpipe=function(e){var a=this._readableState,r={hasUnpiped:!1};if(0===a.pipesCount)return this;if(1===a.pipesCount)return e&&e!==a.pipes?this:(e||(e=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var t=a.pipes,n=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var $=0;$<n;$++)t[$].emit("unpipe",this,r);return this}var o=Ap(a.pipes,e);return-1===o?this:(a.pipes.splice(o,1),a.pipesCount-=1,1===a.pipesCount&&(a.pipes=a.pipes[0]),e.emit("unpipe",this,r),this)},y.prototype.on=function(e,a){var r=Wh.prototype.on.call(this,e,a);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var t=this._readableState;t.endEmitted||t.readableListening||(t.readableListening=t.needReadable=!0,t.emittedReadable=!1,t.reading?t.length&&kh(this):qd.nextTick(Wv,this))}return r},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(w("resume"),e.flowing=!0,Xv(this,e)),this},y.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var a=this,r=this._readableState,t=!1;for(var n in e.on("end",function(){if(w("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&a.push(e)}a.push(null)}),e.on("data",function(n){(w("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(a.push(n)||(t=!0,e.pause()))}),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(a){return function(){return e[a].apply(e,arguments)}}(n));for(var $=0;$<Oh.length;$++)e.on(Oh[$],this.emit.bind(this,Oh[$]));return this._read=function(a){w("wrapped _read",a),t&&(t=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=zp}var Cp,bh,Ep,jw=false;function kw(r,t){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=t&&this.push(t),n(r);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function kb(r){if(!(this instanceof kb))return new kb(r);bh.call(this,r),this._transformState={afterTransform:kw.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",mw)}function mw(){var r=this;"function"==typeof this._flush?this._flush(function(t,e){Fp(r,t,e)}):Fp(this,null,null)}function Fp(r,t,e){if(t)return r.emit("error",t);if(null!=e&&r.push(e),r._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(r._transformState.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}function Gp(){if(jw)return;jw=true;Cp={};Cp=kb;bh=(rc(),oc);Ep=(hf(),K);Ep.inherits=(Xb(),Yb),Ep.inherits(kb,bh),kb.prototype.push=function(r,t){return this._transformState.needTransform=!1,bh.prototype.push.call(this,r,t)},kb.prototype._transform=function(r,t,e){throw new Error("_transform() is not implemented")},kb.prototype._write=function(r,t,e){var n=this._transformState;if(n.writecb=e,n.writechunk=r,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},kb.prototype._read=function(r){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},kb.prototype._destroy=function(r,t){var e=this;bh.prototype._destroy.call(this,r,function(r){t(r),e.emit("close")})}}var pw,Hp,Ip,sw=false;function he(r){if(!(this instanceof he))return new he(r);Hp.call(this,r)}function uw(){if(sw)return;sw=true;pw={};pw=he;Hp=(Gp(),Cp);Ip=(hf(),K);Ip.inherits=(Xb(),Yb),Ip.inherits(he,Hp),he.prototype._transform=function(r,$,u){u(null,r)}}var Da,ww,xw,yw,zw,Aw,Bw,Cw=false;function ee(){if(Cw)return;Cw=true;Da={};ww=Da=Da=(Bp(),jp);Da.Stream=ww;xw=Da;Da.Readable=xw;yw=(li(),Ai);Da.Writable=yw;zw=(rc(),oc);Da.Duplex=zw;Aw=(Gp(),Cp);Da.Transform=Aw;Bw=(uw(),pw);Da.PassThrough=Bw}var Ew,Fw,Sc,Hw,Ug,Kp,Kw,Lp,gf,Ol,Ow=false;function Mp(){if(Ow)return;Ow=true;Sc=(Ma(),Z).Buffer;Hw=(va(),Aa);Ug={};Kp=(Gn(),U);Kw=(Xb(),Yb);Lp=(ee(),Da);gf=(Ew={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},Ug.readyStates=Ew);Ol=(Fw=function(e,r,a,t){var s=this;if(Lp.Readable.call(s),s._mode=a,s.headers={},s.rawHeaders=[],s.trailers={},s.rawTrailers=[],s.on("end",function(){Hw.nextTick(function(){s.emit("close")})}),"fetch"===a){if(s._fetchResponse=r,s.url=r.url,s.statusCode=r.status,s.statusMessage=r.statusText,r.headers.forEach(function(e,r){s.headers[r.toLowerCase()]=e,s.rawHeaders.push(r,e)}),Kp.writableStream){var $=new WritableStream({write:function(e){return new Promise(function(r,a){s._destroyed?a():s.push(new Sc(e))?r():s._resumeFetch=r})},close:function(){q.clearTimeout(t),s._destroyed||s.push(null)},abort:function(e){s._destroyed||s.emit("error",e)}});try{return void r.body.pipeTo($).catch(function(e){q.clearTimeout(t),s._destroyed||s.emit("error",e)})}catch(c){}}var o=r.body.getReader();!function e(){o.read().then(function(r){if(!s._destroyed){if(r.done)return q.clearTimeout(t),void s.push(null);s.push(new Sc(r.value)),e()}}).catch(function(e){q.clearTimeout(t),s._destroyed||s.emit("error",e)})}()}else{if(s._xhr=e,s._pos=0,s.url=e.responseURL,s.statusCode=e.status,s.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var r=e.match(/^([^:]+):\s*(.*)/);if(r){var a=r[1].toLowerCase();"set-cookie"===a?(void 0===s.headers[a]&&(s.headers[a]=[]),s.headers[a].push(r[2])):void 0!==s.headers[a]?s.headers[a]+=", "+r[2]:s.headers[a]=r[2],s.rawHeaders.push(r[1],r[2])}}),s._charset="x-user-defined",!Kp.overrideMimeType){var n=s.rawHeaders["mime-type"];if(n){var i=n.match(/;\s*charset=([^;])(;|$)/);i&&(s._charset=i[1].toLowerCase())}s._charset||(s._charset="utf-8")}}},Ug.IncomingMessage=Fw);Kw(Ol,Lp.Readable),Ol.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},Ol.prototype._onXHRProgress=function(){var e=this,r=e._xhr,a=null;switch(e._mode){case"text:vbarray":if(r.readyState!==gf.DONE)break;try{a=new q.VBArray(r.responseBody).toArray()}catch(n){}if(null!==a){e.push(new Sc(a));break}case"text":try{a=r.responseText}catch(n){e._mode="text:vbarray";break}if(a.length>e._pos){var t=a.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new Sc(t.length),$=0;$<t.length;$++)s[$]=255&t.charCodeAt($);e.push(s)}else e.push(t,e._charset);e._pos=a.length}break;case"arraybuffer":if(r.readyState!==gf.DONE||!r.response)break;a=r.response,e.push(new Sc(new Uint8Array(a)));break;case"moz-chunked-arraybuffer":if(a=r.response,r.readyState!==gf.LOADING||!a)break;e.push(new Sc(new Uint8Array(a)));break;case"ms-stream":if(a=r.response,r.readyState!==gf.LOADING)break;var o=new q.MSStreamReader;o.onprogress=function(){o.result.byteLength>e._pos&&(e.push(new Sc(new Uint8Array(o.result.slice(e._pos)))),e._pos=o.result.byteLength)},o.onload=function(){e.push(null)},o.readAsArrayBuffer(a);}e._xhr.readyState===gf.DONE&&"ms-stream"!==e._mode&&e.push(null)}}var Qw,Rw,Sw=false;function Tw(){if(Sw)return;Sw=true;Qw={};Rw=(Ma(),Z).Buffer;Qw=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(Rw.isBuffer(e)){for(var f=new Uint8Array(e.length),r=e.length,t=0;t<r;t++)f[t]=e[t];return f.buffer}throw new Error("Argument must be a Buffer")}}var Uw,Np,Nl,Ra,Yw,Op,Hl,Pp,ax,Qp,$,dx,ex=false;function fx(e,r){return Ra.fetch&&r?"fetch":Ra.mozchunkedarraybuffer?"moz-chunked-arraybuffer":Ra.msstream?"ms-stream":Ra.arraybuffer&&e?"arraybuffer":Ra.vbArray&&e?"text:vbarray":"text"}function gx(e){try{var r=e.status;return null!==r&&0!==r}catch(t){return!1}}function hx(){if(ex)return;ex=true;Uw={};Np=(va(),Aa);Nl=(Ma(),Z).Buffer;Ra=(Gn(),U);Yw=(Xb(),Yb);Op=(Mp(),Ug);Hl=(ee(),Da);Pp=(Tw(),Qw);ax=Op.IncomingMessage;Qp=Op.readyStates;$=Uw=function(e){var r,t=this;Hl.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new Nl(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var o=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!Ra.abortController)o=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!Ra.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}t._mode=fx(r,o),t._fetchTimer=null,t.on("finish",function(){t._onFinish()})};Yw($,Hl.Writable),$.prototype.setHeader=function(e,r){var t=e.toLowerCase();-1===dx.indexOf(t)&&(this._headers[t]={name:e,value:r})},$.prototype.getHeader=function(e){var r=this._headers[e.toLowerCase()];return r?r.value:null},$.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},$.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,t=e._headers,o=null;"GET"!==r.method&&"HEAD"!==r.method&&(o=Ra.arraybuffer?Pp(Nl.concat(e._body)):Ra.blobConstructor?new q.Blob(e._body.map(function(e){return Pp(e)}),{type:(t["content-type"]||{}).value||""}):Nl.concat(e._body).toString());var a=[];if(Object.keys(t).forEach(function(e){var r=t[e].name,o=t[e].value;Array.isArray(o)?o.forEach(function(e){a.push([r,e])}):a.push([r,o])}),"fetch"===e._mode){var p=null;if(Ra.abortController){var n=new AbortController;p=n.signal,e._fetchAbortController=n,"requestTimeout"in r&&0!==r.requestTimeout&&(e._fetchTimer=q.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},r.requestTimeout))}q.fetch(e._opts.url,{method:e._opts.method,headers:a,body:o||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:p}).then(function(r){e._fetchResponse=r,e._connect()},function(r){q.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",r)})}else{var i=e._xhr=new q.XMLHttpRequest;try{i.open(e._opts.method,e._opts.url,!0)}catch(s){return void Np.nextTick(function(){e.emit("error",s)})}"responseType"in i&&(i.responseType=e._mode.split(":")[0]),"withCredentials"in i&&(i.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(i.timeout=r.requestTimeout,i.ontimeout=function(){e.emit("requestTimeout")}),a.forEach(function(e){i.setRequestHeader(e[0],e[1])}),e._response=null,i.onreadystatechange=function(){switch(i.readyState){case Qp.LOADING:case Qp.DONE:e._onXHRProgress();}},"moz-chunked-arraybuffer"===e._mode&&(i.onprogress=function(){e._onXHRProgress()}),i.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{i.send(o)}catch(s){return void Np.nextTick(function(){e.emit("error",s)})}}}},$.prototype._onXHRProgress=function(){gx(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},$.prototype._connect=function(){var e=this;e._destroyed||(e._response=new ax(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(r){e.emit("error",r)}),e.emit("response",e._response))},$.prototype._write=function(e,r,t){this._body.push(e),t()},$.prototype.abort=$.prototype.destroy=function(){this._destroyed=!0,q.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},$.prototype.end=function(e,r,t){"function"==typeof e&&(t=e,e=void 0),Hl.Writable.prototype.end.call(this,e,r,t)},$.prototype.flushHeaders=function(){},$.prototype.setTimeout=function(){},$.prototype.setNoDelay=function(){},$.prototype.setSocketKeepAlive=function(){};dx=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}var ix,jx,kx=false;function lx(){for(var r={},$=0;$<arguments.length;$++){var a=arguments[$];for(var e in a)jx.call(a,e)&&(r[e]=a[e])}return r}function mx(){if(kx)return;kx=true;ix={};ix=lx;jx=Object.prototype.hasOwnProperty}var nx,ox=false;function px(){if(ox)return;ox=true;nx={};nx={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}}var qx,rx=false;function sx(){if(rx)return;rx=true;qx=function(){var o=this,e={exports:this};return function(n){var r="object"==typeof o&&o&&!o.nodeType&&o,t="object"==typeof e&&e&&!e.nodeType&&e,i="object"==typeof q&&q;i.global!==i&&i.window!==i&&i.self!==i||(n=i);var u,f,c=2147483647,l=36,s=1,a=26,p=38,h=700,d=72,v=128,g="-",w=/^xn--/,x=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=l-s,j=Math.floor,A=String.fromCharCode;function $(o){throw new RangeError(C[o])}function I(o,e){for(var n=o.length,r=[];n--;)r[n]=e(o[n]);return r}function E(o,e){var n=o.split("@"),r="";return n.length>1&&(r=n[0]+"@",o=n[1]),r+I((o=o.replace(b,".")).split("."),e).join(".")}function F(o){for(var e,n,r=[],t=0,i=o.length;t<i;)(e=o.charCodeAt(t++))>=55296&&e<=56319&&t<i?56320==(64512&(n=o.charCodeAt(t++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),t--):r.push(e);return r}function O(o){return I(o,function(o){var e="";return o>65535&&(e+=A((o-=65536)>>>10&1023|55296),o=56320|1023&o),e+=A(o)}).join("")}function S(o,e){return o+22+75*(o<26)-((0!=e)<<5)}function B(o,e,n){var r=0;for(o=n?j(o/h):o>>1,o+=j(o/e);o>y*a>>1;r+=l)o=j(o/y);return j(r+(y+1)*o/(o+p))}function T(o){var e,n,r,t,i,u,f,p,h,w,x,b=[],C=o.length,y=0,A=v,I=d;for((n=o.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)o.charCodeAt(r)>=128&&$("not-basic"),b.push(o.charCodeAt(r));for(t=n>0?n+1:0;t<C;){for(i=y,u=1,f=l;t>=C&&$("invalid-input"),((p=(x=o.charCodeAt(t++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:l)>=l||p>j((c-y)/u))&&$("overflow"),y+=p*u,!(p<(h=f<=I?s:f>=I+a?a:f-I));f+=l)u>j(c/(w=l-h))&&$("overflow"),u*=w;I=B(y-i,e=b.length+1,0==i),j(y/e)>c-A&&$("overflow"),A+=j(y/e),y%=e,b.splice(y++,0,A)}return O(b)}function m(o){var e,n,r,t,i,u,f,p,h,w,x,b,C,y,I,E=[];for(b=(o=F(o)).length,e=v,n=0,i=d,u=0;u<b;++u)(x=o[u])<128&&E.push(A(x));for(r=t=E.length,t&&E.push(g);r<b;){for(f=c,u=0;u<b;++u)(x=o[u])>=e&&x<f&&(f=x);for(f-e>j((c-n)/(C=r+1))&&$("overflow"),n+=(f-e)*C,e=f,u=0;u<b;++u)if((x=o[u])<e&&++n>c&&$("overflow"),x==e){for(p=n,h=l;!(p<(w=h<=i?s:h>=i+a?a:h-i));h+=l)I=p-w,y=l-w,E.push(A(S(w+I%y,0))),p=j(I/y);E.push(A(S(p,0))),i=B(n,C,r==t),n=0,++r}++n,++e}return E.join("")}if(u={version:"1.4.1",ucs2:{decode:F,encode:O},decode:T,encode:m,toASCII:function(o){return E(o,function(o){return x.test(o)?"xn--"+m(o):o})},toUnicode:function(o){return E(o,function(o){return w.test(o)?T(o.slice(4).toLowerCase()):o})}},r&&t){if(e.exports==r)t.exports=u;else for(f in u)u.hasOwnProperty(f)&&(r[f]=u[f]);}else n.punycode=u}(this),e.exports}.call({})}var tx,ux=false;function vx(){if(ux)return;ux=true;tx={};tx={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}}}var wx,xx,yx=false;function zx(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Ax(){if(yx)return;yx=true;wx={};wx=function(r,e,t,a){e=e||"&",t=t||"=";var n={};if("string"!=typeof r||0===r.length)return n;var o=/\+/g;r=r.split(e);var s=1e3;a&&"number"==typeof a.maxKeys&&(s=a.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var $=0;$<p;++$){var y,b,v,O,c=r[$].replace(o,"%20"),i=c.indexOf(t);i>=0?(y=c.substr(0,i),b=c.substr(i+1)):(y=c,b=""),v=decodeURIComponent(y),O=decodeURIComponent(b),zx(n,v)?xx(n[v])?n[v].push(O):n[v]=[n[v],O]:n[v]=O}return n};xx=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)}}var Bx,Ye,Dx,Ex,Fx=false;function Sp(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}function Hx(){if(Fx)return;Fx=true;Bx={};Ye=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return"";}};Bx=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?Sp(Ex(r),function(n){var a=encodeURIComponent(Ye(n))+t;return Dx(r[n])?Sp(r[n],function(r){return a+encodeURIComponent(Ye(r))}).join(e):a+encodeURIComponent(Ye(r[n]))}).join(e):n?encodeURIComponent(Ye(n))+t+encodeURIComponent(Ye(r)):""};Dx=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};Ex=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e}}var Ix,Jx,Oe,Lx,Mx,Nx=false;function Ox(){if(Nx)return;Nx=true;Oe={};Lx=(Ix=(Ax(),wx),Oe.parse=Ix);Oe.decode=Lx;Mx=(Jx=(Hx(),Bx),Oe.stringify=Jx);Oe.encode=Mx}var Eb,Qx,_a,Sx,Tx,Ux,Vx,Wx,Xx,Yx,Zx,$x,_x,tl,Vp,Wp,dy,Xp,fy,gy,nl,kd,ll,ky=false;function ya(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function ge(t,r,s){if(t&&_a.isObject(t)&&t instanceof ya)return t;var a=new ya;return a.parse(t,r,s),a}function ny(t){return _a.isString(t)&&(t=ge(t)),t instanceof ya?t.format():ya.prototype.format.call(t)}function oy(t,r){return ge(t,!1,!0).resolve(r)}function py(t,r){return t?ge(t,!1,!0).resolveObject(r):r}function Bg(){if(ky)return;ky=true;Eb={};Qx=(sx(),qx);_a=(vx(),tx);Sx=ge;Eb.parse=Sx;Tx=oy;Eb.resolve=Tx;Ux=py;Eb.resolveObject=Ux;Vx=ny;Eb.format=Vx;Wx=ya;Eb.Url=Wx;Xx=/^([a-z0-9.+-]+:)/i;Yx=/:[0-9]*$/;Zx=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;$x=["<",">","\"","`"," ","\r","\n","\t"];_x=["{","}","|","\\","^","`"].concat($x);tl=["'"].concat(_x);Vp=["%","/","?",";","#"].concat(tl);Wp=["/","?","#"];dy=255;Xp=/^[+a-z0-9A-Z_-]{0,63}$/;fy=/^([+a-z0-9A-Z_-]{0,63})(.*)$/;gy={javascript:!0,"javascript:":!0};nl={javascript:!0,"javascript:":!0};kd={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};ll=(Ox(),Oe);ya.prototype.parse=function(t,r,s){if(!_a.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var a=t.indexOf("?"),e=-1!==a&&a<t.indexOf("#")?"?":"#",h=t.split(e);h[0]=h[0].replace(/\\/g,"/");var o=t=h.join(e);if(o=o.trim(),!s&&1===t.split("#").length){var $=Zx.exec(o);if($)return this.path=o,this.href=o,this.pathname=$[1],$[2]?(this.search=$[2],this.query=r?ll.parse(this.search.substr(1)):this.search.substr(1)):r&&(this.search="",this.query={}),this}var n=Xx.exec(o);if(n){var i=(n=n[0]).toLowerCase();this.protocol=i,o=o.substr(n.length)}if(s||n||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===o.substr(0,2);!l||n&&nl[n]||(o=o.substr(2),this.slashes=!0)}if(!nl[n]&&(l||n&&!kd[n])){for(var p,u,c=-1,v=0;v<Wp.length;v++){-1!==(j=o.indexOf(Wp[v]))&&(-1===c||j<c)&&(c=j)}-1!==(u=-1===c?o.lastIndexOf("@"):o.lastIndexOf("@",c))&&(p=o.slice(0,u),o=o.slice(u+1),this.auth=decodeURIComponent(p)),c=-1;for(v=0;v<Vp.length;v++){var j;-1!==(j=o.indexOf(Vp[v]))&&(-1===c||j<c)&&(c=j)}-1===c&&(c=o.length),this.host=o.slice(0,c),o=o.slice(c),this.parseHost(),this.hostname=this.hostname||"";var f="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!f)for(var m=this.hostname.split(/\./),I=(v=0,m.length);v<I;v++){var g=m[v];if(g&&!g.match(Xp)){for(var y="",P=0,d=g.length;P<d;P++)g.charCodeAt(P)>127?y+="x":y+=g[P];if(!y.match(Xp)){var x=m.slice(0,v),b=m.slice(v+1),q=g.match(fy);q&&(x.push(q[1]),b.unshift(q[2])),b.length&&(o="/"+b.join(".")+o),this.hostname=x.join(".");break}}}this.hostname.length>dy?this.hostname="":this.hostname=this.hostname.toLowerCase(),f||(this.hostname=Qx.toASCII(this.hostname));var O=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+O,this.href+=this.host,f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!gy[i])for(v=0,I=tl.length;v<I;v++){var C=tl[v];if(-1!==o.indexOf(C)){var A=encodeURIComponent(C);A===C&&(A=escape(C)),o=o.split(C).join(A)}}var w=o.indexOf("#");-1!==w&&(this.hash=o.substr(w),o=o.slice(0,w));var E=o.indexOf("?");if(-1!==E?(this.search=o.substr(E),this.query=o.substr(E+1),r&&(this.query=ll.parse(this.query)),o=o.slice(0,E)):r&&(this.search="",this.query={}),o&&(this.pathname=o),kd[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var R=this.search||"";this.path=O+R}return this.href=this.format(),this},ya.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=this.protocol||"",s=this.pathname||"",a=this.hash||"",e=!1,h="";this.host?e=t+this.host:this.hostname&&(e=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&_a.isObject(this.query)&&Object.keys(this.query).length&&(h=ll.stringify(this.query));var o=this.search||h&&"?"+h||"";return r&&":"!==r.substr(-1)&&(r+=":"),this.slashes||(!r||kd[r])&&!1!==e?(e="//"+(e||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):e||(e=""),a&&"#"!==a.charAt(0)&&(a="#"+a),o&&"?"!==o.charAt(0)&&(o="?"+o),r+e+(s=s.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+a},ya.prototype.resolve=function(t){return this.resolveObject(ge(t,!1,!0)).format()},ya.prototype.resolveObject=function(t){if(_a.isString(t)){var r=new ya;r.parse(t,!1,!0),t=r}for(var s=new ya,a=Object.keys(this),e=0;e<a.length;e++){var h=a[e];s[h]=this[h]}if(s.hash=t.hash,""===t.href)return s.href=s.format(),s;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),$=0;$<o.length;$++){var n=o[$];"protocol"!==n&&(s[n]=t[n])}return kd[s.protocol]&&s.hostname&&!s.pathname&&(s.path=s.pathname="/"),s.href=s.format(),s}if(t.protocol&&t.protocol!==s.protocol){if(!kd[t.protocol]){for(var i=Object.keys(t),l=0;l<i.length;l++){var p=i[l];s[p]=t[p]}return s.href=s.format(),s}if(s.protocol=t.protocol,t.host||nl[t.protocol])s.pathname=t.pathname;else{for(var u=(t.pathname||"").split("/");u.length&&!(t.host=u.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==u[0]&&u.unshift(""),u.length<2&&u.unshift(""),s.pathname=u.join("/")}if(s.search=t.search,s.query=t.query,s.host=t.host||"",s.auth=t.auth,s.hostname=t.hostname||t.host,s.port=t.port,s.pathname||s.search){var c=s.pathname||"",v=s.search||"";s.path=c+v}return s.slashes=s.slashes||t.slashes,s.href=s.format(),s}var j=s.pathname&&"/"===s.pathname.charAt(0),f=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=f||j||s.host&&t.pathname,I=m,g=s.pathname&&s.pathname.split("/")||[],y=(u=t.pathname&&t.pathname.split("/")||[],s.protocol&&!kd[s.protocol]);if(y&&(s.hostname="",s.port=null,s.host&&(""===g[0]?g[0]=s.host:g.unshift(s.host)),s.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===u[0]?u[0]=t.host:u.unshift(t.host)),t.host=null),m=m&&(""===u[0]||""===g[0])),f)s.host=t.host||""===t.host?t.host:s.host,s.hostname=t.hostname||""===t.hostname?t.hostname:s.hostname,s.search=t.search,s.query=t.query,g=u;else if(u.length)g||(g=[]),g.pop(),g=g.concat(u),s.search=t.search,s.query=t.query;else if(!_a.isNullOrUndefined(t.search)){if(y)s.hostname=s.host=g.shift(),(q=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=q.shift(),s.host=s.hostname=q.shift());return s.search=t.search,s.query=t.query,_a.isNull(s.pathname)&&_a.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.href=s.format(),s}if(!g.length)return s.pathname=null,s.search?s.path="/"+s.search:s.path=null,s.href=s.format(),s;for(var P=g.slice(-1)[0],d=(s.host||t.host||g.length>1)&&("."===P||".."===P)||""===P,x=0,b=g.length;b>=0;b--)"."===(P=g[b])?g.splice(b,1):".."===P?(g.splice(b,1),x++):x&&(g.splice(b,1),x--);if(!m&&!I)for(;x--;x)g.unshift("..");!m||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),d&&"/"!==g.join("/").substr(-1)&&g.push("");var q,O=""===g[0]||g[0]&&"/"===g[0].charAt(0);y&&(s.hostname=s.host=O?"":g.length?g.shift():"",(q=!!(s.host&&s.host.indexOf("@")>0)&&s.host.split("@"))&&(s.auth=q.shift(),s.host=s.hostname=q.shift()));return(m=m||s.host&&g.length)&&!O&&g.unshift(""),g.length?s.pathname=g.join("/"):(s.pathname=null,s.path=null),_a.isNull(s.pathname)&&_a.isNull(s.search)||(s.path=(s.pathname?s.pathname:"")+(s.search?s.search:"")),s.auth=t.auth||s.auth,s.slashes=s.slashes||t.slashes,s.href=s.format(),s},ya.prototype.parseHost=function(){var t=this.host,r=Yx.exec(t);r&&(":"!==(r=r[0])&&(this.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(this.hostname=t)}}var Ag,_p,ty,uy,vy,wy,Ha,yy=false;function Uk(){if(yy)return;yy=true;Ag={};_p=(hx(),Uw);ty=(Mp(),Ug);uy=(mx(),ix);vy=(px(),nx);wy=(Bg(),Eb);Ha=Ag;Ha.request=function($,e){$="string"==typeof $?wy.parse($):uy($);var t=-1===q.location.protocol.search(/^https?:$/)?"http:":"",r=$.protocol||t,a=$.hostname||$.host,s=$.port,f=$.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]"),$.url=(a?r+"//"+a:"")+(s?":"+s:"")+f,$.method=($.method||"GET").toUpperCase(),$.headers=$.headers||{};var n=new _p($);return e&&n.on("response",e),n},Ha.get=function($,e){var t=Ha.request($,e);return t.end(),t},Ha.ClientRequest=_p,Ha.IncomingMessage=ty.IncomingMessage,Ha.Agent=function(){},Ha.Agent.defaultMaxSockets=4,Ha.globalAgent=new Ha.Agent,Ha.STATUS_CODES=vy,Ha.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}var Tk,Fe,Cy,Qk,Ey=false;function cq($){if("string"==typeof $&&($=Cy.parse($)),$.protocol||($.protocol="https:"),"https:"!==$.protocol)throw new Error("Protocol \""+$.protocol+"\" not supported. Expected \"https:\"");return $}function dq(){if(Ey)return;Ey=true;Tk={};Fe=(Uk(),Ag);Cy=(Bg(),Eb);Qk=Tk;for(var $AHs$var$key in Fe)Fe.hasOwnProperty($AHs$var$key)&&(Qk[$AHs$var$key]=Fe[$AHs$var$key]);Qk.request=function($,r){return $=cq($),Fe.request.call(this,$,r)},Qk.get=function($,r){return $=cq($),Fe.get.call(this,$,r)}}var Hy,eq,Jy,Ky,Ly=false;function My(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function Ny(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(r){return e[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}function Oy(){if(Ly)return;Ly=true;Hy={};eq=Object.getOwnPropertySymbols;Jy=Object.prototype.hasOwnProperty;Ky=Object.prototype.propertyIsEnumerable;Hy=Ny()?Object.assign:function(r,e){for(var t,n,o=My(r),a=1;a<arguments.length;a++){for(var $ in t=Object(arguments[a]))Jy.call(t,$)&&(o[$]=t[$]);if(eq){n=eq(t);for(var O=0;O<n.length;O++)Ky.call(t,n[O])&&(o[n[O]]=t[n[O]])}}return o}}var Py,Qy,Ry=false;function Sy(){if(Ry)return;Ry=true;Py={};Qy=(Ma(),Z).Buffer;Py=function(e){return e instanceof Qy}}var Ty,Uy=false;function Vy(){if(Uy)return;Uy=true;Ty={};Ty="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}}var v,vg,Yy,Mk,hq,iq,sg,bz,kq,dz,ez,fz,gz,hz,iz,jz,kz,lz,mz,nz,oz,pz,qz,rz,sz,tz,uz,lq,wz=false;function ec(r,$){var e={seen:[],stylize:zz};return arguments.length>=3&&(e.depth=arguments[2]),arguments.length>=4&&(e.colors=arguments[3]),ek($)?e.showHidden=$:$&&lq(e,$),Bb(e.showHidden)&&(e.showHidden=!1),Bb(e.depth)&&(e.depth=2),Bb(e.colors)&&(e.colors=!1),Bb(e.customInspect)&&(e.customInspect=!0),e.colors&&(e.stylize=yz),qg(e,r,e.depth)}function yz(r,$){var e=ec.styles[$];return e?"\x1B["+ec.colors[e][0]+"m"+r+"\x1B["+ec.colors[e][1]+"m":r}function zz(r,$){return r}function Az(r){var $={};return r.forEach(function(r,e){$[r]=!0}),$}function qg(r,$,e){if(r.customInspect&&$&&Kf($.inspect)&&$.inspect!==kq&&(!$.constructor||$.constructor.prototype!==$)){var t=$.inspect(e,r);return Yf(t)||(t=qg(r,t,e)),t}var p=Cz(r,$);if(p)return p;var n=Object.keys($),i=Az(n);if(r.showHidden&&(n=Object.getOwnPropertyNames($)),Lf($)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return gk($);if(0===n.length){if(Kf($)){var o=$.name?": "+$.name:"";return r.stylize("[Function"+o+"]","special")}if(Of($))return r.stylize(RegExp.prototype.toString.call($),"regexp");if(Kj($))return r.stylize(Date.prototype.toString.call($),"date");if(Lf($))return gk($)}var a,s="",D=!1,W=["{","}"];(oq($)&&(D=!0,W=["[","]"]),Kf($))&&(s=" [Function"+($.name?": "+$.name:"")+"]");return Of($)&&(s=" "+RegExp.prototype.toString.call($)),Kj($)&&(s=" "+Date.prototype.toUTCString.call($)),Lf($)&&(s=" "+gk($)),0!==n.length||D&&0!=$.length?e<0?Of($)?r.stylize(RegExp.prototype.toString.call($),"regexp"):r.stylize("[Object]","special"):(r.seen.push($),a=D?Ez(r,$,e,i,n):n.map(function(t){return fk(r,$,e,i,t,D)}),r.seen.pop(),Gz(a,s,W)):W[0]+s+W[1]}function Cz(r,$){if(Bb($))return r.stylize("undefined","undefined");if(Yf($)){var e="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return r.stylize(e,"string")}return pq($)?r.stylize(""+$,"number"):ek($)?r.stylize(""+$,"boolean"):Zf($)?r.stylize("null","null"):void 0}function gk(r){return"["+Error.prototype.toString.call(r)+"]"}function Ez(r,$,e,t,p){for(var n=[],i=0,o=$.length;i<o;++i)vq($,String(i))?n.push(fk(r,$,e,t,String(i),!0)):n.push("");return p.forEach(function(p){p.match(/^\d+$/)||n.push(fk(r,$,e,t,p,!0))}),n}function fk(r,$,e,t,p,n){var i,o,a;if((a=Object.getOwnPropertyDescriptor($,p)||{value:$[p]}).get?o=a.set?r.stylize("[Getter/Setter]","special"):r.stylize("[Getter]","special"):a.set&&(o=r.stylize("[Setter]","special")),vq(t,p)||(i="["+p+"]"),o||(r.seen.indexOf(a.value)<0?(o=Zf(e)?qg(r,a.value,null):qg(r,a.value,e-1)).indexOf("\n")>-1&&(o=n?o.split("\n").map(function(r){return"  "+r}).join("\n").substr(2):"\n"+o.split("\n").map(function(r){return"   "+r}).join("\n")):o=r.stylize("[Circular]","special")),Bb(i)){if(n&&p.match(/^\d+$/))return o;(i=JSON.stringify(""+p)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=r.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),i=r.stylize(i,"string"))}return i+": "+o}function Gz(r,$,e){return r.reduce(function(r,$){return 0,$.indexOf("\n")>=0&&0,r+$.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?e[0]+(""===$?"":$+"\n ")+" "+r.join(",\n  ")+" "+e[1]:e[0]+$+" "+r.join(", ")+" "+e[1]}function oq(r){return Array.isArray(r)}function ek(r){return"boolean"==typeof r}function Zf(r){return null===r}function Kz(r){return null==r}function pq(r){return"number"==typeof r}function Yf(r){return"string"==typeof r}function Nz(r){return"symbol"==typeof r}function Bb(r){return void 0===r}function Of(r){return nd(r)&&"[object RegExp]"===Gj(r)}function nd(r){return"object"==typeof r&&null!==r}function Kj(r){return nd(r)&&"[object Date]"===Gj(r)}function Lf(r){return nd(r)&&("[object Error]"===Gj(r)||r instanceof Error)}function Kf(r){return"function"==typeof r}function Uz(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function Gj(r){return Object.prototype.toString.call(r)}function Fj(r){return r<10?"0"+r.toString(10):r.toString(10)}function Xz(){var r=new Date,$=[Fj(r.getHours()),Fj(r.getMinutes()),Fj(r.getSeconds())].join(":");return[r.getDate(),sz[r.getMonth()],$].join(" ")}function vq(r,$){return Object.prototype.hasOwnProperty.call(r,$)}function Zz(){if(wz)return;wz=true;v={};vg=(va(),Aa);Yy=/%[sdj%]/g;Mk=function(r){if(!Yf(r)){for(var $=[],e=0;e<arguments.length;e++)$.push(ec(arguments[e]));return $.join(" ")}e=1;for(var t=arguments,p=t.length,n=String(r).replace(Yy,function(r){if("%%"===r)return"%";if(e>=p)return r;switch(r){case"%s":return String(t[e++]);case"%d":return Number(t[e++]);case"%j":try{return JSON.stringify(t[e++])}catch($){return"[Circular]"}default:return r;}}),i=t[e];e<p;i=t[++e])Zf(i)||!nd(i)?n+=" "+i:n+=" "+ec(i);return n};v.format=Mk;hq=function(r,$){if(Bb(q.process))return function(){return hq(r,$).apply(this,arguments)};if(!0===vg.noDeprecation)return r;var e=!1;return function(){if(!e){if(vg.throwDeprecation)throw new Error($);vg.traceDeprecation?console.trace($):console.error($),e=!0}return r.apply(this,arguments)}};v.deprecate=hq;sg={};bz=function(r){if(Bb(iq)&&(iq=""),r=r.toUpperCase(),!sg[r])if(new RegExp("\\b"+r+"\\b","i").test(iq)){var $=vg.pid;sg[r]=function(){var e=Mk.apply(v,arguments);console.error("%s %d: %s",r,$,e)}}else sg[r]=function(){};return sg[r]};v.debuglog=bz;kq=ec;v.inspect=kq,ec.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ec.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};dz=oq;v.isArray=dz;ez=ek;v.isBoolean=ez;fz=Zf;v.isNull=fz;gz=Kz;v.isNullOrUndefined=gz;hz=pq;v.isNumber=hz;iz=Yf;v.isString=iz;jz=Nz;v.isSymbol=jz;kz=Bb;v.isUndefined=kz;lz=Of;v.isRegExp=lz;mz=nd;v.isObject=mz;nz=Kj;v.isDate=nz;oz=Lf;v.isError=oz;pz=Kf;v.isFunction=pz;qz=Uz;v.isPrimitive=qz;rz=(Sy(),Py);v.isBuffer=rz;sz=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];tz=function(){console.log("%s - %s",Xz(),Mk.apply(v,arguments))};v.log=tz;uz=(Vy(),Ty);v.inherits=uz;lq=function(r,$){if(!$||!nd($))return r;for(var e=Object.keys($),t=e.length;t--;)r[e[t]]=$[e[t]];return r};v._extend=lq}var Ej,_z,Oa,bA,wq,xq,n,fA,yq,hA=false;function zq(r,$){if(r===$)return 0;for(var t=r.length,e=$.length,a=0,i=Math.min(t,e);a<i;++a)if(r[a]!==$[a]){t=r[a],e=$[a];break}return t<e?-1:e<t?1:0}function ce(r){return q.Buffer&&"function"==typeof q.Buffer.isBuffer?q.Buffer.isBuffer(r):!(null==r||!r._isBuffer)}function Aq(r){return Object.prototype.toString.call(r)}function Bq(r){return!ce(r)&&"function"==typeof q.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):!!r&&(r instanceof DataView||!!(r.buffer&&r.buffer instanceof ArrayBuffer)))}function Cq(r){if(Oa.isFunction(r)){if(xq)return r.name;var $=r.toString().match(fA);return $&&$[1]}}function Dq(r,$){return"string"==typeof r?r.length<$?r:r.slice(0,$):r}function Eq(r){if(xq||!Oa.isFunction(r))return Oa.inspect(r);var $=Cq(r);return"[Function"+($?": "+$:"")+"]"}function pA(r){return Dq(Eq(r.actual),128)+" "+r.operator+" "+Dq(Eq(r.expected),128)}function oa(r,$,t,e,a){throw new n.AssertionError({message:t,actual:r,expected:$,operator:e,stackStartFunction:a})}function Fq(r,$){r||oa(r,!0,$,"==",n.ok)}function od(r,$,t,e){if(r===$)return!0;if(ce(r)&&ce($))return 0===zq(r,$);if(Oa.isDate(r)&&Oa.isDate($))return r.getTime()===$.getTime();if(Oa.isRegExp(r)&&Oa.isRegExp($))return r.source===$.source&&r.global===$.global&&r.multiline===$.multiline&&r.lastIndex===$.lastIndex&&r.ignoreCase===$.ignoreCase;if(null!==r&&"object"==typeof r||null!==$&&"object"==typeof $){if(Bq(r)&&Bq($)&&Aq(r)===Aq($)&&!(r instanceof Float32Array||r instanceof Float64Array))return 0===zq(new Uint8Array(r.buffer),new Uint8Array($.buffer));if(ce(r)!==ce($))return!1;var a=(e=e||{actual:[],expected:[]}).actual.indexOf(r);return-1!==a&&a===e.expected.indexOf($)||(e.actual.push(r),e.expected.push($),uA(r,$,t,e))}return t?r===$:r==$}function Hq(r){return"[object Arguments]"==Object.prototype.toString.call(r)}function uA(r,$,t,e){if(null==r||null==$)return!1;if(Oa.isPrimitive(r)||Oa.isPrimitive($))return r===$;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf($))return!1;var a=Hq(r),i=Hq($);if(a&&!i||!a&&i)return!1;if(a)return od(r=wq.call(r),$=wq.call($),t);var n,s,g=yq(r),E=yq($);if(g.length!==E.length)return!1;for(g.sort(),E.sort(),s=g.length-1;s>=0;s--)if(g[s]!==E[s])return!1;for(s=g.length-1;s>=0;s--)if(!od(r[n=g[s]],$[n],t,e))return!1;return!0}function Iq(r,$,t){od(r,$,!0)&&oa(r,$,t,"notDeepStrictEqual",Iq)}function Jq(r,$){if(!r||!$)return!1;if("[object RegExp]"==Object.prototype.toString.call($))return $.test(r);try{if(r instanceof $)return!0}catch(t){}return!Error.isPrototypeOf($)&&!0===$.call({},r)}function xA(r){var $;try{r()}catch(t){$=t}return $}function Kq(r,$,t,e){var a;if("function"!=typeof $)throw new TypeError("\"block\" argument must be a function");"string"==typeof t&&(e=t,t=null),a=xA($),e=(t&&t.name?" ("+t.name+").":".")+(e?" "+e:"."),r&&!a&&oa(a,t,"Missing expected exception"+e);var i="string"==typeof e,n=!r&&a&&!t;if((!r&&Oa.isError(a)&&i&&Jq(a,t)||n)&&oa(a,t,"Got unwanted exception"+e),r&&a&&t&&!Jq(a,t)||!r&&a)throw a}function Lq(r,$){r||oa(r,!0,$,"==",Lq)}function lj(){if(hA)return;hA=true;Ej={};_z=(Oy(),Hy);Oa=(Zz(),v);bA=Object.prototype.hasOwnProperty;wq=Array.prototype.slice;xq="foo"===function(){}.name;n=Ej=Fq;fA=/\s*function\s+([^\(\s]*)\s*/;n.AssertionError=function(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=pA(this),this.generatedMessage=!0);var $=r.stackStartFunction||oa;if(Error.captureStackTrace)Error.captureStackTrace(this,$);else{var t=new Error;if(t.stack){var e=t.stack,a=Cq($),i=e.indexOf("\n"+a);if(i>=0){var n=e.indexOf("\n",i+1);e=e.substring(n+1)}this.stack=e}}},Oa.inherits(n.AssertionError,Error),n.fail=oa,n.ok=Fq,n.equal=function(r,$,t){r!=$&&oa(r,$,t,"==",n.equal)},n.notEqual=function(r,$,t){r==$&&oa(r,$,t,"!=",n.notEqual)},n.deepEqual=function(r,$,t){od(r,$,!1)||oa(r,$,t,"deepEqual",n.deepEqual)},n.deepStrictEqual=function(r,$,t){od(r,$,!0)||oa(r,$,t,"deepStrictEqual",n.deepStrictEqual)},n.notDeepEqual=function(r,$,t){od(r,$,!1)&&oa(r,$,t,"notDeepEqual",n.notDeepEqual)},n.notDeepStrictEqual=Iq,n.strictEqual=function(r,$,t){r!==$&&oa(r,$,t,"===",n.strictEqual)},n.notStrictEqual=function(r,$,t){r===$&&oa(r,$,t,"!==",n.notStrictEqual)},n.throws=function(r,$,t){Kq(!0,r,$,t)},n.doesNotThrow=function(r,$,t){Kq(!1,r,$,t)},n.ifError=function(r){if(r)throw r},n.strict=_z(Lq,n,{equal:n.strictEqual,deepEqual:n.deepStrictEqual,notEqual:n.notStrictEqual,notDeepEqual:n.notDeepStrictEqual}),n.strict.strict=n.strict;yq=Object.keys||function(r){var $=[];for(var t in r)bA.call(r,t)&&$.push(t);return $}}var BA,je,ne,oe,ve,GA,HA=false;function IA($){if(!(($=String($)).length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec($);if(r){var a=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*GA;case"days":case"day":case"d":return a*ve;case"hours":case"hour":case"hrs":case"hr":case"h":return a*oe;case"minutes":case"minute":case"mins":case"min":case"m":return a*ne;case"seconds":case"second":case"secs":case"sec":case"s":return a*je;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return;}}}}function JA($){return $>=ve?Math.round($/ve)+"d":$>=oe?Math.round($/oe)+"h":$>=ne?Math.round($/ne)+"m":$>=je?Math.round($/je)+"s":$+"ms"}function KA($){return qf($,ve,"day")||qf($,oe,"hour")||qf($,ne,"minute")||qf($,je,"second")||$+" ms"}function qf($,r,a){if(!($<r))return $<1.5*r?Math.floor($/r)+" "+a:Math.ceil($/r)+" "+a+"s"}function MA(){if(HA)return;HA=true;BA={};je=1e3;ne=60*je;oe=60*ne;ve=24*oe;GA=365.25*ve;BA=function($,r){r=r||{};var a=typeof $;if("string"===a&&$.length>0)return IA($);if("number"===a&&!1===isNaN($))return r.long?KA($):JA($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))}}var i,OA,PA,QA,RA,SA,TA,Pq,Qq,WA,XA=false;function YA(e){var s,$=0;for(s in e)$=($<<5)-$+e.charCodeAt(s),$|=0;return i.colors[Math.abs($)%i.colors.length]}function Wi(e){var s;function $(){if($.enabled){var e=$,a=+new Date,r=a-(s||a);e.diff=r,e.prev=s,e.curr=a,s=a;for(var t=new Array(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(s,$){if("%%"===s)return s;n++;var a=i.formatters[$];if("function"==typeof a){var r=t[n];s=a.call(e,r),t.splice(n,1),n--}return s}),i.formatArgs.call(e,t),($.log||i.log||console.log.bind(console)).apply(e,t)}}return $.namespace=e,$.enabled=i.enabled(e),$.useColors=i.useColors(),$.color=YA(e),$.destroy=$A,"function"==typeof i.init&&i.init($),i.instances.push($),$}function $A(){var e=i.instances.indexOf(this);return-1!==e&&(i.instances.splice(e,1),!0)}function _A(e){var s;i.save(e),Pq=[],i.names=Pq,Qq=[],i.skips=Qq;var $=("string"==typeof e?e:"").split(/[\s,]+/),a=$.length;for(s=0;s<a;s++)$[s]&&("-"===(e=$[s].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")));for(s=0;s<i.instances.length;s++){var r=i.instances[s];r.enabled=i.enabled(r.namespace)}}function aB(){i.enable("")}function bB(e){if("*"===e[e.length-1])return!0;var s,$;for(s=0,$=i.skips.length;s<$;s++)if(i.skips[s].test(e))return!1;for(s=0,$=i.names.length;s<$;s++)if(i.names[s].test(e))return!0;return!1}function cB(e){return e instanceof Error?e.stack||e.message:e}function dB(){if(XA)return;XA=true;i={};OA=cB;(i=i=Wi.debug=Wi.default=Wi).coerce=OA;PA=aB;i.disable=PA;QA=_A;i.enable=QA;RA=bB;i.enabled=RA;SA=(MA(),BA);i.humanize=SA;TA=[];i.instances=TA;Pq=[];i.names=Pq;Qq=[];i.skips=Qq;WA={};i.formatters=WA}var hb,Sq,gB,hB,iB,jB,kB,lf,mB,nB=false;function oB(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function pB(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+hb.humanize(this.diff),o){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var t=0,$=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&($=t))}),e.splice($,0,r)}}function qB(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function rB(e){try{null==e?lf.removeItem("debug"):lf.debug=e}catch(o){}}function Tq(){var e;try{e=lf.debug}catch(o){}return!e&&void 0!==Sq&&"env"in Sq&&(e=void 0),e}function tB(){try{return window.localStorage}catch(e){}}function uB(){if(nB)return;nB=true;hb={};Sq=(va(),Aa);gB=qB;(hb=hb=(dB(),i)).log=gB;hB=pB;hb.formatArgs=hB;iB=rB;hb.save=iB;jB=Tq;hb.load=jB;kB=oB;hb.useColors=kB;lf="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:tB();hb.storage=lf;mB=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];hb.colors=mB,hb.formatters.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}},hb.enable(Tq())}var Uq,kf,xB,yB,zB,Wq,Xq,CB,Pi,EB=false;function FB(e){return(FB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(e,t){Wq.call(this),e.headers=e.headers||{},this._options=e,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e.host&&(e.hostname||(e.hostname=e.host),delete e.host),t&&this.on("response",t);var r=this;if(this._onNativeResponse=function(e){r._processResponse(e)},!e.pathname&&e.path){var i=e.path.indexOf("?");i<0?e.pathname=e.path:(e.pathname=e.path.substring(0,i),e.search=e.path.substring(i))}this._performRequest()}function Zq(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach(function(i){var s=i+":",o=r[s]=e[i],a=t[i]=Object.create(o);a.request=function(e,i){return"string"==typeof e?(e=kf.parse(e)).maxRedirects=t.maxRedirects:e=Object.assign({protocol:s,maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e),e.nativeProtocols=r,zB.equal(e.protocol,s,"protocol mismatch"),Xq("options",e),new Sa(e,i)},a.get=function(e,t){var r=a.request(e,t);return r.end(),r}}),t}function $q(){if(EB)return;EB=true;Uq={};kf=(Bg(),Eb);xB=(Uk(),Ag);yB=(dq(),Tk);zB=(lj(),Ej);Wq=(gi(),ki).Writable;Xq=(uB(),hb)("follow-redirects");CB={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0};Pi=Object.create(null);["abort","aborted","error","socket","timeout"].forEach(function(e){Pi[e]=function(t){this._redirectable.emit(e,t)}}),Sa.prototype=Object.create(Wq.prototype),Sa.prototype.write=function(e,t,r){if(!("string"==typeof e||"object"===FB(e)&&"length"in e))throw new Error("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort()):r&&r()},Sa.prototype.end=function(e,t,r){"function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null);var i=this._currentRequest;this.write(e||"",t,function(){i.end(null,null,r)})},Sa.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},Sa.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive","setTimeout"].forEach(function(e){Sa.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}}),["aborted","connection","socket"].forEach(function(e){Object.defineProperty(Sa.prototype,e,{get:function(){return this._currentRequest[e]}})}),Sa.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var i=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var s in this._currentUrl=kf.format(this._options),i._redirectable=this,Pi)s&&i.on(s,Pi[s]);if(this._isRedirect){var o=0,a=this._requestBodyBuffers;!function e(){if(o<a.length){var t=a[o++];i.write(t.data,t.encoding,e)}else i.end()}()}}else this.emit("error",new Error("Unsupported protocol "+e))},Sa.prototype._processResponse=function(e){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:e.statusCode});var t=e.headers.location;if(t&&!1!==this._options.followRedirects&&e.statusCode>=300&&e.statusCode<400){if(++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,i=this._options.headers;if(307!==e.statusCode&&!(this._options.method in CB))for(r in this._options.method="GET",this._requestBodyBuffers=[],i)/^content-/i.test(r)&&delete i[r];if(!this._isRedirect)for(r in i)/^host$/i.test(r)&&delete i[r];var s=kf.resolve(this._currentUrl,t);Xq("redirecting to",s),Object.assign(this._options,kf.parse(s)),this._isRedirect=!0,this._performRequest(),e.destroy()}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]},(Uq=Zq({http:xB,https:yB})).wrap=Zq}var JB,KB=false;function LB(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function MB(){if(KB)return;KB=true;JB={};JB=LB}var M,OB,PB,QB,RB,SB,TB,UB=false;function VB(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function wh(){if(UB)return;UB=true;M={};OB="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;PB=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var $ in e)VB(e,$)&&(r[$]=e[$])}}return r};M.assign=PB;QB=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};M.shrinkBuf=QB;RB={arraySet:function(r,t,e,$,n){if(t.subarray&&r.subarray)r.set(t.subarray(e,e+$),n);else for(var a=0;a<$;a++)r[n+a]=t[e+a]},flattenChunks:function(r){var t,e,$,n,a,o;for($=0,t=0,e=r.length;t<e;t++)$+=r[t].length;for(o=new Uint8Array($),n=0,t=0,e=r.length;t<e;t++)a=r[t],o.set(a,n),n+=a.length;return o}};SB={arraySet:function(r,t,e,$,n){for(var a=0;a<$;a++)r[n+a]=t[e+a]},flattenChunks:function(r){return[].concat.apply([],r)}};TB=function(r){if(r){var t=Uint8Array;M.Buf8=t;var e=Uint16Array;M.Buf16=e;var $=Int32Array;M.Buf32=$,M.assign(M,RB)}else t=Array,M.Buf8=t,e=Array,M.Buf16=e,$=Array,M.Buf32=$,M.assign(M,SB)};M.setTyped=TB,M.setTyped(OB)}var pd,YB,ZB,br,cr,aC,bC,dr,dC,eC,fC,Bi,xe,Le,rd,ri,fr,Ac,fi,oC,ai,gr,hr,ir,_h,Qg,vC,jr,xC,sb,Se,Te,Ue,Fh,DC,EC,FC,Dg,HC,IC,JC,KC,LC,MC,NC=false;function sd($){for(var r=$.length;--r>=0;)$[r]=0}function Tl($,r,e,_,a){this.static_tree=$,this.extra_bits=r,this.extra_base=e,this.elems=_,this.max_length=a,this.has_stree=$&&$.length}function Sl($,r){this.dyn_tree=$,this.max_code=0,this.stat_desc=r}function mr($){return $<256?Te[$]:Te[256+($>>>7)]}function af($,r){$.pending_buf[$.pending++]=255&r,$.pending_buf[$.pending++]=r>>>8&255}function ha($,r,e){$.bi_valid>fi-e?($.bi_buf|=r<<$.bi_valid&65535,af($,$.bi_buf),$.bi_buf=r>>fi-$.bi_valid,$.bi_valid+=e-fi):($.bi_buf|=r<<$.bi_valid&65535,$.bi_valid+=e)}function eb($,r,e){ha($,e[2*r],e[2*r+1])}function qr($,r){var e=0;do{e|=1&$,$>>>=1,e<<=1}while(--r>0);return e>>>1}function WC($){16===$.bi_valid?(af($,$.bi_buf),$.bi_buf=0,$.bi_valid=0):$.bi_valid>=8&&($.pending_buf[$.pending++]=255&$.bi_buf,$.bi_buf>>=8,$.bi_valid-=8)}function XC($,r){var e,_,a,t,p,T,A=r.dyn_tree,v=r.max_code,B=r.stat_desc.static_tree,i=r.stat_desc.has_stree,n=r.stat_desc.extra_bits,s=r.stat_desc.extra_base,d=r.stat_desc.max_length,l=0;for(t=0;t<=Ac;t++)$.bl_count[t]=0;for(A[2*$.heap[$.heap_max]+1]=0,e=$.heap_max+1;e<fr;e++)(t=A[2*A[2*(_=$.heap[e])+1]+1]+1)>d&&(t=d,l++),A[2*_+1]=t,_>v||($.bl_count[t]++,p=0,_>=s&&(p=n[_-s]),T=A[2*_],$.opt_len+=T*(t+p),i&&($.static_len+=T*(B[2*_+1]+p)));if(0!==l){do{for(t=d-1;0===$.bl_count[t];)t--;$.bl_count[t]--,$.bl_count[t+1]+=2,$.bl_count[d]--,l-=2}while(l>0);for(t=d;0!==t;t--)for(_=$.bl_count[t];0!==_;)(a=$.heap[--e])>v||(A[2*a+1]!==t&&($.opt_len+=(t-A[2*a+1])*A[2*a],A[2*a+1]=t),_--)}}function rr($,r,e){var _,a,t=new Array(Ac+1),p=0;for(_=1;_<=Ac;_++)t[_]=p=p+e[_-1]<<1;for(a=0;a<=r;a++){var T=$[2*a+1];0!==T&&($[2*a]=qr(t[T]++,T))}}function ZC(){var $,r,e,_,a,t=new Array(Ac+1);for(e=0,_=0;_<Bi-1;_++)for(Fh[_]=e,$=0;$<1<<_h[_];$++)Ue[e++]=_;for(Ue[e-1]=_,a=0,_=0;_<16;_++)for(Dg[_]=a,$=0;$<1<<Qg[_];$++)Te[a++]=_;for(a>>=7;_<rd;_++)for(Dg[_]=a<<7,$=0;$<1<<Qg[_]-7;$++)Te[256+a++]=_;for(r=0;r<=Ac;r++)t[r]=0;for($=0;$<=143;)sb[2*$+1]=8,$++,t[8]++;for(;$<=255;)sb[2*$+1]=9,$++,t[9]++;for(;$<=279;)sb[2*$+1]=7,$++,t[7]++;for(;$<=287;)sb[2*$+1]=8,$++,t[8]++;for(rr(sb,Le+1,t),$=0;$<rd;$++)Se[2*$+1]=5,Se[2*$]=qr($,5);DC=new Tl(sb,_h,xe+1,Le,Ac),EC=new Tl(Se,Qg,0,rd,Ac),FC=new Tl(new Array(0),vC,0,ri,oC)}function sr($){var r;for(r=0;r<Le;r++)$.dyn_ltree[2*r]=0;for(r=0;r<rd;r++)$.dyn_dtree[2*r]=0;for(r=0;r<ri;r++)$.bl_tree[2*r]=0;$.dyn_ltree[2*ai]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function tr($){$.bi_valid>8?af($,$.bi_buf):$.bi_valid>0&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function aD($,r,e,_){tr($),_&&(af($,e),af($,~e)),YB.arraySet($.pending_buf,$.window,r,e,$.pending),$.pending+=e}function ur($,r,e,_){var a=2*r,t=2*e;return $[a]<$[t]||$[a]===$[t]&&_[r]<=_[e]}function El($,r,e){for(var _=$.heap[e],a=e<<1;a<=$.heap_len&&(a<$.heap_len&&ur(r,$.heap[a+1],$.heap[a],$.depth)&&a++,!ur(r,_,$.heap[a],$.depth));)$.heap[e]=$.heap[a],e=a,a<<=1;$.heap[e]=_}function wr($,r,e){var _,a,t,p,T=0;if(0!==$.last_lit)do{_=$.pending_buf[$.d_buf+2*T]<<8|$.pending_buf[$.d_buf+2*T+1],a=$.pending_buf[$.l_buf+T],T++,0===_?eb($,a,r):(eb($,(t=Ue[a])+xe+1,r),0!==(p=_h[t])&&ha($,a-=Fh[t],p),eb($,t=mr(--_),e),0!==(p=Qg[t])&&ha($,_-=Dg[t],p))}while(T<$.last_lit);eb($,ai,r)}function ml($,r){var e,_,a,t=r.dyn_tree,p=r.stat_desc.static_tree,T=r.stat_desc.has_stree,A=r.stat_desc.elems,v=-1;for($.heap_len=0,$.heap_max=fr,e=0;e<A;e++)0!==t[2*e]?($.heap[++$.heap_len]=v=e,$.depth[e]=0):t[2*e+1]=0;for(;$.heap_len<2;)t[2*(a=$.heap[++$.heap_len]=v<2?++v:0)]=1,$.depth[a]=0,$.opt_len--,T&&($.static_len-=p[2*a+1]);for(r.max_code=v,e=$.heap_len>>1;e>=1;e--)El($,t,e);a=A;do{e=$.heap[1],$.heap[1]=$.heap[$.heap_len--],El($,t,1),_=$.heap[1],$.heap[--$.heap_max]=e,$.heap[--$.heap_max]=_,t[2*a]=t[2*e]+t[2*_],$.depth[a]=($.depth[e]>=$.depth[_]?$.depth[e]:$.depth[_])+1,t[2*e+1]=t[2*_+1]=a,$.heap[1]=a++,El($,t,1)}while($.heap_len>=2);$.heap[--$.heap_max]=$.heap[1],XC($,r),rr(t,v,$.bl_count)}function xr($,r,e){var _,a,t=-1,p=r[1],T=0,A=7,v=4;for(0===p&&(A=138,v=3),r[2*(e+1)+1]=65535,_=0;_<=e;_++)a=p,p=r[2*(_+1)+1],++T<A&&a===p||(T<v?$.bl_tree[2*a]+=T:0!==a?(a!==t&&$.bl_tree[2*a]++,$.bl_tree[2*gr]++):T<=10?$.bl_tree[2*hr]++:$.bl_tree[2*ir]++,T=0,t=a,0===p?(A=138,v=3):a===p?(A=6,v=3):(A=7,v=4))}function yr($,r,e){var _,a,t=-1,p=r[1],T=0,A=7,v=4;for(0===p&&(A=138,v=3),_=0;_<=e;_++)if(a=p,p=r[2*(_+1)+1],!(++T<A&&a===p)){if(T<v)do{eb($,a,$.bl_tree)}while(0!=--T);else 0!==a?(a!==t&&(eb($,a,$.bl_tree),T--),eb($,gr,$.bl_tree),ha($,T-3,2)):T<=10?(eb($,hr,$.bl_tree),ha($,T-3,3)):(eb($,ir,$.bl_tree),ha($,T-11,7));T=0,t=a,0===p?(A=138,v=3):a===p?(A=6,v=3):(A=7,v=4)}}function hD($){var r;for(xr($,$.dyn_ltree,$.l_desc.max_code),xr($,$.dyn_dtree,$.d_desc.max_code),ml($,$.bl_desc),r=ri-1;r>=3&&0===$.bl_tree[2*jr[r]+1];r--);return $.opt_len+=3*(r+1)+5+5+4,r}function iD($,r,e,_){var a;for(ha($,r-257,5),ha($,e-1,5),ha($,_-4,4),a=0;a<_;a++)ha($,$.bl_tree[2*jr[a]+1],3);yr($,$.dyn_ltree,r-1),yr($,$.dyn_dtree,e-1)}function jD($){var r,e=4093624447;for(r=0;r<=31;r++,e>>>=1)if(1&e&&0!==$.dyn_ltree[2*r])return br;if(0!==$.dyn_ltree[18]||0!==$.dyn_ltree[20]||0!==$.dyn_ltree[26])return cr;for(r=32;r<xe;r++)if(0!==$.dyn_ltree[2*r])return cr;return br}function kD($){HC||(ZC(),HC=!0),$.l_desc=new Sl($.dyn_ltree,DC),$.d_desc=new Sl($.dyn_dtree,EC),$.bl_desc=new Sl($.bl_tree,FC),$.bi_buf=0,$.bi_valid=0,sr($)}function zr($,r,e,_){ha($,(bC<<1)+(_?1:0),3),aD($,r,e,!0)}function mD($){ha($,dr<<1,3),eb($,ai,sb),WC($)}function nD($,r,e,_){var a,t,p=0;$.level>0?($.strm.data_type===aC&&($.strm.data_type=jD($)),ml($,$.l_desc),ml($,$.d_desc),p=hD($),a=$.opt_len+3+7>>>3,(t=$.static_len+3+7>>>3)<=a&&(a=t)):a=t=e+5,e+4<=a&&-1!==r?zr($,r,e,_):$.strategy===ZB||t===a?(ha($,(dr<<1)+(_?1:0),3),wr($,sb,Se)):(ha($,(dC<<1)+(_?1:0),3),iD($,$.l_desc.max_code+1,$.d_desc.max_code+1,p+1),wr($,$.dyn_ltree,$.dyn_dtree)),sr($),_&&tr($)}function oD($,r,e){return $.pending_buf[$.d_buf+2*$.last_lit]=r>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&r,$.pending_buf[$.l_buf+$.last_lit]=255&e,$.last_lit++,0===r?$.dyn_ltree[2*e]++:($.matches++,r--,$.dyn_ltree[2*(Ue[e]+xe+1)]++,$.dyn_dtree[2*mr(r)]++),$.last_lit===$.lit_bufsize-1}function pD(){if(NC)return;NC=true;pd={};YB=(wh(),M);ZB=4;br=0;cr=1;aC=2;bC=0;dr=1;dC=2;eC=3;fC=258;Bi=29;xe=256;Le=xe+1+Bi;rd=30;ri=19;fr=2*Le+1;Ac=15;fi=16;oC=7;ai=256;gr=16;hr=17;ir=18;_h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];Qg=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];vC=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];jr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];xC=512;sb=new Array(2*(Le+2));sd(sb);Se=new Array(2*rd);sd(Se);Te=new Array(xC);sd(Te);Ue=new Array(fC-eC+1);sd(Ue);Fh=new Array(Bi);sd(Fh);Dg=new Array(rd);sd(Dg);HC=!1;IC=kD;pd._tr_init=IC;JC=zr;pd._tr_stored_block=JC;KC=nD;pd._tr_flush_block=KC;LC=oD;pd._tr_tally=LC;MC=mD;pd._tr_align=MC}var Ar,rD=false;function sD(r,$,e,a){for(var u=65535&r|0,o=r>>>16&65535|0,t=0;0!==e;){e-=t=e>2e3?2e3:e;do{o=o+(u=u+$[a++]|0)|0}while(--t);u%=65521,o%=65521}return u|o<<16|0}function Br(){if(rD)return;rD=true;Ar={};Ar=sD}var Cr,vD,wD=false;function xD(){for(var r,$=[],a=0;a<256;a++){r=a;for(var b=0;b<8;b++)r=1&r?3988292384^r>>>1:r>>>1;$[a]=r}return $}function yD(r,$,a,b){var v=vD,c=b+a;r^=-1;for(var e=b;e<c;e++)r=r>>>8^v[255&(r^$[e])];return-1^r}function Dr(){if(wD)return;wD=true;Cr={};vD=xD();Cr=yD}var AD,BD=false;function CD(){if(BD)return;BD=true;AD={};AD={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}var df,ib,ea,za,Fr,gc,JD,fd,LD,MD,ac,Ir,jb,Kr,wa,SD,Gk,UD,VD,Hf,XD,YD,ZD,$D,Ff,aE,bE,cE,dE,eE,uk,gE,hE,iE,jE,l,Qb,Na,nE,pf,$j,nf,zh,yh,Xc,be,R,de,Rc,xd,zE,AE,BE,CE,DE,EE,FE,GE,HE,IE,JE=false;function Kb($,a){return $.msg=JD[a],a}function Rr($){return($<<1)-($>4?9:0)}function Ob($){for(var a=$.length;--a>=0;)$[a]=0}function Vb($){var a=$.state,t=a.pending;t>$.avail_out&&(t=$.avail_out),0!==t&&(ea.arraySet($.output,a.pending_buf,a.pending_out,t,$.next_out),$.next_out+=t,a.pending_out+=t,$.total_out+=t,$.avail_out-=t,a.pending-=t,0===a.pending&&(a.pending_out=0))}function S($,a){za._tr_flush_block($,$.block_start>=0?$.block_start:-1,$.strstart-$.block_start,a),$.block_start=$.strstart,Vb($.strm)}function o($,a){$.pending_buf[$.pending++]=a}function fe($,a){$.pending_buf[$.pending++]=a>>>8&255,$.pending_buf[$.pending++]=255&a}function RE($,a,t,r){var e=$.avail_in;return e>r&&(e=r),0===e?0:($.avail_in-=e,ea.arraySet(a,$.input,$.next_in,e,t),1===$.state.wrap?$.adler=Fr($.adler,a,e,t):2===$.state.wrap&&($.adler=gc($.adler,a,e,t)),$.next_in+=e,$.total_in+=e,e)}function Vr($,a){var t,r,e=$.max_chain_length,d=$.strstart,_=$.prev_length,E=$.nice_match,S=$.strstart>$.w_size-Na?$.strstart-($.w_size-Na):0,s=$.window,i=$.w_mask,n=$.prev,v=$.strstart+Qb,l=s[d+_-1],h=s[d+_];$.prev_length>=$.good_match&&(e>>=2),E>$.lookahead&&(E=$.lookahead);do{if(s[(t=a)+_]===h&&s[t+_-1]===l&&s[t]===s[d]&&s[++t]===s[d+1]){d+=2,t++;do{}while(s[++d]===s[++t]&&s[++d]===s[++t]&&s[++d]===s[++t]&&s[++d]===s[++t]&&s[++d]===s[++t]&&s[++d]===s[++t]&&s[++d]===s[++t]&&s[++d]===s[++t]&&d<v);if(r=Qb-(v-d),d=v-Qb,r>_){if($.match_start=a,_=r,r>=E)break;l=s[d+_-1],h=s[d+_]}}}while((a=n[a&i])>S&&0!=--e);return _<=$.lookahead?_:$.lookahead}function Ic($){var a,t,r,e,d,_=$.w_size;do{if(e=$.window_size-$.lookahead-$.strstart,$.strstart>=_+(_-Na)){ea.arraySet($.window,$.window,_,_,0),$.match_start-=_,$.strstart-=_,$.block_start-=_,a=t=$.hash_size;do{r=$.head[--a],$.head[a]=r>=_?r-_:0}while(--t);a=t=_;do{r=$.prev[--a],$.prev[a]=r>=_?r-_:0}while(--t);e+=_}if(0===$.strm.avail_in)break;if(t=RE($.strm,$.window,$.strstart+$.lookahead,e),$.lookahead+=t,$.lookahead+$.insert>=l)for(d=$.strstart-$.insert,$.ins_h=$.window[d],$.ins_h=($.ins_h<<$.hash_shift^$.window[d+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[d+l-1])&$.hash_mask,$.prev[d&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=d,d++,$.insert--,!($.lookahead+$.insert<l)););}while($.lookahead<Na&&0!==$.strm.avail_in)}function UE($,a){var t=65535;for(t>$.pending_buf_size-5&&(t=$.pending_buf_size-5);;){if($.lookahead<=1){if(Ic($),0===$.lookahead&&a===fd)return R;if(0===$.lookahead)break}$.strstart+=$.lookahead,$.lookahead=0;var r=$.block_start+t;if((0===$.strstart||$.strstart>=r)&&($.lookahead=$.strstart-r,$.strstart=r,S($,!1),0===$.strm.avail_out))return R;if($.strstart-$.block_start>=$.w_size-Na&&(S($,!1),0===$.strm.avail_out))return R}return $.insert=0,a===ac?(S($,!0),0===$.strm.avail_out?Rc:xd):($.strstart>$.block_start&&(S($,!1),$.strm.avail_out),R)}function yi($,a){for(var t,r;;){if($.lookahead<Na){if(Ic($),$.lookahead<Na&&a===fd)return R;if(0===$.lookahead)break}if(t=0,$.lookahead>=l&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+l-1])&$.hash_mask,t=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),0!==t&&$.strstart-t<=$.w_size-Na&&($.match_length=Vr($,t)),$.match_length>=l){if(r=za._tr_tally($,$.strstart-$.match_start,$.match_length-l),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=l){$.match_length--;do{$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+l-1])&$.hash_mask,t=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart}while(0!=--$.match_length);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;}else r=za._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(r&&(S($,!1),0===$.strm.avail_out))return R}return $.insert=$.strstart<l-1?$.strstart:l-1,a===ac?(S($,!0),0===$.strm.avail_out?Rc:xd):$.last_lit&&(S($,!1),0===$.strm.avail_out)?R:de}function yd($,a){for(var t,r,e;;){if($.lookahead<Na){if(Ic($),$.lookahead<Na&&a===fd)return R;if(0===$.lookahead)break}if(t=0,$.lookahead>=l&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+l-1])&$.hash_mask,t=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=l-1,0!==t&&$.prev_length<$.max_lazy_match&&$.strstart-t<=$.w_size-Na&&($.match_length=Vr($,t),$.match_length<=5&&($.strategy===VD||$.match_length===l&&$.strstart-$.match_start>4096)&&($.match_length=l-1)),$.prev_length>=l&&$.match_length<=$.prev_length){e=$.strstart+$.lookahead-l,r=za._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-l),$.lookahead-=$.prev_length-1,$.prev_length-=2;do{++$.strstart<=e&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+l-1])&$.hash_mask,t=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart)}while(0!=--$.prev_length);if($.match_available=0,$.match_length=l-1,$.strstart++,r&&(S($,!1),0===$.strm.avail_out))return R}else if($.match_available){if((r=za._tr_tally($,0,$.window[$.strstart-1]))&&S($,!1),$.strstart++,$.lookahead--,0===$.strm.avail_out)return R}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(r=za._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<l-1?$.strstart:l-1,a===ac?(S($,!0),0===$.strm.avail_out?Rc:xd):$.last_lit&&(S($,!1),0===$.strm.avail_out)?R:de}function XE($,a){for(var t,r,e,d,_=$.window;;){if($.lookahead<=Qb){if(Ic($),$.lookahead<=Qb&&a===fd)return R;if(0===$.lookahead)break}if($.match_length=0,$.lookahead>=l&&$.strstart>0&&(r=_[e=$.strstart-1])===_[++e]&&r===_[++e]&&r===_[++e]){d=$.strstart+Qb;do{}while(r===_[++e]&&r===_[++e]&&r===_[++e]&&r===_[++e]&&r===_[++e]&&r===_[++e]&&r===_[++e]&&r===_[++e]&&e<d);$.match_length=Qb-(d-e),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=l?(t=za._tr_tally($,1,$.match_length-l),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(t=za._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),t&&(S($,!1),0===$.strm.avail_out))return R}return $.insert=0,a===ac?(S($,!0),0===$.strm.avail_out?Rc:xd):$.last_lit&&(S($,!1),0===$.strm.avail_out)?R:de}function YE($,a){for(var t;;){if(0===$.lookahead&&(Ic($),0===$.lookahead)){if(a===fd)return R;break}if($.match_length=0,t=za._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,t&&(S($,!1),0===$.strm.avail_out))return R}return $.insert=0,a===ac?(S($,!0),0===$.strm.avail_out?Rc:xd):$.last_lit&&(S($,!1),0===$.strm.avail_out)?R:de}function Ua($,a,t,r,e){this.good_length=$,this.max_lazy=a,this.nice_length=t,this.max_chain=r,this.func=e}function $E($){$.window_size=2*$.w_size,Ob($.head),$.max_lazy_match=df[$.level].max_lazy,$.good_match=df[$.level].good_length,$.nice_match=df[$.level].nice_length,$.max_chain_length=df[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=l-1,$.match_available=0,$.ins_h=0}function _E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ff,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ea.Buf16(2*iE),this.dyn_dtree=new ea.Buf16(2*(2*gE+1)),this.bl_tree=new ea.Buf16(2*(2*hE+1)),Ob(this.dyn_ltree),Ob(this.dyn_dtree),Ob(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ea.Buf16(jE+1),this.heap=new ea.Buf16(2*uk+1),Ob(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ea.Buf16(2*uk+1),Ob(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Yr($){var a;return $&&$.state?($.total_in=$.total_out=0,$.data_type=$D,(a=$.state).pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?pf:Xc,$.adler=2===a.wrap?0:1,a.last_flush=fd,za._tr_init(a),jb):Kb($,wa)}function Zr($){var a=Yr($);return a===jb&&$E($.state),a}function cF($,a){return $&&$.state?2!==$.state.wrap?wa:($.state.gzhead=a,jb):wa}function $r($,a,t,r,e,d){if(!$)return wa;var _=1;if(a===UD&&(a=6),r<0?(_=0,r=-r):r>15&&(_=2,r-=16),e<1||e>aE||t!==Ff||r<8||r>15||a<0||a>9||d<0||d>YD)return Kb($,wa);8===r&&(r=9);var E=new _E;return $.state=E,E.strm=$,E.wrap=_,E.gzhead=null,E.w_bits=r,E.w_size=1<<E.w_bits,E.w_mask=E.w_size-1,E.hash_bits=e+7,E.hash_size=1<<E.hash_bits,E.hash_mask=E.hash_size-1,E.hash_shift=~~((E.hash_bits+l-1)/l),E.window=new ea.Buf8(2*E.w_size),E.head=new ea.Buf16(E.hash_size),E.prev=new ea.Buf16(E.w_size),E.lit_bufsize=1<<e+6,E.pending_buf_size=4*E.lit_bufsize,E.pending_buf=new ea.Buf8(E.pending_buf_size),E.d_buf=1*E.lit_bufsize,E.l_buf=3*E.lit_bufsize,E.level=a,E.strategy=d,E.method=t,Zr($)}function eF($,a){return $r($,a,Ff,bE,cE,ZD)}function fF($,a){var t,r,e,d;if(!$||!$.state||a>Ir||a<0)return $?Kb($,wa):wa;if(r=$.state,!$.output||!$.input&&0!==$.avail_in||r.status===be&&a!==ac)return Kb($,0===$.avail_out?Gk:wa);if(r.strm=$,t=r.last_flush,r.last_flush=a,r.status===pf)if(2===r.wrap)$.adler=0,o(r,31),o(r,139),o(r,8),r.gzhead?(o(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),o(r,255&r.gzhead.time),o(r,r.gzhead.time>>8&255),o(r,r.gzhead.time>>16&255),o(r,r.gzhead.time>>24&255),o(r,9===r.level?2:r.strategy>=Hf||r.level<2?4:0),o(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(o(r,255&r.gzhead.extra.length),o(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&($.adler=gc($.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=$j):(o(r,0),o(r,0),o(r,0),o(r,0),o(r,0),o(r,9===r.level?2:r.strategy>=Hf||r.level<2?4:0),o(r,zE),r.status=Xc);else{var _=Ff+(r.w_bits-8<<4)<<8;_|=(r.strategy>=Hf||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(_|=nE),_+=31-_%31,r.status=Xc,fe(r,_),0!==r.strstart&&(fe(r,$.adler>>>16),fe(r,65535&$.adler)),$.adler=1}if(r.status===$j)if(r.gzhead.extra){for(e=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>e&&($.adler=gc($.adler,r.pending_buf,r.pending-e,e)),Vb($),e=r.pending,r.pending!==r.pending_buf_size));)o(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>e&&($.adler=gc($.adler,r.pending_buf,r.pending-e,e)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=nf)}else r.status=nf;if(r.status===nf)if(r.gzhead.name){e=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>e&&($.adler=gc($.adler,r.pending_buf,r.pending-e,e)),Vb($),e=r.pending,r.pending===r.pending_buf_size)){d=1;break}d=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,o(r,d)}while(0!==d);r.gzhead.hcrc&&r.pending>e&&($.adler=gc($.adler,r.pending_buf,r.pending-e,e)),0===d&&(r.gzindex=0,r.status=zh)}else r.status=zh;if(r.status===zh)if(r.gzhead.comment){e=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>e&&($.adler=gc($.adler,r.pending_buf,r.pending-e,e)),Vb($),e=r.pending,r.pending===r.pending_buf_size)){d=1;break}d=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,o(r,d)}while(0!==d);r.gzhead.hcrc&&r.pending>e&&($.adler=gc($.adler,r.pending_buf,r.pending-e,e)),0===d&&(r.status=yh)}else r.status=yh;if(r.status===yh&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Vb($),r.pending+2<=r.pending_buf_size&&(o(r,255&$.adler),o(r,$.adler>>8&255),$.adler=0,r.status=Xc)):r.status=Xc),0!==r.pending){if(Vb($),0===$.avail_out)return r.last_flush=-1,jb}else if(0===$.avail_in&&Rr(a)<=Rr(t)&&a!==ac)return Kb($,Gk);if(r.status===be&&0!==$.avail_in)return Kb($,Gk);if(0!==$.avail_in||0!==r.lookahead||a!==fd&&r.status!==be){var E=r.strategy===Hf?YE(r,a):r.strategy===XD?XE(r,a):df[r.level].func(r,a);if(E!==Rc&&E!==xd||(r.status=be),E===R||E===Rc)return 0===$.avail_out&&(r.last_flush=-1),jb;if(E===de&&(a===LD?za._tr_align(r):a!==Ir&&(za._tr_stored_block(r,0,0,!1),a===MD&&(Ob(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Vb($),0===$.avail_out))return r.last_flush=-1,jb}return a!==ac?jb:r.wrap<=0?Kr:(2===r.wrap?(o(r,255&$.adler),o(r,$.adler>>8&255),o(r,$.adler>>16&255),o(r,$.adler>>24&255),o(r,255&$.total_in),o(r,$.total_in>>8&255),o(r,$.total_in>>16&255),o(r,$.total_in>>24&255)):(fe(r,$.adler>>>16),fe(r,65535&$.adler)),Vb($),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?jb:Kr)}function gF($){var a;return $&&$.state?(a=$.state.status)!==pf&&a!==$j&&a!==nf&&a!==zh&&a!==yh&&a!==Xc&&a!==be?Kb($,wa):($.state=null,a===Xc?Kb($,SD):jb):wa}function hF($,a){var t,r,e,d,_,E,S,s,i=a.length;if(!$||!$.state)return wa;if(2===(d=(t=$.state).wrap)||1===d&&t.status!==pf||t.lookahead)return wa;for(1===d&&($.adler=Fr($.adler,a,i,0)),t.wrap=0,i>=t.w_size&&(0===d&&(Ob(t.head),t.strstart=0,t.block_start=0,t.insert=0),s=new ea.Buf8(t.w_size),ea.arraySet(s,a,i-t.w_size,t.w_size,0),a=s,i=t.w_size),_=$.avail_in,E=$.next_in,S=$.input,$.avail_in=i,$.next_in=0,$.input=a,Ic(t);t.lookahead>=l;){r=t.strstart,e=t.lookahead-(l-1);do{t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+l-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++}while(--e);t.strstart=r,t.lookahead=l-1,Ic(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=l-1,t.match_available=0,$.next_in=E,$.input=S,$.avail_in=_,t.wrap=d,jb}function iF(){if(JE)return;JE=true;ib={};ea=(wh(),M);za=(pD(),pd);Fr=(Br(),Ar);gc=(Dr(),Cr);JD=(CD(),AD);fd=0;LD=1;MD=3;ac=4;Ir=5;jb=0;Kr=1;wa=-2;SD=-3;Gk=-5;UD=-1;VD=1;Hf=2;XD=3;YD=4;ZD=0;$D=2;Ff=8;aE=9;bE=15;cE=8;dE=29;eE=256;uk=eE+1+dE;gE=30;hE=19;iE=2*uk+1;jE=15;l=3;Qb=258;Na=Qb+l+1;nE=32;pf=42;$j=69;nf=73;zh=91;yh=103;Xc=113;be=666;R=1;de=2;Rc=3;xd=4;zE=3;df=[new Ua(0,0,0,0,UE),new Ua(4,4,8,4,yi),new Ua(4,5,16,8,yi),new Ua(4,6,32,32,yi),new Ua(4,4,16,16,yd),new Ua(8,16,32,32,yd),new Ua(8,16,128,128,yd),new Ua(8,32,128,256,yd),new Ua(32,128,258,1024,yd),new Ua(32,258,258,4096,yd)];AE=eF;ib.deflateInit=AE;BE=$r;ib.deflateInit2=BE;CE=Zr;ib.deflateReset=CE;DE=Yr;ib.deflateResetKeep=DE;EE=cF;ib.deflateSetHeader=EE;FE=fF;ib.deflate=FE;GE=gF;ib.deflateEnd=GE;HE=hF;ib.deflateSetDictionary=HE;IE="pako deflate (from Nodeca project)";ib.deflateInfo=IE}var jF,pg,lF,mF=false;function nF(){if(mF)return;mF=true;jF={};pg=30;lF=12;jF=function(i,e){var a,t,o,d,n,l,$,r,s,f,v,x,b,c,u,w,h,m,k,N,_,g,A,B,D;a=i.state,t=i.next_in,B=i.input,o=t+(i.avail_in-5),d=i.next_out,D=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),$=a.dmax,r=a.wsize,s=a.whave,f=a.wnext,v=a.window,x=a.hold,b=a.bits,c=a.lencode,u=a.distcode,w=(1<<a.lenbits)-1,h=(1<<a.distbits)-1;i:do{b<15&&(x+=B[t++]<<b,b+=8,x+=B[t++]<<b,b+=8),m=c[x&w];e:for(;;){if(x>>>=k=m>>>24,b-=k,0===(k=m>>>16&255))D[d++]=65535&m;else{if(!(16&k)){if(0==(64&k)){m=c[(65535&m)+(x&(1<<k)-1)];continue e}if(32&k){a.mode=lF;break i}i.msg="invalid literal/length code",a.mode=pg;break i}N=65535&m,(k&=15)&&(b<k&&(x+=B[t++]<<b,b+=8),N+=x&(1<<k)-1,x>>>=k,b-=k),b<15&&(x+=B[t++]<<b,b+=8,x+=B[t++]<<b,b+=8),m=u[x&h];a:for(;;){if(x>>>=k=m>>>24,b-=k,!(16&(k=m>>>16&255))){if(0==(64&k)){m=u[(65535&m)+(x&(1<<k)-1)];continue a}i.msg="invalid distance code",a.mode=pg;break i}if(_=65535&m,b<(k&=15)&&(x+=B[t++]<<b,(b+=8)<k&&(x+=B[t++]<<b,b+=8)),(_+=x&(1<<k)-1)>$){i.msg="invalid distance too far back",a.mode=pg;break i}if(x>>>=k,b-=k,_>(k=d-n)){if((k=_-k)>s&&a.sane){i.msg="invalid distance too far back",a.mode=pg;break i}if(g=0,A=v,0===f){if(g+=r-k,k<N){N-=k;do{D[d++]=v[g++]}while(--k);g=d-_,A=D}}else if(f<k){if(g+=r+f-k,(k-=f)<N){N-=k;do{D[d++]=v[g++]}while(--k);if(g=0,f<N){N-=k=f;do{D[d++]=v[g++]}while(--k);g=d-_,A=D}}}else if(g+=f-k,k<N){N-=k;do{D[d++]=v[g++]}while(--k);g=d-_,A=D}for(;N>2;)D[d++]=A[g++],D[d++]=A[g++],D[d++]=A[g++],N-=3;N&&(D[d++]=A[g++],N>1&&(D[d++]=A[g++]))}else{g=d-_;do{D[d++]=D[g++],D[d++]=D[g++],D[d++]=D[g++],N-=3}while(N>2);N&&(D[d++]=D[g++],N>1&&(D[d++]=D[g++]))}break}}break}}while(t<o&&d<l);t-=N=b>>3,x&=(1<<(b-=N<<3))-1,i.next_in=t,i.next_out=d,i.avail_in=t<o?o-t+5:5-(t-o),i.avail_out=d<l?l-d+257:257-(d-l),a.hold=x,a.bits=b}}var oF,as,zd,bs,cs,ds,ni,es,wF,xF,yF,zF,AF=false;function BF(){if(AF)return;AF=true;oF={};as=(wh(),M);zd=15;bs=852;cs=592;ds=0;ni=1;es=2;wF=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];xF=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];yF=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];zF=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];oF=function($,r,t,O,a,F,v,S){var e,f,i,o,u,E,l,n,s,I=S.bits,N=0,T=0,B=0,D=0,b=0,A=0,L=0,M=0,X=0,x=0,G=null,H=0,U=new as.Buf16(zd+1),_=new as.Buf16(zd+1),d=null,c=0;for(N=0;N<=zd;N++)U[N]=0;for(T=0;T<O;T++)U[r[t+T]]++;for(b=I,D=zd;D>=1&&0===U[D];D--);if(b>D&&(b=D),0===D)return a[F++]=20971520,a[F++]=20971520,S.bits=1,0;for(B=1;B<D&&0===U[B];B++);for(b<B&&(b=B),M=1,N=1;N<=zd;N++)if(M<<=1,(M-=U[N])<0)return-1;if(M>0&&($===ds||1!==D))return-1;for(_[1]=0,N=1;N<zd;N++)_[N+1]=_[N]+U[N];for(T=0;T<O;T++)0!==r[t+T]&&(v[_[r[t+T]]++]=T);if($===ds?(G=d=v,E=19):$===ni?(G=wF,H-=257,d=xF,c-=257,E=256):(G=yF,d=zF,E=-1),x=0,T=0,N=B,u=F,A=b,L=0,i=-1,o=(X=1<<b)-1,$===ni&&X>bs||$===es&&X>cs)return 1;for(;;){l=N-L,v[T]<E?(n=0,s=v[T]):v[T]>E?(n=d[c+v[T]],s=G[H+v[T]]):(n=96,s=0),e=1<<N-L,B=f=1<<A;do{a[u+(x>>L)+(f-=e)]=l<<24|n<<16|s|0}while(0!==f);for(e=1<<N-1;x&e;)e>>=1;if(0!==e?(x&=e-1,x+=e):x=0,T++,0==--U[N]){if(N===D)break;N=r[t+v[T]]}if(N>b&&(x&o)!==i){for(0===L&&(L=b),u+=B,M=1<<(A=N-L);A+L<D&&!((M-=U[A+L])<=0);)A++,M<<=1;if(X+=1<<A,$===ni&&X>bs||$===es&&X>cs)return 1;a[i=x&o]=b<<24|A<<16|u-F|0}}return 0!==x&&(a[u+x]=N-L<<24|64<<16|0),S.bits=b,0}}var Qa,ta,Sh,fb,GF,me,IF,gs,hs,is,MF,wf,nc,PF,QF,Ba,ks,al,UF,ms,ns,os,ps,qs,rs,ss,ts,us,vs,ws,_g,Fb,Sk,zs,Pk,Bs,Cs,Ds,Es,Og,Ng,Hs,Is,Js,Ks,Ls,Ak,Ms,Ns,A,nk,zG,AG,BG,CG,DG,Qs,Rs,GG,HG,IG,JG,KG,LG,MG,NG,OG,PG,QG,RG=false;function Ss($){return($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24)}function TG(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ta.Buf16(320),this.work=new ta.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ts($){var e;return $&&$.state?(e=$.state,$.total_in=$.total_out=e.total=0,$.msg="",e.wrap&&($.adler=1&e.wrap),e.mode=ns,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new ta.Buf32(AG),e.distcode=e.distdyn=new ta.Buf32(BG),e.sane=1,e.back=-1,nc):Ba}function Us($){var e;return $&&$.state?((e=$.state).wsize=0,e.whave=0,e.wnext=0,Ts($)):Ba}function Vs($,e){var a,r;return $&&$.state?(r=$.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Ba:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=a,r.wbits=e,Us($))):Ba}function Ws($,e){var a,r;return $?(r=new TG,$.state=r,r.window=null,(a=Vs($,e))!==nc&&($.state=null),a):Ba}function YG($){return Ws($,DG)}function ZG($){if(GG){var e;for(Qs=new ta.Buf32(512),Rs=new ta.Buf32(32),e=0;e<144;)$.lens[e++]=8;for(;e<256;)$.lens[e++]=9;for(;e<280;)$.lens[e++]=7;for(;e<288;)$.lens[e++]=8;for(me(gs,$.lens,0,288,Qs,0,$.work,{bits:9}),e=0;e<32;)$.lens[e++]=5;me(hs,$.lens,0,32,Rs,0,$.work,{bits:5}),GG=!1}$.lencode=Qs,$.lenbits=9,$.distcode=Rs,$.distbits=5}function Xs($,e,a,r){var t,i=$.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new ta.Buf8(i.wsize)),r>=i.wsize?(ta.arraySet(i.window,e,a-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((t=i.wsize-i.wnext)>r&&(t=r),ta.arraySet(i.window,e,a-r,t,i.wnext),(r-=t)?(ta.arraySet(i.window,e,a-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=t,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=t))),0}function _G($,e){var a,r,t,i,n,v,s,z,l,o,f,d,c,h,E,b,_,k,m,w,R,u,x,T,D=0,g=new ta.Buf8(4),S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&0!==$.avail_in)return Ba;(a=$.state).mode===Fb&&(a.mode=Sk),n=$.next_out,t=$.output,s=$.avail_out,i=$.next_in,r=$.input,v=$.avail_in,z=a.hold,l=a.bits,o=v,f=s,u=nc;$:for(;;)switch(a.mode){case ns:if(0===a.wrap){a.mode=Sk;break}for(;l<16;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(2&a.wrap&&35615===z){a.check=0,g[0]=255&z,g[1]=z>>>8&255,a.check=fb(a.check,g,2,0),z=0,l=0,a.mode=os;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&z)<<8)+(z>>8))%31){$.msg="incorrect header check",a.mode=A;break}if((15&z)!==ms){$.msg="unknown compression method",a.mode=A;break}if(l-=4,R=8+(15&(z>>>=4)),0===a.wbits)a.wbits=R;else if(R>a.wbits){$.msg="invalid window size",a.mode=A;break}a.dmax=1<<R,$.adler=a.check=1,a.mode=512&z?ws:Fb,z=0,l=0;break;case os:for(;l<16;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(a.flags=z,(255&a.flags)!==ms){$.msg="unknown compression method",a.mode=A;break}if(57344&a.flags){$.msg="unknown header flags set",a.mode=A;break}a.head&&(a.head.text=z>>8&1),512&a.flags&&(g[0]=255&z,g[1]=z>>>8&255,a.check=fb(a.check,g,2,0)),z=0,l=0,a.mode=ps;case ps:for(;l<32;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}a.head&&(a.head.time=z),512&a.flags&&(g[0]=255&z,g[1]=z>>>8&255,g[2]=z>>>16&255,g[3]=z>>>24&255,a.check=fb(a.check,g,4,0)),z=0,l=0,a.mode=qs;case qs:for(;l<16;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}a.head&&(a.head.xflags=255&z,a.head.os=z>>8),512&a.flags&&(g[0]=255&z,g[1]=z>>>8&255,a.check=fb(a.check,g,2,0)),z=0,l=0,a.mode=rs;case rs:if(1024&a.flags){for(;l<16;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}a.length=z,a.head&&(a.head.extra_len=z),512&a.flags&&(g[0]=255&z,g[1]=z>>>8&255,a.check=fb(a.check,g,2,0)),z=0,l=0}else a.head&&(a.head.extra=null);a.mode=ss;case ss:if(1024&a.flags&&((d=a.length)>v&&(d=v),d&&(a.head&&(R=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),ta.arraySet(a.head.extra,r,i,d,R)),512&a.flags&&(a.check=fb(a.check,r,d,i)),v-=d,i+=d,a.length-=d),a.length))break $;a.length=0,a.mode=ts;case ts:if(2048&a.flags){if(0===v)break $;d=0;do{R=r[i+d++],a.head&&R&&a.length<65536&&(a.head.name+=String.fromCharCode(R))}while(R&&d<v);if(512&a.flags&&(a.check=fb(a.check,r,d,i)),v-=d,i+=d,R)break $}else a.head&&(a.head.name=null);a.length=0,a.mode=us;case us:if(4096&a.flags){if(0===v)break $;d=0;do{R=r[i+d++],a.head&&R&&a.length<65536&&(a.head.comment+=String.fromCharCode(R))}while(R&&d<v);if(512&a.flags&&(a.check=fb(a.check,r,d,i)),v-=d,i+=d,R)break $}else a.head&&(a.head.comment=null);a.mode=vs;case vs:if(512&a.flags){for(;l<16;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(z!==(65535&a.check)){$.msg="header crc mismatch",a.mode=A;break}z=0,l=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),$.adler=a.check=0,a.mode=Fb;break;case ws:for(;l<32;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}$.adler=a.check=Ss(z),z=0,l=0,a.mode=_g;case _g:if(0===a.havedict)return $.next_out=n,$.avail_out=s,$.next_in=i,$.avail_in=v,a.hold=z,a.bits=l,QF;$.adler=a.check=1,a.mode=Fb;case Fb:if(e===MF||e===wf)break $;case Sk:if(a.last){z>>>=7&l,l-=7&l,a.mode=Ak;break}for(;l<3;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}switch(a.last=1&z,l-=1,3&(z>>>=1)){case 0:a.mode=zs;break;case 1:if(ZG(a),a.mode=Og,e===wf){z>>>=2,l-=2;break $}break;case 2:a.mode=Cs;break;case 3:$.msg="invalid block type",a.mode=A;}z>>>=2,l-=2;break;case zs:for(z>>>=7&l,l-=7&l;l<32;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if((65535&z)!=(z>>>16^65535)){$.msg="invalid stored block lengths",a.mode=A;break}if(a.length=65535&z,z=0,l=0,a.mode=Pk,e===wf)break $;case Pk:a.mode=Bs;case Bs:if(d=a.length){if(d>v&&(d=v),d>s&&(d=s),0===d)break $;ta.arraySet(t,r,i,d,n),v-=d,i+=d,s-=d,n+=d,a.length-=d;break}a.mode=Fb;break;case Cs:for(;l<14;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(a.nlen=257+(31&z),z>>>=5,l-=5,a.ndist=1+(31&z),z>>>=5,l-=5,a.ncode=4+(15&z),z>>>=4,l-=4,a.nlen>286||a.ndist>30){$.msg="too many length or distance symbols",a.mode=A;break}a.have=0,a.mode=Ds;case Ds:for(;a.have<a.ncode;){for(;l<3;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}a.lens[S[a.have++]]=7&z,z>>>=3,l-=3}for(;a.have<19;)a.lens[S[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,x={bits:a.lenbits},u=me(IF,a.lens,0,19,a.lencode,0,a.work,x),a.lenbits=x.bits,u){$.msg="invalid code lengths set",a.mode=A;break}a.have=0,a.mode=Es;case Es:for(;a.have<a.nlen+a.ndist;){for(;b=(D=a.lencode[z&(1<<a.lenbits)-1])>>>16&255,_=65535&D,!((E=D>>>24)<=l);){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(_<16)z>>>=E,l-=E,a.lens[a.have++]=_;else{if(16===_){for(T=E+2;l<T;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(z>>>=E,l-=E,0===a.have){$.msg="invalid bit length repeat",a.mode=A;break}R=a.lens[a.have-1],d=3+(3&z),z>>>=2,l-=2}else if(17===_){for(T=E+3;l<T;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}l-=E,R=0,d=3+(7&(z>>>=E)),z>>>=3,l-=3}else{for(T=E+7;l<T;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}l-=E,R=0,d=11+(127&(z>>>=E)),z>>>=7,l-=7}if(a.have+d>a.nlen+a.ndist){$.msg="invalid bit length repeat",a.mode=A;break}for(;d--;)a.lens[a.have++]=R}}if(a.mode===A)break;if(0===a.lens[256]){$.msg="invalid code -- missing end-of-block",a.mode=A;break}if(a.lenbits=9,x={bits:a.lenbits},u=me(gs,a.lens,0,a.nlen,a.lencode,0,a.work,x),a.lenbits=x.bits,u){$.msg="invalid literal/lengths set",a.mode=A;break}if(a.distbits=6,a.distcode=a.distdyn,x={bits:a.distbits},u=me(hs,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,x),a.distbits=x.bits,u){$.msg="invalid distances set",a.mode=A;break}if(a.mode=Og,e===wf)break $;case Og:a.mode=Ng;case Ng:if(v>=6&&s>=258){$.next_out=n,$.avail_out=s,$.next_in=i,$.avail_in=v,a.hold=z,a.bits=l,GF($,f),n=$.next_out,t=$.output,s=$.avail_out,i=$.next_in,r=$.input,v=$.avail_in,z=a.hold,l=a.bits,a.mode===Fb&&(a.back=-1);break}for(a.back=0;b=(D=a.lencode[z&(1<<a.lenbits)-1])>>>16&255,_=65535&D,!((E=D>>>24)<=l);){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(b&&0==(240&b)){for(k=E,m=b,w=_;b=(D=a.lencode[w+((z&(1<<k+m)-1)>>k)])>>>16&255,_=65535&D,!(k+(E=D>>>24)<=l);){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}z>>>=k,l-=k,a.back+=k}if(z>>>=E,l-=E,a.back+=E,a.length=_,0===b){a.mode=Ls;break}if(32&b){a.back=-1,a.mode=Fb;break}if(64&b){$.msg="invalid literal/length code",a.mode=A;break}a.extra=15&b,a.mode=Hs;case Hs:if(a.extra){for(T=a.extra;l<T;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}a.length+=z&(1<<a.extra)-1,z>>>=a.extra,l-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=Is;case Is:for(;b=(D=a.distcode[z&(1<<a.distbits)-1])>>>16&255,_=65535&D,!((E=D>>>24)<=l);){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(0==(240&b)){for(k=E,m=b,w=_;b=(D=a.distcode[w+((z&(1<<k+m)-1)>>k)])>>>16&255,_=65535&D,!(k+(E=D>>>24)<=l);){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}z>>>=k,l-=k,a.back+=k}if(z>>>=E,l-=E,a.back+=E,64&b){$.msg="invalid distance code",a.mode=A;break}a.offset=_,a.extra=15&b,a.mode=Js;case Js:if(a.extra){for(T=a.extra;l<T;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}a.offset+=z&(1<<a.extra)-1,z>>>=a.extra,l-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){$.msg="invalid distance too far back",a.mode=A;break}a.mode=Ks;case Ks:if(0===s)break $;if(d=f-s,a.offset>d){if((d=a.offset-d)>a.whave&&a.sane){$.msg="invalid distance too far back",a.mode=A;break}d>a.wnext?(d-=a.wnext,c=a.wsize-d):c=a.wnext-d,d>a.length&&(d=a.length),h=a.window}else h=t,c=n-a.offset,d=a.length;d>s&&(d=s),s-=d,a.length-=d;do{t[n++]=h[c++]}while(--d);0===a.length&&(a.mode=Ng);break;case Ls:if(0===s)break $;t[n++]=a.length,s--,a.mode=Ng;break;case Ak:if(a.wrap){for(;l<32;){if(0===v)break $;v--,z|=r[i++]<<l,l+=8}if(f-=s,$.total_out+=f,a.total+=f,f&&($.adler=a.check=a.flags?fb(a.check,t,f,n-f):Sh(a.check,t,f,n-f)),f=s,(a.flags?z:Ss(z))!==a.check){$.msg="incorrect data check",a.mode=A;break}z=0,l=0}a.mode=Ms;case Ms:if(a.wrap&&a.flags){for(;l<32;){if(0===v)break $;v--,z+=r[i++]<<l,l+=8}if(z!==(4294967295&a.total)){$.msg="incorrect length check",a.mode=A;break}z=0,l=0}a.mode=Ns;case Ns:u=PF;break $;case A:u=ks;break $;case nk:return al;case zG:default:return Ba;}return $.next_out=n,$.avail_out=s,$.next_in=i,$.avail_in=v,a.hold=z,a.bits=l,(a.wsize||f!==$.avail_out&&a.mode<A&&(a.mode<Ak||e!==is))&&Xs($,$.output,$.next_out,f-$.avail_out)?(a.mode=nk,al):(o-=$.avail_in,f-=$.avail_out,$.total_in+=o,$.total_out+=f,a.total+=f,a.wrap&&f&&($.adler=a.check=a.flags?fb(a.check,t,f,$.next_out-f):Sh(a.check,t,f,$.next_out-f)),$.data_type=a.bits+(a.last?64:0)+(a.mode===Fb?128:0)+(a.mode===Og||a.mode===Pk?256:0),(0===o&&0===f||e===is)&&u===nc&&(u=UF),u)}function aH($){if(!$||!$.state)return Ba;var e=$.state;return e.window&&(e.window=null),$.state=null,nc}function bH($,e){var a;return $&&$.state?0==(2&(a=$.state).wrap)?Ba:(a.head=e,e.done=!1,nc):Ba}function cH($,e){var a,r=e.length;return $&&$.state?0!==(a=$.state).wrap&&a.mode!==_g?Ba:a.mode===_g&&Sh(1,e,r,0)!==a.check?ks:Xs($,e,r,r)?(a.mode=nk,al):(a.havedict=1,nc):Ba}function dH(){if(RG)return;RG=true;Qa={};ta=(wh(),M);Sh=(Br(),Ar);fb=(Dr(),Cr);GF=(nF(),jF);me=(BF(),oF);IF=0;gs=1;hs=2;is=4;MF=5;wf=6;nc=0;PF=1;QF=2;Ba=-2;ks=-3;al=-4;UF=-5;ms=8;ns=1;os=2;ps=3;qs=4;rs=5;ss=6;ts=7;us=8;vs=9;ws=10;_g=11;Fb=12;Sk=13;zs=14;Pk=15;Bs=16;Cs=17;Ds=18;Es=19;Og=20;Ng=21;Hs=22;Is=23;Js=24;Ks=25;Ls=26;Ak=27;Ms=28;Ns=29;A=30;nk=31;zG=32;AG=852;BG=592;CG=15;DG=CG;GG=!0;HG=Us;Qa.inflateReset=HG;IG=Vs;Qa.inflateReset2=IG;JG=Ts;Qa.inflateResetKeep=JG;KG=YG;Qa.inflateInit=KG;LG=Ws;Qa.inflateInit2=LG;MG=_G;Qa.inflate=MG;NG=aH;Qa.inflateEnd=NG;OG=bH;Qa.inflateGetHeader=OG;PG=cH;Qa.inflateSetDictionary=PG;QG="pako inflate (from Nodeca project)";Qa.inflateInfo=QG}var eH,fH=false;function gH(){if(fH)return;fH=true;eH={};eH={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}var h,iH,jH,ua,lH,re,Uc,Zs,Vi,Oc,Mc,id,bc,Jc,Gd,Fc,xH,yH,zH,AH=false;function V(t){if("number"!=typeof t||t<Oc||t>Fc)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}function CH(){if(AH)return;AH=true;h={};iH=(va(),Aa);jH=(Ma(),Z).Buffer;ua=(lj(),Ej);lH=(MB(),JB);re=(iF(),ib);Uc=(dH(),Qa);Zs=(gH(),eH);for(var $Fjk3$var$key in Zs)h[$Fjk3$var$key]=Zs[$Fjk3$var$key];Vi=0;h.NONE=Vi;Oc=1;h.DEFLATE=Oc;Mc=2;h.INFLATE=Mc;id=3;h.GZIP=id;bc=4;h.GUNZIP=bc;Jc=5;h.DEFLATERAW=Jc;Gd=6;h.INFLATERAW=Gd;Fc=7;h.UNZIP=Fc;xH=31;yH=139;V.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,ua(this.init_done,"close before init"),ua(this.mode<=Fc),this.mode===Oc||this.mode===id||this.mode===Jc?re.deflateEnd(this.strm):this.mode!==Mc&&this.mode!==bc&&this.mode!==Gd&&this.mode!==Fc||Uc.inflateEnd(this.strm),this.mode=Vi,this.dictionary=null)},V.prototype.write=function(t,r,e,s,i,$,o){return this._write(!0,t,r,e,s,i,$,o)},V.prototype.writeSync=function(t,r,e,s,i,$,o){return this._write(!1,t,r,e,s,i,$,o)},V.prototype._write=function(t,r,e,s,i,$,o,a){if(ua.equal(arguments.length,8),ua(this.init_done,"write before init"),ua(this.mode!==Vi,"already finalized"),ua.equal(!1,this.write_in_progress,"write already in progress"),ua.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,ua.equal(!1,void 0===r,"must provide flush value"),this.write_in_progress=!0,r!==h.Z_NO_FLUSH&&r!==h.Z_PARTIAL_FLUSH&&r!==h.Z_SYNC_FLUSH&&r!==h.Z_FULL_FLUSH&&r!==h.Z_FINISH&&r!==h.Z_BLOCK)throw new Error("Invalid flush value");if(null==e&&(e=jH.alloc(0),i=0,s=0),this.strm.avail_in=i,this.strm.input=e,this.strm.next_in=s,this.strm.avail_out=a,this.strm.output=$,this.strm.next_out=o,this.flush=r,!t)return this._process(),this._checkError()?this._afterSync():void 0;var F=this;return iH.nextTick(function(){F._process(),F._after()}),this},V.prototype._afterSync=function(){var t=this.strm.avail_out,r=this.strm.avail_in;return this.write_in_progress=!1,[r,t]},V.prototype._process=function(){var t=null;switch(this.mode){case Oc:case id:case Jc:this.err=re.deflate(this.strm,this.flush);break;case Fc:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(this.strm.input[t]!==xH){this.mode=Mc;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;this.strm.input[t]===yH?(this.gzip_id_bytes_read=2,this.mode=bc):this.mode=Mc;break;default:throw new Error("invalid number of gzip magic number bytes read");}case Mc:case bc:case Gd:for(this.err=Uc.inflate(this.strm,this.flush),this.err===h.Z_NEED_DICT&&this.dictionary&&(this.err=Uc.inflateSetDictionary(this.strm,this.dictionary),this.err===h.Z_OK?this.err=Uc.inflate(this.strm,this.flush):this.err===h.Z_DATA_ERROR&&(this.err=h.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===bc&&this.err===h.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=Uc.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode);}},V.prototype._checkError=function(){switch(this.err){case h.Z_OK:case h.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===h.Z_FINISH)return this._error("unexpected end of file"),!1;break;case h.Z_STREAM_END:break;case h.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1;}return!0},V.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,r=this.strm.avail_in;this.write_in_progress=!1,this.callback(r,t),this.pending_close&&this.close()}},V.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},V.prototype.init=function(t,r,e,s,i){ua(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),ua(t>=8&&t<=15,"invalid windowBits"),ua(r>=-1&&r<=9,"invalid compression level"),ua(e>=1&&e<=9,"invalid memlevel"),ua(s===h.Z_FILTERED||s===h.Z_HUFFMAN_ONLY||s===h.Z_RLE||s===h.Z_FIXED||s===h.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,t,e,s,i),this._setDictionary()},V.prototype.params=function(){throw new Error("deflateParams Not supported")},V.prototype.reset=function(){this._reset(),this._setDictionary()},V.prototype._init=function(t,r,e,s,i){switch(this.level=t,this.windowBits=r,this.memLevel=e,this.strategy=s,this.flush=h.Z_NO_FLUSH,this.err=h.Z_OK,this.mode!==id&&this.mode!==bc||(this.windowBits+=16),this.mode===Fc&&(this.windowBits+=32),this.mode!==Jc&&this.mode!==Gd||(this.windowBits=-1*this.windowBits),this.strm=new lH,this.mode){case Oc:case id:case Jc:this.err=re.deflateInit2(this.strm,this.level,h.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case Mc:case bc:case Gd:case Fc:this.err=Uc.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode);}this.err!==h.Z_OK&&this._error("Init error"),this.dictionary=i,this.write_in_progress=!1,this.init_done=!0},V.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=h.Z_OK,this.mode){case Oc:case Jc:this.err=re.deflateSetDictionary(this.strm,this.dictionary);}this.err!==h.Z_OK&&this._error("Failed to set dictionary")}},V.prototype._reset=function(){switch(this.err=h.Z_OK,this.mode){case Oc:case Jc:case id:this.err=re.deflateReset(this.strm);break;case Mc:case Gd:case bc:this.err=Uc.inflateReset(this.strm);}this.err!==h.Z_OK&&this._error("Failed to reset stream")};zH=V;h.Zlib=zH}var DH,EH,FH=false;function GH(){if(FH)return;FH=true;DH={};EH=(Ma(),Z).Buffer;DH=function(r){return r instanceof EH}}var HH,IH=false;function JH(){if(IH)return;IH=true;HH={};HH="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}}var t,Sb,dt,NH,Xl,et,ft,ig,SH,gt,UH,VH,WH,XH,YH,ZH,$H,_H,aI,bI,cI,dI,eI,fI,gI,hI,iI,jI,ht,pc,it,nI,oI=false;function _b(r,e){var $={seen:[],stylize:rI};return arguments.length>=3&&($.depth=arguments[2]),arguments.length>=4&&($.colors=arguments[3]),rk(e)?$.showHidden=e:e&&ht($,e),fc($.showHidden)&&($.showHidden=!1),fc($.depth)&&($.depth=2),fc($.colors)&&($.colors=!1),fc($.customInspect)&&($.customInspect=!0),$.colors&&($.stylize=qI),Wf($,r,$.depth)}function qI(r,e){var $=_b.styles[e];return $?"\x1B["+_b.colors[$][0]+"m"+r+"\x1B["+_b.colors[$][1]+"m":r}function rI(r,e){return r}function sI(r){var e={};return r.forEach(function(r,$){e[r]=!0}),e}function Wf(r,e,$){if(r.customInspect&&e&&eg(e.inspect)&&e.inspect!==gt&&(!e.constructor||e.constructor.prototype!==e)){var t=e.inspect($,r);return Af(t)||(t=Wf(r,t,$)),t}var o=uI(r,e);if(o)return o;var i=Object.keys(e),n=sI(i);if(r.showHidden&&(i=Object.getOwnPropertyNames(e)),wg(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return Jk(e);if(0===i.length){if(eg(e)){var a=e.name?": "+e.name:"";return r.stylize("[Function"+a+"]","special")}if(Mg(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Fi(e))return r.stylize(Date.prototype.toString.call(e),"date");if(wg(e))return Jk(e)}var s,p="",w=!1,u=["{","}"];(kt(e)&&(w=!0,u=["[","]"]),eg(e))&&(p=" [Function"+(e.name?": "+e.name:"")+"]");return Mg(e)&&(p=" "+RegExp.prototype.toString.call(e)),Fi(e)&&(p=" "+Date.prototype.toUTCString.call(e)),wg(e)&&(p=" "+Jk(e)),0!==i.length||w&&0!=e.length?$<0?Mg(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special"):(r.seen.push(e),s=w?wI(r,e,$,n,i):i.map(function(t){return sk(r,e,$,n,t,w)}),r.seen.pop(),yI(s,p,u)):u[0]+p+u[1]}function uI(r,e){if(fc(e))return r.stylize("undefined","undefined");if(Af(e)){var $="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return r.stylize($,"string")}return mt(e)?r.stylize(""+e,"number"):rk(e)?r.stylize(""+e,"boolean"):Cf(e)?r.stylize("null","null"):void 0}function Jk(r){return"["+Error.prototype.toString.call(r)+"]"}function wI(r,e,$,t,o){for(var i=[],n=0,a=e.length;n<a;++n)st(e,String(n))?i.push(sk(r,e,$,t,String(n),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(sk(r,e,$,t,o,!0))}),i}function sk(r,e,$,t,o,i){var n,a,s;if((s=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=s.set?r.stylize("[Getter/Setter]","special"):r.stylize("[Getter]","special"):s.set&&(a=r.stylize("[Setter]","special")),st(t,o)||(n="["+o+"]"),a||(r.seen.indexOf(s.value)<0?(a=Cf($)?Wf(r,s.value,null):Wf(r,s.value,$-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(r){return"  "+r}).join("\n").substr(2):"\n"+a.split("\n").map(function(r){return"   "+r}).join("\n")):a=r.stylize("[Circular]","special")),fc(n)){if(i&&o.match(/^\d+$/))return a;(n=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=r.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),n=r.stylize(n,"string"))}return n+": "+a}function yI(r,e,$){return r.reduce(function(r,e){return 0,e.indexOf("\n")>=0&&0,r+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?$[0]+(""===e?"":e+"\n ")+" "+r.join(",\n  ")+" "+$[1]:$[0]+e+" "+r.join(", ")+" "+$[1]}function kt(r){return Array.isArray(r)}function rk(r){return"boolean"==typeof r}function Cf(r){return null===r}function CI(r){return null==r}function mt(r){return"number"==typeof r}function Af(r){return"string"==typeof r}function FI(r){return"symbol"==typeof r}function fc(r){return void 0===r}function Mg(r){return Kd(r)&&"[object RegExp]"===ui(r)}function Kd(r){return"object"==typeof r&&null!==r}function Fi(r){return Kd(r)&&"[object Date]"===ui(r)}function wg(r){return Kd(r)&&("[object Error]"===ui(r)||r instanceof Error)}function eg(r){return"function"==typeof r}function MI(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function ui(r){return Object.prototype.toString.call(r)}function hi(r){return r<10?"0"+r.toString(10):r.toString(10)}function PI(){var r=new Date,e=[hi(r.getHours()),hi(r.getMinutes()),hi(r.getSeconds())].join(":");return[r.getDate(),hI[r.getMonth()],e].join(" ")}function st(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function RI(r,e){if(!r){var $=new Error("Promise was rejected with a falsy value");$.reason=r,r=$}return e(r)}function SI(r){if("function"!=typeof r)throw new TypeError("The \"original\" argument must be of type Function");function e(){for(var e=[],$=0;$<arguments.length;$++)e.push(arguments[$]);var t=e.pop();if("function"!=typeof t)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return t.apply(o,arguments)};r.apply(this,e).then(function(r){Sb.nextTick(i,null,r)},function(r){Sb.nextTick(RI,r,i)})}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,dt(r)),e}function TI(){if(oI)return;oI=true;t={};Sb=(va(),Aa);dt=Object.getOwnPropertyDescriptors||function(r){for(var e=Object.keys(r),$={},t=0;t<e.length;t++)$[e[t]]=Object.getOwnPropertyDescriptor(r,e[t]);return $};NH=/%[sdj%]/g;Xl=function(r){if(!Af(r)){for(var e=[],$=0;$<arguments.length;$++)e.push(_b(arguments[$]));return e.join(" ")}$=1;for(var t=arguments,o=t.length,i=String(r).replace(NH,function(r){if("%%"===r)return"%";if($>=o)return r;switch(r){case"%s":return String(t[$++]);case"%d":return Number(t[$++]);case"%j":try{return JSON.stringify(t[$++])}catch(e){return"[Circular]"}default:return r;}}),n=t[$];$<o;n=t[++$])Cf(n)||!Kd(n)?i+=" "+n:i+=" "+_b(n);return i};t.format=Xl;et=function(r,e){if(void 0!==Sb&&!0===Sb.noDeprecation)return r;if(void 0===Sb)return function(){return et(r,e).apply(this,arguments)};var $=!1;return function(){if(!$){if(Sb.throwDeprecation)throw new Error(e);Sb.traceDeprecation?console.trace(e):console.error(e),$=!0}return r.apply(this,arguments)}};t.deprecate=et;ig={};SH=function(r){if(fc(ft)&&(ft=""),r=r.toUpperCase(),!ig[r])if(new RegExp("\\b"+r+"\\b","i").test(ft)){var e=Sb.pid;ig[r]=function(){var $=Xl.apply(t,arguments);console.error("%s %d: %s",r,e,$)}}else ig[r]=function(){};return ig[r]};t.debuglog=SH;gt=_b;t.inspect=gt,_b.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},_b.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};UH=kt;t.isArray=UH;VH=rk;t.isBoolean=VH;WH=Cf;t.isNull=WH;XH=CI;t.isNullOrUndefined=XH;YH=mt;t.isNumber=YH;ZH=Af;t.isString=ZH;$H=FI;t.isSymbol=$H;_H=fc;t.isUndefined=_H;aI=Mg;t.isRegExp=aI;bI=Kd;t.isObject=bI;cI=Fi;t.isDate=cI;dI=wg;t.isError=dI;eI=eg;t.isFunction=eI;fI=MI;t.isPrimitive=fI;gI=(GH(),DH);t.isBuffer=gI;hI=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];iI=function(){console.log("%s - %s",PI(),Xl.apply(t,arguments))};t.log=iI;jI=(JH(),HH);t.inherits=jI;ht=function(r,e){if(!e||!Kd(e))return r;for(var $=Object.keys(e),t=$.length;t--;)r[$[t]]=e[$[t]];return r};t._extend=ht;pc="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;it=function(r){if("function"!=typeof r)throw new TypeError("The \"original\" argument must be of type Function");if(pc&&r[pc]){var e;if("function"!=typeof(e=r[pc]))throw new TypeError("The \"util.promisify.custom\" argument must be of type Function");return Object.defineProperty(e,pc,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,$,t=new Promise(function(r,t){e=r,$=t}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(r,t){r?$(r):e(t)});try{r.apply(this,o)}catch(n){$(n)}return t}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),pc&&Object.defineProperty(e,pc,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,dt(r))};t.promisify=it,it.custom=pc;nI=SI;t.callbackify=nI}var a,mh,Va,vt,g,Lb,Pe,Kk,xt,bJ,cJ,dJ,eJ,fJ,gJ,hJ,iJ,jJ,kJ,lJ,mJ,nJ,oJ,pJ,qJ,rJ,sJ,tJ,uJ,vJ,wJ,xJ,yJ,zJ,AJ,BJ,CJ,DJ=false;function bd(e,$,i){var r=[],n=0;function t(){for(var $;null!==($=e.read());)r.push($),n+=$.length;e.once("readable",t)}function a(){var $,t=null;n>=Kk?t=new RangeError(xt):$=Va.concat(r,n),r=[],e.close(),i(t,$)}e.on("error",function($){e.removeListener("end",a),e.removeListener("readable",t),i($)}),e.on("end",a),e.end($),t()}function ad(e,$){if("string"==typeof $&&($=Va.from($)),!Va.isBuffer($))throw new TypeError("Not a string or buffer");var i=e._finishFlushFlag;return e._processChunk($,i)}function Zc(e){if(!(this instanceof Zc))return new Zc(e);C.call(this,e,g.DEFLATE)}function Nc(e){if(!(this instanceof Nc))return new Nc(e);C.call(this,e,g.INFLATE)}function Kc(e){if(!(this instanceof Kc))return new Kc(e);C.call(this,e,g.GZIP)}function Bc(e){if(!(this instanceof Bc))return new Bc(e);C.call(this,e,g.GUNZIP)}function yc(e){if(!(this instanceof yc))return new yc(e);C.call(this,e,g.DEFLATERAW)}function wc(e){if(!(this instanceof wc))return new wc(e);C.call(this,e,g.INFLATERAW)}function tc(e){if(!(this instanceof tc))return new tc(e);C.call(this,e,g.UNZIP)}function Bt(e){return e===g.Z_NO_FLUSH||e===g.Z_PARTIAL_FLUSH||e===g.Z_SYNC_FLUSH||e===g.Z_FULL_FLUSH||e===g.Z_FINISH||e===g.Z_BLOCK}function C(e,$){var i=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||a.Z_DEFAULT_CHUNK,vt.call(this,e),e.flush&&!Bt(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!Bt(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||g.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:g.Z_FINISH,e.chunkSize&&(e.chunkSize<a.Z_MIN_CHUNK||e.chunkSize>a.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<a.Z_MIN_WINDOWBITS||e.windowBits>a.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<a.Z_MIN_LEVEL||e.level>a.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<a.Z_MIN_MEMLEVEL||e.memLevel>a.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=a.Z_FILTERED&&e.strategy!=a.Z_HUFFMAN_ONLY&&e.strategy!=a.Z_RLE&&e.strategy!=a.Z_FIXED&&e.strategy!=a.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Va.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new g.Zlib($);var r=this;this._hadError=!1,this._handle.onerror=function(e,$){Jg(r),r._hadError=!0;var i=new Error(e);i.errno=$,i.code=a.codes[$],r.emit("error",i)};var n=a.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(n=e.level);var t=a.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(t=e.strategy),this._handle.init(e.windowBits||a.Z_DEFAULT_WINDOWBITS,n,e.memLevel||a.Z_DEFAULT_MEMLEVEL,t,e.dictionary),this._buffer=Va.allocUnsafe(this._chunkSize),this._offset=0,this._level=n,this._strategy=t,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!i._handle},configurable:!0,enumerable:!0})}function Jg(e,$){$&&mh.nextTick($),e._handle&&(e._handle.close(),e._handle=null)}function QJ(e){e.emit("close")}function RJ(){if(DJ)return;DJ=true;a={};mh=(va(),Aa);Va=(Ma(),Z).Buffer;vt=(gi(),ki).Transform;g=(CH(),h);Lb=(TI(),t);Pe=(lj(),Ej).ok;Kk=(Ma(),Z).kMaxLength;xt="Cannot create final Buffer. It would be larger than 0x"+Kk.toString(16)+" bytes";g.Z_MIN_WINDOWBITS=8,g.Z_MAX_WINDOWBITS=15,g.Z_DEFAULT_WINDOWBITS=15,g.Z_MIN_CHUNK=64,g.Z_MAX_CHUNK=1/0,g.Z_DEFAULT_CHUNK=16384,g.Z_MIN_MEMLEVEL=1,g.Z_MAX_MEMLEVEL=9,g.Z_DEFAULT_MEMLEVEL=8,g.Z_MIN_LEVEL=-1,g.Z_MAX_LEVEL=9,g.Z_DEFAULT_LEVEL=g.Z_DEFAULT_COMPRESSION;for(var $eZik$var$bkeys=Object.keys(g),$eZik$var$bk=0;$eZik$var$bk<$eZik$var$bkeys.length;$eZik$var$bk++){var $eZik$var$bkey=$eZik$var$bkeys[$eZik$var$bk];$eZik$var$bkey.match(/^Z/)&&Object.defineProperty(a,$eZik$var$bkey,{enumerable:!0,value:g[$eZik$var$bkey],writable:!1})}for(var $eZik$var$codes={Z_OK:g.Z_OK,Z_STREAM_END:g.Z_STREAM_END,Z_NEED_DICT:g.Z_NEED_DICT,Z_ERRNO:g.Z_ERRNO,Z_STREAM_ERROR:g.Z_STREAM_ERROR,Z_DATA_ERROR:g.Z_DATA_ERROR,Z_MEM_ERROR:g.Z_MEM_ERROR,Z_BUF_ERROR:g.Z_BUF_ERROR,Z_VERSION_ERROR:g.Z_VERSION_ERROR},$eZik$var$ckeys=Object.keys($eZik$var$codes),$eZik$var$ck=0;$eZik$var$ck<$eZik$var$ckeys.length;$eZik$var$ck++){var $eZik$var$ckey=$eZik$var$ckeys[$eZik$var$ck];$eZik$var$codes[$eZik$var$codes[$eZik$var$ckey]]=$eZik$var$ckey}Object.defineProperty(a,"codes",{enumerable:!0,value:Object.freeze($eZik$var$codes),writable:!1});bJ=Zc;a.Deflate=bJ;cJ=Nc;a.Inflate=cJ;dJ=Kc;a.Gzip=dJ;eJ=Bc;a.Gunzip=eJ;fJ=yc;a.DeflateRaw=fJ;gJ=wc;a.InflateRaw=gJ;hJ=tc;a.Unzip=hJ;iJ=function(e){return new Zc(e)};a.createDeflate=iJ;jJ=function(e){return new Nc(e)};a.createInflate=jJ;kJ=function(e){return new yc(e)};a.createDeflateRaw=kJ;lJ=function(e){return new wc(e)};a.createInflateRaw=lJ;mJ=function(e){return new Kc(e)};a.createGzip=mJ;nJ=function(e){return new Bc(e)};a.createGunzip=nJ;oJ=function(e){return new tc(e)};a.createUnzip=oJ;pJ=function(e,$,i){return"function"==typeof $&&(i=$,$={}),bd(new Zc($),e,i)};a.deflate=pJ;qJ=function(e,$){return ad(new Zc($),e)};a.deflateSync=qJ;rJ=function(e,$,i){return"function"==typeof $&&(i=$,$={}),bd(new Kc($),e,i)};a.gzip=rJ;sJ=function(e,$){return ad(new Kc($),e)};a.gzipSync=sJ;tJ=function(e,$,i){return"function"==typeof $&&(i=$,$={}),bd(new yc($),e,i)};a.deflateRaw=tJ;uJ=function(e,$){return ad(new yc($),e)};a.deflateRawSync=uJ;vJ=function(e,$,i){return"function"==typeof $&&(i=$,$={}),bd(new tc($),e,i)};a.unzip=vJ;wJ=function(e,$){return ad(new tc($),e)};a.unzipSync=wJ;xJ=function(e,$,i){return"function"==typeof $&&(i=$,$={}),bd(new Nc($),e,i)};a.inflate=xJ;yJ=function(e,$){return ad(new Nc($),e)};a.inflateSync=yJ;zJ=function(e,$,i){return"function"==typeof $&&(i=$,$={}),bd(new Bc($),e,i)};a.gunzip=zJ;AJ=function(e,$){return ad(new Bc($),e)};a.gunzipSync=AJ;BJ=function(e,$,i){return"function"==typeof $&&(i=$,$={}),bd(new wc($),e,i)};a.inflateRaw=BJ;CJ=function(e,$){return ad(new wc($),e)};a.inflateRawSync=CJ,Lb.inherits(C,vt),C.prototype.params=function(e,$,i){if(e<a.Z_MIN_LEVEL||e>a.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if($!=a.Z_FILTERED&&$!=a.Z_HUFFMAN_ONLY&&$!=a.Z_RLE&&$!=a.Z_FIXED&&$!=a.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+$);if(this._level!==e||this._strategy!==$){var r=this;this.flush(g.Z_SYNC_FLUSH,function(){Pe(r._handle,"zlib binding closed"),r._handle.params(e,$),r._hadError||(r._level=e,r._strategy=$,i&&i())})}else mh.nextTick(i)},C.prototype.reset=function(){return Pe(this._handle,"zlib binding closed"),this._handle.reset()},C.prototype._flush=function(e){this._transform(Va.alloc(0),"",e)},C.prototype.flush=function(e,$){var i=this,r=this._writableState;("function"==typeof e||void 0===e&&!$)&&($=e,e=g.Z_FULL_FLUSH),r.ended?$&&mh.nextTick($):r.ending?$&&this.once("end",$):r.needDrain?$&&this.once("drain",function(){return i.flush(e,$)}):(this._flushFlag=e,this.write(Va.alloc(0),"",$))},C.prototype.close=function(e){Jg(this,e),mh.nextTick(QJ,this)},C.prototype._transform=function(e,$,i){var r,n=this._writableState,t=(n.ending||n.ended)&&(!e||n.length===e.length);return null===e||Va.isBuffer(e)?this._handle?(t?r=this._finishFlushFlag:(r=this._flushFlag,e.length>=n.length&&(this._flushFlag=this._opts.flush||g.Z_NO_FLUSH)),void this._processChunk(e,r,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},C.prototype._processChunk=function(e,$,i){var r=e&&e.length,n=this._chunkSize-this._offset,t=0,a=this,Z="function"==typeof i;if(!Z){var k,o=[],f=0;this.on("error",function(e){k=e}),Pe(this._handle,"zlib binding closed");do{var l=this._handle.writeSync($,e,t,r,this._buffer,this._offset,n)}while(!this._hadError&&u(l[0],l[1]));if(this._hadError)throw k;if(f>=Kk)throw Jg(this),new RangeError(xt);var s=Va.concat(o,f);return Jg(this),s}Pe(this._handle,"zlib binding closed");var v=this._handle.write($,e,t,r,this._buffer,this._offset,n);function u(k,l){if(this&&(this.buffer=null,this.callback=null),!a._hadError){var s=n-l;if(Pe(s>=0,"have should not go down"),s>0){var v=a._buffer.slice(a._offset,a._offset+s);a._offset+=s,Z?a.push(v):(o.push(v),f+=v.length)}if((0===l||a._offset>=a._chunkSize)&&(n=a._chunkSize,a._offset=0,a._buffer=Va.allocUnsafe(a._chunkSize)),0===l){if(t+=r-k,r=k,!Z)return!0;var p=a._handle.write($,e,t,r,a._buffer,a._offset,a._chunkSize);return p.callback=u,void(p.buffer=e)}if(!Z)return!1;i()}}v.buffer=e,v.callback=u},Lb.inherits(Zc,C),Lb.inherits(Nc,C),Lb.inherits(Kc,C),Lb.inherits(Bc,C),Lb.inherits(yc,C),Lb.inherits(wc,C),Lb.inherits(tc,C)}var SJ,TJ=false;function UJ(){if(TJ)return;TJ=true;SJ={};SJ={_from:"axios@0.19.0",_id:"axios@0.19.0",_inBundle:!1,_integrity:"sha512-1uvKqKQta3KBxIz14F2v06AEHZ/dIoeKfbTRkK1E5oqjDnuEerLmYTgJB5AiQZHJcljpg1TuRzdjDR06qNk0DQ==",_location:"/axios",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"axios@0.19.0",name:"axios",escapedName:"axios",rawSpec:"0.19.0",saveSpec:null,fetchSpec:"0.19.0"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.19.0.tgz",_shasum:"8e09bff3d9122e133f7b8101c8fbdd00ed3d2ab8",_spec:"axios@0.19.0",_where:"C:\\Users\\Sievers\\Documents\\NetBeansProjects\\100Stunden\\Map100hServer2\\public",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"1.5.10","is-buffer":"^2.0.2"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{bundlesize:"^0.17.0",coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^5.2.0",sinon:"^4.5.0",typescript:"^2.8.1","url-search-params":"^0.10.0",webpack:"^1.13.1","webpack-dev-server":"^1.14.1"},homepage:"https://github.com/axios/axios",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test && bundlesize",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",version:"0.19.0"}}var VJ,Dt,Ud,ag,Et,$J,_J,aK,bK,cK,Ft,eK,fK,Vk,mk,Ht,jK=false;function kK(){if(jK)return;jK=true;VJ={};Dt=(va(),Aa);Ud=(Ma(),Z).Buffer;ag=(_(),ma);Et=(Bn(),An);$J=(Dk(),Fk);_J=(Uk(),Ag);aK=(dq(),Tk);bK=($q(),Uq).http;cK=($q(),Uq).https;Ft=(Bg(),Eb);eK=(RJ(),a);fK=(UJ(),SJ);Vk=(vk(),xk);mk=(yn(),xn);Ht=/https:?/;VJ=function(e){return new Promise(function(r,t){var a,$=function(e){clearTimeout(a),r(e)},o=function(e){clearTimeout(a),t(e)},s=e.data,n=e.headers;if(n["User-Agent"]||n["user-agent"]||(n["User-Agent"]="axios/"+fK.version),s&&!ag.isStream(s)){if(Ud.isBuffer(s));else if(ag.isArrayBuffer(s))s=Ud.from(new Uint8Array(s));else{if(!ag.isString(s))return o(Vk("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));s=Ud.from(s,"utf-8")}n["Content-Length"]=s.length}var i=void 0;e.auth&&(i=(e.auth.username||"")+":"+(e.auth.password||""));var u=Ft.parse(e.url),g=u.protocol||"http:";if(!i&&u.auth){var p=u.auth.split(":");i=(p[0]||"")+":"+(p[1]||"")}i&&delete n.Authorization;var h=Ht.test(g),c=h?e.httpsAgent:e.httpAgent,l={path:$J(u.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:n,agent:c,auth:i};e.socketPath?l.socketPath=e.socketPath:(l.hostname=u.hostname,l.port=u.port);var E,v=e.proxy;if(!v&&!1!==v){var f=g.slice(0,-1)+"_proxy",F=Dt.env[f]||Dt.env[f.toUpperCase()];if(F){var J=Ft.parse(F),m=void 0,d=!0;if(m)d=!m.split(",").map(function(e){return e.trim()}).some(function(e){return!!e&&("*"===e||"."===e[0]&&u.hostname.substr(u.hostname.length-e.length)===e&&e.match(/\./g).length===u.hostname.match(/\./g).length||u.hostname===e)});if(d&&(v={host:J.hostname,port:J.port},J.auth)){var x=J.auth.split(":");v.auth={username:x[0],password:x[1]}}}}if(v&&(l.hostname=v.host,l.host=v.host,l.headers.host=u.hostname+(u.port?":"+u.port:""),l.port=v.port,l.path=g+"//"+u.hostname+(u.port?":"+u.port:"")+l.path,v.auth)){var b=Ud.from(v.auth.username+":"+v.auth.password,"utf8").toString("base64");l.headers["Proxy-Authorization"]="Basic "+b}var q=h&&(!v||Ht.test(v.protocol));e.transport?E=e.transport:0===e.maxRedirects?E=q?aK:_J:(e.maxRedirects&&(l.maxRedirects=e.maxRedirects),E=q?cK:bK),e.maxContentLength&&e.maxContentLength>-1&&(l.maxBodyLength=e.maxContentLength);var B=E.request(l,function(r){if(!B.aborted){var t=r;switch(r.headers["content-encoding"]){case"gzip":case"compress":case"deflate":t=204===r.statusCode?t:t.pipe(eK.createUnzip()),delete r.headers["content-encoding"];}var a=r.req||B,s={status:r.statusCode,statusText:r.statusMessage,headers:r.headers,config:e,request:a};if("stream"===e.responseType)s.data=t,Et($,o,s);else{var n=[];t.on("data",function(r){n.push(r),e.maxContentLength>-1&&Ud.concat(n).length>e.maxContentLength&&(t.destroy(),o(Vk("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,a)))}),t.on("error",function(r){B.aborted||o(mk(r,e,null,a))}),t.on("end",function(){var r=Ud.concat(n);"arraybuffer"!==e.responseType&&(r=r.toString(e.responseEncoding)),s.data=r,Et($,o,s)})}}});B.on("error",function(r){B.aborted||o(mk(r,e,null,B))}),e.timeout&&(a=setTimeout(function(){B.abort(),o(Vk("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",B))},e.timeout)),e.cancelToken&&e.cancelToken.promise.then(function(e){B.aborted||(B.abort(),o(e))}),ag.isStream(s)?s.on("error",function(r){o(mk(r,e,null,B))}).pipe(B):B.end(s)})}}var lK,Yj,nK,oK=false;function pK(){if(oK)return;oK=true;lK={};Yj=(_(),ma);nK=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];lK=function(r){var t,e,i,n={};return r?(Yj.forEach(r.split("\n"),function(r){if(i=r.indexOf(":"),t=Yj.trim(r.substr(0,i)).toLowerCase(),e=Yj.trim(r.substr(i+1)),t){if(n[t]&&nK.indexOf(t)>=0)return;n[t]="set-cookie"===t?(n[t]?n[t]:[]).concat([e]):n[t]?n[t]+", "+e:e}}),n):n}}var qK,It,sK=false;function tK(){if(sK)return;sK=true;qK={};It=(_(),ma);qK=It.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function a(t){var a=t;return r&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=a(window.location.href),function(r){var e=It.isString(r)?a(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0}}var uK,tf,wK=false;function xK(){if(wK)return;wK=true;uK={};tf=(_(),ma);uK=tf.isStandardBrowserEnv()?{write:function(e,n,r,t,i,o){var u=[];u.push(e+"="+encodeURIComponent(n)),tf.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),tf.isString(t)&&u.push("path="+t),tf.isString(i)&&u.push("domain="+i),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}var yK,Wj,AK,BK,CK,DK,zj,FK=false;function GK(){if(FK)return;FK=true;yK={};Wj=(_(),ma);AK=(Bn(),An);BK=(Dk(),Fk);CK=(pK(),lK);DK=(tK(),qK);zj=(vk(),xk);yK=function(e){return new Promise(function(r,a){var t=e.data,s=e.headers;Wj.isFormData(t)&&delete s["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var n=e.auth.username||"",i=e.auth.password||"";s.Authorization="Basic "+btoa(n+":"+i)}if(o.open(e.method.toUpperCase(),BK(e.url,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in o?CK(o.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:t,config:e,request:o};AK(r,a,s),o=null}},o.onabort=function(){o&&(a(zj("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){a(zj("Network Error",e,null,o)),o=null},o.ontimeout=function(){a(zj("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",o)),o=null},Wj.isStandardBrowserEnv()){var $=(xK(),uK),l=(e.withCredentials||DK(e.url))&&e.xsrfCookieName?$.read(e.xsrfCookieName):void 0;l&&(s[e.xsrfHeaderName]=l)}if("setRequestHeader"in o&&Wj.forEach(s,function(e,r){void 0===t&&"content-type"===r.toLowerCase()?delete s[r]:o.setRequestHeader(r,e)}),e.withCredentials&&(o.withCredentials=!0),e.responseType)try{o.responseType=e.responseType}catch(u){if("json"!==e.responseType)throw u}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){o&&(o.abort(),a(e),o=null)}),void 0===t&&(t=null),o.send(t)})}}var Jt={},Kt=(va(),Aa),ia=(_(),ma),KK={"Content-Type":"application/x-www-form-urlencoded"};function Mt(e,r){!ia.isUndefined(e)&&ia.isUndefined(e["Content-Type"])&&(e["Content-Type"]=r)}function MK(){var e;return void 0!==Kt&&"[object process]"===Object.prototype.toString.call(Kt)?e=(kK(),VJ):"undefined"!=typeof XMLHttpRequest&&(e=(GK(),yK)),e}var Li={adapter:MK(),transformRequest:[function(e,r){return wn(r,"Accept"),wn(r,"Content-Type"),ia.isFormData(e)||ia.isArrayBuffer(e)||ia.isBuffer(e)||ia.isStream(e)||ia.isFile(e)||ia.isBlob(e)?e:ia.isArrayBufferView(e)?e.buffer:ia.isURLSearchParams(e)?(Mt(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ia.isObject(e)?(Mt(r,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(r){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ia.forEach(["delete","get","head"],function(e){Li.headers[e]={}}),ia.forEach(["post","put","patch"],function(e){Li.headers[e]=ia.merge(KK)}),Jt=Li;var OK={};OK=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};var PK={};PK=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};var QK={},Nt=(_(),ma);function zi(e){e.cancelToken&&e.cancelToken.throwIfRequested()}QK=function(e){return zi(e),e.baseURL&&!OK(e.url)&&(e.url=PK(e.baseURL,e.url)),e.headers=e.headers||{},e.data=yk(e.data,e.headers,e.transformRequest),e.headers=Nt.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),Nt.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]}),(e.adapter||Jt.adapter)(e).then(function(a){return zi(e),a.data=yk(a.data,a.headers,e.transformResponse),a},function(a){return vn(a)||(zi(e),a&&a.response&&(a.response.data=yk(a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})};var Uh={},sc=(_(),ma);Uh=function(e,r){r=r||{};var t={};return sc.forEach(["url","method","params","data"],function(e){void 0!==r[e]&&(t[e]=r[e])}),sc.forEach(["headers","auth","proxy"],function(a){sc.isObject(r[a])?t[a]=sc.deepMerge(e[a],r[a]):void 0!==r[a]?t[a]=r[a]:sc.isObject(e[a])?t[a]=sc.deepMerge(e[a]):void 0!==e[a]&&(t[a]=e[a])}),sc.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(a){void 0!==r[a]?t[a]=r[a]:void 0!==e[a]&&(t[a]=e[a])}),t};var sf={},oh=(_(),ma),XK=(Dk(),Fk);function Xe(r){this.defaults=r,this.interceptors={request:new tn,response:new tn}}Xe.prototype.request=function(r){"string"==typeof r?(r=arguments[1]||{}).url=arguments[0]:r=r||{},(r=Uh(this.defaults,r)).method=r.method?r.method.toLowerCase():"get";var t=[QK,void 0],e=Promise.resolve(r);for(this.interceptors.request.forEach(function(r){t.unshift(r.fulfilled,r.rejected)}),this.interceptors.response.forEach(function(r){t.push(r.fulfilled,r.rejected)});t.length;)e=e.then(t.shift(),t.shift());return e},Xe.prototype.getUri=function(r){return r=Uh(this.defaults,r),XK(r.url,r.params,r.paramsSerializer).replace(/^\?/,"")},oh.forEach(["delete","get","head","options"],function(r){Xe.prototype[r]=function(t,e){return this.request(oh.merge(e||{},{method:r,url:t}))}}),oh.forEach(["post","put","patch"],function(r){Xe.prototype[r]=function(t,e,$){return this.request(oh.merge($||{},{method:r,url:t,data:e}))}}),sf=Xe;var ZK={},Rt=(_(),ma),_K=(mn(),ln);function St($){var e=new sf($),r=_K(sf.prototype.request,e);return Rt.extend(r,sf.prototype,e),Rt.extend(r,e),r}var cb=St(Jt);var Tt={};function xj(e){this.message=e}xj.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},xj.prototype.__CANCEL__=!0,Tt=xj;var eL={};function $f(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var r=this;e(function(e){r.reason||(r.reason=new Tt(e),n(r.reason))})}$f.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},$f.source=function(){var e;return{token:new $f(function(n){e=n}),cancel:e}},eL=$f;var gL={};gL=function(n){return function(r){return n.apply(null,r)}};cb.Axios=sf,cb.create=function($){return St(Uh(cb.defaults,$))},cb.Cancel=Tt,cb.CancelToken=eL,cb.isCancel=vn,cb.all=function($){return Promise.all($)},cb.spread=gL,(ZK=cb).default=cb;EJ=ZK;var hL=new Dc({image:new tg({radius:7,fill:new ug({color:"red"}),stroke:new Hd({color:"white",width:2})})}),Ut=new Dc({stroke:new Hd({width:6,color:[26,115,232,.8]})}),jL=[],Ph=[],lL=new Gb(Ph),Vt=new ra(lL);Vt.setStyle(Ut);var nL=new mc({features:jL}),oL=new mc({features:[Vt]}),Wt=new qc({source:nL}),Wk=new qc({source:oL}),rL=new xm({source:new Vm}),_e=new tm({layers:[rL,Wk,Wt],target:"map",view:new zl({center:cj([7.88,49.8]),zoom:7.5})}),tL=document.getElementById("popup"),uL=document.getElementById("popup-content"),Aj=document.getElementById("popup-closer"),Yg=new Ch({element:tL,autoPan:!0,autoPanAnimation:{duration:250}});function Ps(e){var r=e.data;if(r.length>0){r.forEach(function(e){Ph.push(cj([e.longitude,e.latitude]))});var $=new Gb(Ph),o=new ra($);o.setStyle(Ut),Wk.getSource().clear(),Wk.getSource().addFeature(o),_e.render()}}function fs(e){var r=e.data;r.length>0&&(r.forEach(function(e){var r=new ra({geometry:new ob(cj([e.longitude,e.latitude])),text:e.text,image:e.img,type:"marker"});r.setStyle(hL),Wt.getSource().addFeature(r)}),_e.render())}_e.addOverlay(Yg),Aj.onclick=function(){return Yg.setPosition(void 0),Aj.blur(),!1},_e.on("singleclick",function(e){var r=_e.getFeaturesAtPixel(e.pixel),$=r[0].values_;if(r.length>0&&"marker"===$.type){var o=e.coordinate,a="";$.image?(a="<img src=\"img/"+$.image+"\" onclick=\"openOverlay('"+$.image+"')\" style=\"width: 200px\">",a+="<div>"+$.text+"</div>"):a=$.text,uL.innerHTML=a,Yg.setPosition(o)}else Yg.setPosition(void 0),Aj.blur()});var mp=Date.now();var Gg=pi(EJ);Gg.d.get("https://vfl-grafenwald-fussball.de:8090/coord").then(Ps),Gg.d.get("https://vfl-grafenwald-fussball.de:8090/marker").then(fs),setInterval(function(){Gg.d.get("https://vfl-grafenwald-fussball.de:8090/coord/"+mp).then(Ps),Gg.d.get("https://vfl-grafenwald-fussball.de:8090/marker/"+mp).then(fs),mp=Date.now()},1e4);return{"Focm":{}};});